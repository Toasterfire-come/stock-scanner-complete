:80 {
    reverse_proxy 127.0.0.1:8000

    log {
        output file ./caddy.log {
            roll_size 5MiB
            roll_keep 5
            roll_keep_for 48h
        }
    }

    # Secure headers
    header {
        Strict-Transport-Security "max-age=31536000;"
        X-Content-Type-Options "nosniff"
        X-Frame-Options "DENY"
        X-XSS-Protection "1; mode=block"
    }

    # Serve static files from your Django static directory
    handle_path /static/* {
        root * {$STATIC_PATH}
        file_server
    }

    # Serve media files (user uploads, etc.)
    handle_path /media/* {
        root * {$MEDIA_PATH}
        file_server
    }
}
