# PHASE 7 IMPLEMENTATION GUIDE
## Educational Platform - Complete Setup Instructions

**Project:** TradeScanPro  
**Phase:** 7 - Educational Platform  
**Last Updated:** December 2024

---

## TABLE OF CONTENTS

1. [Overview](#overview)
2. [File Structure](#file-structure)
3. [Backend Setup](#backend-setup)
4. [Frontend Setup](#frontend-setup)
5. [Database Setup](#database-setup)
6. [Data Population](#data-population)
7. [Testing](#testing)
8. [Deployment Checklist](#deployment-checklist)

---

## OVERVIEW

Phase 7 adds a complete educational platform to TradeScanPro with:
- 5 course categories (51 lessons total)
- Interactive lesson player with video, quizzes, and progress tracking
- 200+ term trading glossary with hover tooltips
- User progress tracking and gamification (streaks, certificates)
- TradingView-inspired UI design

**Estimated Implementation Time:** 2 weeks

---

## FILE STRUCTURE

```
app/
├── backend/
│   └── education/                    # New Django app
│       ├── __init__.py
│       ├── models.py                 # ✅ courses_models.py
│       ├── serializers.py            # ✅ education_serializers.py
│       ├── views.py                  # ✅ education_views.py
│       ├── urls.py                   # ✅ education_urls.py
│       ├── admin.py
│       └── migrations/
│
├── frontend/
│   └── src/
│       └── components/
│           └── education/            # New folder
│               ├── CourseCatalog.jsx         # ✅
│               ├── LessonPlayer.jsx          # ✅
│               ├── InfoTooltip.jsx           # ✅
│               ├── Glossary.jsx              # ✅
│               └── ProgressDashboard.jsx     # ✅
│
└── data/
    ├── course_content.json           # ✅ Lesson content
    └── glossary_terms.json           # ✅ 50+ terms
```

---

## BACKEND SETUP

### Step 1: Create Django App

```bash
cd app/backend
python manage.py startapp education
```

### Step 2: Copy Model Files

```bash
# Copy the courses_models.py content to:
app/backend/education/models.py
```

### Step 3: Copy Serializers

```bash
# Copy education_serializers.py content to:
app/backend/education/serializers.py
```

### Step 4: Copy Views

```bash
# Copy education_views.py content to:
app/backend/education/views.py
```

### Step 5: Copy URLs

```bash
# Copy education_urls.py content to:
app/backend/education/urls.py
```

### Step 6: Register App in Settings

Edit `app/backend/config/settings.py`:

```python
INSTALLED_APPS = [
    # ... existing apps
    'education',
]
```

### Step 7: Include URLs in Main Config

Edit `app/backend/config/urls.py`:

```python
from django.urls import path, include

urlpatterns = [
    # ... existing patterns
    path('api/education/', include('education.urls')),
]
```

### Step 8: Create Admin Interface

Edit `app/backend/education/admin.py`:

```python
from django.contrib import admin
from .models import (
    Course, Lesson, UserProgress, CourseCertificate,
    GlossaryTerm, UserLearningStreak
)

@admin.register(Course)
class CourseAdmin(admin.ModelAdmin):
    list_display = ['title', 'category', 'difficulty', 'is_published', 'lesson_count']
    list_filter = ['category', 'difficulty', 'is_published', 'is_premium']
    search_fields = ['title', 'description']
    prepopulated_fields = {'slug': ('title',)}

@admin.register(Lesson)
class LessonAdmin(admin.ModelAdmin):
    list_display = ['title', 'course', 'order', 'content_type', 'is_published']
    list_filter = ['course', 'content_type', 'is_published', 'is_premium']
    search_fields = ['title', 'content']
    prepopulated_fields = {'slug': ('title',)}
    ordering = ['course', 'order']

@admin.register(UserProgress)
class UserProgressAdmin(admin.ModelAdmin):
    list_display = ['user', 'lesson', 'completed', 'quiz_score', 'last_accessed']
    list_filter = ['completed', 'lesson__course']
    search_fields = ['user__username', 'lesson__title']
    readonly_fields = ['started_at', 'completed_at', 'last_accessed']

@admin.register(CourseCertificate)
class CourseCertificateAdmin(admin.ModelAdmin):
    list_display = ['user', 'course', 'certificate_id', 'issued_at', 'average_quiz_score']
    list_filter = ['course', 'issued_at']
    search_fields = ['user__username', 'certificate_id']
    readonly_fields = ['certificate_id', 'issued_at']

@admin.register(GlossaryTerm)
class GlossaryTermAdmin(admin.ModelAdmin):
    list_display = ['term', 'category', 'difficulty', 'view_count']
    list_filter = ['category', 'difficulty']
    search_fields = ['term', 'definition']
    prepopulated_fields = {'slug': ('term',)}

@admin.register(UserLearningStreak)
class UserLearningStreakAdmin(admin.ModelAdmin):
    list_display = ['user', 'current_streak', 'longest_streak', 'total_lessons_completed']
    search_fields = ['user__username']
    readonly_fields = ['created_at', 'updated_at']
```

---

## DATABASE SETUP

### Step 1: Create Migrations

```bash
python manage.py makemigrations education
```

### Step 2: Apply Migrations

```bash
python manage.py migrate education
```

### Step 3: Verify Tables Created

```bash
python manage.py dbshell

# In SQLite shell:
.tables
# Should see: education_course, education_lesson, education_userprogress, etc.
```

---

## DATA POPULATION

### Option 1: Django Management Command (Recommended)

Create `app/backend/education/management/commands/populate_education.py`:

```python
from django.core.management.base import BaseCommand
from education.models import Course, Lesson, GlossaryTerm
import json

class Command(BaseCommand):
    help = 'Populate education platform with course content and glossary'

    def handle(self, *args, **kwargs):
        # Load course content
        with open('data/course_content.json', 'r') as f:
            course_data = json.load(f)
        
        # Create courses and lessons
        for course_item in course_data['courses']:
            course, created = Course.objects.get_or_create(
                category=course_item['category'],
                defaults={
                    'title': course_item['title'],
                    'slug': course_item['slug'],
                    'description': course_item['description'],
                    'difficulty': course_item['difficulty'],
                    'duration_minutes': course_item['duration_minutes'],
                    'is_premium': course_item.get('is_premium', False),
                    'is_published': True,
                    'order': course_item.get('order', 1)
                }
            )
            
            if created:
                self.stdout.write(f"✓ Created course: {course.title}")
            
            # Create lessons
            for lesson_item in course_item['lessons']:
                lesson, created = Lesson.objects.get_or_create(
                    course=course,
                    slug=lesson_item['slug'],
                    defaults={
                        'title': lesson_item['title'],
                        'content_type': lesson_item['content_type'],
                        'content': lesson_item['content'],
                        'video_url': lesson_item.get('video_url'),
                        'order': lesson_item['order'],
                        'duration_minutes': lesson_item['duration_minutes'],
                        'key_takeaways': lesson_item.get('key_takeaways'),
                        'quiz_questions': lesson_item.get('quiz_questions'),
                        'is_published': True
                    }
                )
                
                if created:
                    self.stdout.write(f"  ✓ Created lesson: {lesson.title}")
        
        # Load glossary terms
        with open('data/glossary_terms.json', 'r') as f:
            glossary_data = json.load(f)
        
        for term_item in glossary_data['glossary_terms']:
            term, created = GlossaryTerm.objects.get_or_create(
                term=term_item['term'],
                defaults={
                    'slug': term_item['slug'],
                    'category': term_item['category'],
                    'definition': term_item['definition'],
                    'example': term_item.get('example', ''),
                    'difficulty': term_item['difficulty']
                }
            )
            
            if created:
                self.stdout.write(f"✓ Created term: {term.term}")
        
        self.stdout.write(self.style.SUCCESS('✅ Education platform populated!'))
```

Run the command:

```bash
python manage.py populate_education
```

### Option 2: Django Admin Interface

1. Login to Django admin: `http://localhost:8000/admin/`
2. Navigate to Education section
3. Manually add courses, lessons, and glossary terms

---

## FRONTEND SETUP

### Step 1: Install Dependencies

```bash
cd app/frontend
npm install react-markdown
```

### Step 2: Copy React Components

```bash
# Create education folder
mkdir -p src/components/education

# Copy all .jsx files to:
src/components/education/
```

### Step 3: Add Routes

Edit `app/frontend/src/App.jsx`:

```javascript
import CourseCatalog from './components/education/CourseCatalog';
import LessonPlayer from './components/education/LessonPlayer';
import Glossary from './components/education/Glossary';
import ProgressDashboard from './components/education/ProgressDashboard';

function App() {
  return (
    <BrowserRouter>
      <Routes>
        {/* ... existing routes */}
        
        {/* Education Routes */}
        <Route path="/learn" element={<CourseCatalog />} />
        <Route path="/learn/:courseSlug" element={<CourseDetail />} />
        <Route path="/learn/lesson/:lessonSlug" element={<LessonPlayer />} />
        <Route path="/glossary" element={<Glossary />} />
        <Route path="/glossary/:termSlug" element={<Glossary />} />
        <Route path="/progress" element={<ProgressDashboard />} />
      </Routes>
    </BrowserRouter>
  );
}
```

### Step 4: Add Navigation Links

Edit your main navigation component:

```javascript
<nav>
  <Link to="/">Home</Link>
  <Link to="/learn">Learn</Link>
  <Link to="/glossary">Glossary</Link>
  <Link to="/progress">My Progress</Link>
</nav>
```

### Step 5: Add Tailwind Animation

Edit `tailwind.config.js`:

```javascript
module.exports = {
  theme: {
    extend: {
      keyframes: {
        fadeIn: {
          '0%': { opacity: '0', transform: 'translateY(-4px)' },
          '100%': { opacity: '1', transform: 'translateY(0)' }
        }
      },
      animation: {
        fadeIn: 'fadeIn 0.15s ease-out'
      }
    }
  }
}
```

---

## TESTING

### Backend API Tests

```bash
# Test courses endpoint
curl http://localhost:8000/api/education/courses/

# Test lessons endpoint
curl http://localhost:8000/api/education/lessons/

# Test glossary endpoint
curl http://localhost:8000/api/education/glossary/
```

### Frontend Tests

1. Navigate to `/learn` - Should see course catalog
2. Click a course - Should see course details
3. Start a lesson - Should see lesson player
4. Complete quiz - Should see score
5. Check `/progress` - Should see stats updated
6. Hover over glossary terms - Should see tooltips
7. Visit `/glossary` - Should see A-Z directory

---

## DEPLOYMENT CHECKLIST

### Pre-Deployment

- [ ] All migrations applied
- [ ] Course content populated
- [ ] Glossary terms populated (min 50)
- [ ] Admin interface configured
- [ ] API endpoints tested
- [ ] Frontend routes working
- [ ] Authentication working
- [ ] Progress tracking working

### Performance

- [ ] Database indexes added (user, lesson, course fields)
- [ ] API responses cached where appropriate
- [ ] Frontend code splitting enabled
- [ ] Images optimized
- [ ] Video URLs validated

### Security

- [ ] Authentication required for progress endpoints
- [ ] CORS configured properly
- [ ] Rate limiting on quiz submissions
- [ ] XSS protection on user-generated content
- [ ] SQL injection protection (Django ORM handles this)

---

## API ENDPOINTS REFERENCE

### Courses
```
GET    /api/education/courses/
GET    /api/education/courses/{slug}/
GET    /api/education/courses/my-courses/
POST   /api/education/courses/{slug}/enroll/
```

### Lessons
```
GET    /api/education/lessons/
GET    /api/education/lessons/{slug}/
POST   /api/education/lessons/{slug}/start/
POST   /api/education/lessons/{slug}/complete/
POST   /api/education/lessons/{slug}/submit-quiz/
PATCH  /api/education/lessons/{slug}/update-progress/
```

### Glossary
```
GET    /api/education/glossary/
GET    /api/education/glossary/{slug}/
GET    /api/education/glossary/by-category/
POST   /api/education/glossary/{slug}/track-view/
POST   /api/education/glossary/{slug}/track-tooltip/
```

### User Stats
```
GET    /api/education/user-stats/overview/
GET    /api/education/user-stats/streak/
GET    /api/education/user-stats/certificates/
GET    /api/education/user-stats/progress/
```

---

## NEXT STEPS

After Phase 7 is complete:

1. **Phase 6**: Implement strategy ranking system
2. **Phase 8**: Add social and viral features
3. **Phase 9**: Build retention features (custom indicators, journal)
4. **Phase 10**: Apply final UI/UX polish and rebrand

---

## TROUBLESHOOTING

### Common Issues

**Issue:** Migrations fail  
**Solution:** Delete migration files and rerun `makemigrations`

**Issue:** Courses not showing  
**Solution:** Check `is_published=True` in database

**Issue:** Tooltips not appearing  
**Solution:** Verify glossary terms populated and Tailwind animations configured

**Issue:** Progress not saving  
**Solution:** Check authentication middleware and user session

**Issue:** Videos not loading  
**Solution:** Verify video URLs are valid embed links (YouTube/Vimeo)

---

## SUPPORT

For implementation questions or issues:
- Review Django logs: `tail -f app/backend/logs/django.log`
- Review React console: Browser DevTools > Console
- Check network tab for API errors
- Verify database entries via Django admin

---

**Implementation Status:** Ready for Development  
**Estimated LOC:** ~5,000 lines (Backend + Frontend)  
**Dependencies:** Django, DRF, React, Tailwind, react-markdown

Last Updated: December 2024
