"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[198],{7198:(e,s,t)=>{t.r(s),t.d(s,{default:()=>z});var a=t(5043),l=t(1140),r=t(5949),c=t(3390),n=(t(4158),t(5352)),i=t(3062),o=t(4919),d=t(3033),x=t(3165),m=t(7033),h=t(3782),u=t(5692),j=t(5087),f=t(9233),g=t(642),v=t(830),p=t(579);const N=e=>{let{dataType:s="total",color:t="#2563eb",width:l=60,height:r=20,className:c=""}=e;const[n,i]=(0,a.useState)([]),[o,d]=(0,a.useState)(!0);(0,a.useEffect)(()=>{x();const e=setInterval(x,3e5);return()=>clearInterval(e)},[s]);const x=async()=>{try{const[e,t]=await Promise.all([(0,v.TK)(),(0,v.p7)()]);let a=[];if(t.success&&t.data){const e="historical_".concat(s);t.data[e]&&Array.isArray(t.data[e])&&(a=t.data[e])}if(0===a.length){const l=m(s,e,t);a=u(l,s)}i(a)}catch(e){console.error("Sparkline data fetch error:",e);const t=h(s);i(u(t,s))}finally{d(!1)}},m=(e,s,t)=>{var a;if(t.success&&null!==(a=t.data)&&void 0!==a&&a.market_overview){const s=t.data.market_overview;switch(e){case"gainers":return s.gainers||800;case"losers":return s.losers||600;case"total":return s.total_stocks||7e3;default:return 1e3}}return h(e)},h=e=>{switch(e){case"gainers":return 850;case"losers":return 650;case"total":return 7e3;default:return 1e3}},u=(e,s)=>{const t=[];for(let a=0;a<20;a++){let l,r;switch(s){case"gainers":l=.15*e,r=Math.sin(a/4)*l*.3;break;case"losers":l=.12*e,r=-Math.sin(a/4)*l*.25;break;case"total":l=.002*e,r=Math.sin(a/8)*l;break;default:l=.05*e,r=0}const c=(Math.random()-.5)*l,n=Math.max(0,e+r+c);t.push(n)}return t};if(o)return(0,p.jsx)("div",{className:"flex items-center justify-center ".concat(c),style:{width:l,height:r},children:(0,p.jsx)("div",{className:"w-2 h-2 bg-gray-300 rounded-full animate-pulse"})});if(0===n.length)return(0,p.jsx)("div",{className:"flex items-center justify-center ".concat(c),style:{width:l,height:r},children:(0,p.jsx)("div",{className:"w-full h-px bg-gray-300"})});const j=((e,s,t)=>{if(!e||0===e.length)return"";const a=Math.min(...e),l=Math.max(...e)-a||1,r=e.map((r,c)=>{const n=c/(e.length-1)*s,i=t-(r-a)/l*t;return"".concat(n,",").concat(i)});return"M ".concat(r.join(" L "))})(n,l,r);return(0,p.jsx)("div",{className:c,children:(0,p.jsxs)("svg",{width:l,height:r,className:"overflow-visible",children:[(0,p.jsx)("path",{d:j,stroke:t,strokeWidth:"1.5",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",opacity:"0.8"}),(0,p.jsx)("defs",{children:(0,p.jsxs)("linearGradient",{id:"gradient-".concat(s),x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:[(0,p.jsx)("stop",{offset:"0%",stopColor:t,stopOpacity:"0.2"}),(0,p.jsx)("stop",{offset:"100%",stopColor:t,stopOpacity:"0.05"})]})}),(0,p.jsx)("path",{d:"".concat(j," L ").concat(l,",").concat(r," L 0,").concat(r," Z"),fill:"url(#gradient-".concat(s,")")})]})})};t(1120);var y=t(1623),w=t(2555),b=t(1311);function _(e){let{userId:s,className:t}=e;const[r,n]=a.useState(()=>function(e){try{const s=localStorage.getItem("onboarding-checklist-v2:".concat(e));return s?JSON.parse(s):{ran_screener:!1,saved_watchlist:!1,created_alert:!1}}catch(s){return{ran_screener:!1,saved_watchlist:!1,created_alert:!1}}}(s||"anon"));a.useEffect(()=>{!function(e,s){try{localStorage.setItem("onboarding-checklist-v2:".concat(e),JSON.stringify(s))}catch(t){}}(s||"anon",r)},[s,r]);const i=e=>n(s=>(0,w.A)((0,w.A)({},s),{},{[e]:!s[e]})),o=Object.values(r).filter(Boolean).length;return(0,p.jsxs)(l.Zp,{className:t,children:[(0,p.jsxs)(l.aR,{children:[(0,p.jsx)(l.ZB,{children:"Getting Started"}),(0,p.jsxs)(l.BT,{children:[o," of ",3," completed"]})]}),(0,p.jsxs)(l.Wu,{className:"space-y-3",children:[(0,p.jsxs)("label",{className:"flex items-center gap-2",children:[(0,p.jsx)(b.S,{checked:r.ran_screener,onCheckedChange:()=>i("ran_screener")}),(0,p.jsx)("span",{children:"Run your first screener"})]}),(0,p.jsxs)("label",{className:"flex items-center gap-2",children:[(0,p.jsx)(b.S,{checked:r.saved_watchlist,onCheckedChange:()=>i("saved_watchlist")}),(0,p.jsx)("span",{children:"Save a stock to a watchlist"})]}),(0,p.jsxs)("label",{className:"flex items-center gap-2",children:[(0,p.jsx)(b.S,{checked:r.created_alert,onCheckedChange:()=>i("created_alert")}),(0,p.jsx)("span",{children:"Create a price alert"})]}),(0,p.jsx)(c.$,{variant:"outline",size:"sm",onClick:()=>n({ran_screener:!1,saved_watchlist:!1,created_alert:!1}),children:"Reset"})]})]})}var k=t(3986),S=t(4259),A=t(5046),C=t(9766);const Z=["className"],T=["withHandle","className"],B=e=>{let{className:s}=e,t=(0,k.A)(e,Z);return(0,p.jsx)(A.YZ,(0,w.A)({className:(0,C.cn)("flex h-full w-full data-[panel-group-direction=vertical]:flex-col",s)},t))},L=A.Zk,W=e=>{let{withHandle:s,className:t}=e,a=(0,k.A)(e,T);return(0,p.jsx)(A.TW,(0,w.A)((0,w.A)({className:(0,C.cn)("relative flex w-px items-center justify-center bg-border after:absolute after:inset-y-0 after:left-1/2 after:w-1 after:-translate-x-1/2 focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring focus-visible:ring-offset-1 data-[panel-group-direction=vertical]:h-px data-[panel-group-direction=vertical]:w-full data-[panel-group-direction=vertical]:after:left-0 data-[panel-group-direction=vertical]:after:h-1 data-[panel-group-direction=vertical]:after:w-full data-[panel-group-direction=vertical]:after:-translate-y-1/2 data-[panel-group-direction=vertical]:after:translate-x-0 [&[data-panel-group-direction=vertical]>div]:rotate-90",t)},a),{},{children:s&&(0,p.jsx)("div",{className:"z-10 flex h-4 w-3 items-center justify-center rounded-sm border bg-border",children:(0,p.jsx)(S.A,{className:"h-2.5 w-2.5"})})}))};var M=t(4894);const R=["hamzashehata3000@gmail.com"],z=()=>{var e,s,t,w,b,k,S,A,C,Z;const{isAuthenticated:T,user:z}=(0,g.A)(),[I,D]=(0,a.useState)(null),[$,E]=(0,a.useState)(null),[O,H]=(0,a.useState)(null),[P,G]=(0,a.useState)([]),[F,J]=(0,a.useState)([]),[U,K]=(0,a.useState)(!0),[V,Y]=(0,a.useState)(null),[Q,X]=(0,a.useState)({gainers:[],losers:[],total:[]}),[q,ee]=(0,a.useState)(()=>{try{const e=localStorage.getItem("onboarding-checklist-v1");return e?JSON.parse(e):{run:!1,save:!1,alert:!1}}catch(e){return{run:!1,save:!1,alert:!1}}}),se=!(null===z||void 0===z||!z.email||!R.includes(z.email.toLowerCase()));(0,a.useEffect)(()=>{(async()=>{K(!0);try{var e,s,t;const[r,c,n,i,o,d]=await Promise.all([(0,v.p7)(),(0,v.TK)(),(0,v.D5)().catch(()=>({success:!1})),(0,v.Do)().catch(()=>null),(0,v.Hp)().catch(()=>[]),(0,v.P3)().catch(()=>[])]);let x=null===r||void 0===r?void 0:r.data;if(!x)try{const e=await fetch("".concat(v.Sw,"/market-stats/"),{credentials:"include"}),s=await e.json();x=(0,v.DC)(s)}catch(a){}let m=null===c||void 0===c?void 0:c.data;if(!m)try{const e=await fetch("".concat(v.Sw,"/trending/"),{credentials:"include"}),s=await e.json();m=(0,v.Xb)(s)}catch(l){}D(x||null),E(m||null),Y((null===n||void 0===n?void 0:n.data)||null),H(i),G((null===o||void 0===o?void 0:o.slice(0,5))||[]),J((null===d||void 0===d?void 0:d.slice(0,6))||[]);const h=(null===r||void 0===r||null===(e=r.data)||void 0===e?void 0:e.historical_gainers)||te(800,900),u=(null===r||void 0===r||null===(s=r.data)||void 0===s?void 0:s.historical_losers)||te(600,700),j=(null===r||void 0===r||null===(t=r.data)||void 0===t?void 0:t.historical_total)||te(10400,10600);X({gainers:h,losers:u,total:j})}catch(r){console.error("Failed to fetch dashboard data:",r)}finally{K(!1)}})()},[T]),(0,a.useEffect)(()=>{try{localStorage.setItem("onboarding-checklist-v1",JSON.stringify(q))}catch(e){}},[q]);const te=(e,s)=>Array.from({length:20},(t,a)=>{const l=(Math.random()-.5)*(s-e)*.1;return Math.max(e,Math.min(s,e+l+20*Math.sin(a/3)))}),ae=e=>e?new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:2}).format(e):"$0.00",le=e=>e?"".concat(e>0?"+":"").concat(e.toFixed(2),"%"):"0.00%";return(0,p.jsx)("div",{className:"min-h-screen bg-gray-50 p-4 sm:p-6",children:(0,p.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(null===z||void 0===z?void 0:z.id)&&(0,p.jsx)("div",{className:"mb-6",children:(0,p.jsx)(_,{userId:z.id})}),(0,p.jsxs)("div",{className:"mb-6 sm:mb-8",children:[(0,p.jsxs)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:["Welcome back, ",(null===z||void 0===z?void 0:z.name)||"Trader","!"]}),(0,p.jsx)("p",{className:"text-gray-600",children:"Here's your comprehensive trading dashboard"}),(0,p.jsxs)("div",{className:"flex items-center gap-4 mt-3",children:[(0,p.jsxs)(r.E,{variant:"secondary",className:"text-sm",children:[null===(e=(null===z||void 0===z?void 0:z.plan)||("carter.kiefer2010@outlook.com"===(null===z||void 0===z||null===(t=z.email)||void 0===t?void 0:t.toLowerCase())?"gold":"free"))||void 0===e||null===(s=e.toString())||void 0===s?void 0:s.replace(/^[a-z]/,e=>e.toUpperCase())," Plan"]}),(0,p.jsx)(y.A,{}),(null===I||void 0===I?void 0:I.last_updated)&&(0,p.jsxs)("span",{className:"text-xs text-gray-500",children:["Data as of ",new Date(I.last_updated).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),null!==(w=marketResponse)&&void 0!==w&&w.cached?" (cached)":""]})]})]}),O&&(0,p.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 sm:gap-6 mb-6 sm:mb-8",children:[(0,p.jsxs)(l.Zp,{className:"bg-gradient-to-r from-blue-50 to-blue-100",children:[(0,p.jsxs)(l.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,p.jsx)(l.ZB,{className:"text-sm font-medium",children:"Portfolio Value"}),(0,p.jsx)(i.A,{className:"h-4 w-4 text-blue-600"})]}),(0,p.jsxs)(l.Wu,{children:[(0,p.jsx)("div",{className:"text-2xl font-bold",children:ae(O.total_value)}),(0,p.jsxs)("div",{className:"flex items-center gap-2 text-xs",children:[(0,p.jsx)("span",{className:"text-muted-foreground",children:"Today:"}),(0,p.jsxs)("span",{className:"font-medium ".concat(O.day_change>=0?"text-green-600":"text-red-600"),children:[ae(O.day_change)," (",le(O.day_change_percent),")"]})]})]})]}),(0,p.jsxs)(l.Zp,{className:"bg-gradient-to-r from-green-50 to-green-100",children:[(0,p.jsxs)(l.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,p.jsx)(l.ZB,{className:"text-sm font-medium",children:"Total Gain/Loss"}),(0,p.jsx)(o.A,{className:"h-4 w-4 text-green-600"})]}),(0,p.jsxs)(l.Wu,{children:[(0,p.jsx)("div",{className:"text-2xl font-bold ".concat(O.total_gain_loss>=0?"text-green-600":"text-red-600"),children:ae(O.total_gain_loss)}),(0,p.jsxs)("p",{className:"text-xs text-muted-foreground",children:[le(O.total_gain_loss_percent)," all time"]})]})]}),(0,p.jsxs)(l.Zp,{className:"bg-gradient-to-r from-purple-50 to-purple-100",children:[(0,p.jsxs)(l.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,p.jsx)(l.ZB,{className:"text-sm font-medium",children:"Holdings"}),(0,p.jsx)(d.A,{className:"h-4 w-4 text-purple-600"})]}),(0,p.jsxs)(l.Wu,{children:[(0,p.jsx)("div",{className:"text-2xl font-bold",children:O.holdings_count||0}),(0,p.jsx)("p",{className:"text-xs text-muted-foreground",children:"Stocks in portfolio"})]})]}),(0,p.jsxs)(l.Zp,{className:"bg-gradient-to-r from-orange-50 to-orange-100",children:[(0,p.jsxs)(l.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,p.jsx)(l.ZB,{className:"text-sm font-medium",children:"Dividend Income"}),(0,p.jsx)(x.A,{className:"h-4 w-4 text-orange-600"})]}),(0,p.jsxs)(l.Wu,{children:[(0,p.jsx)("div",{className:"text-2xl font-bold",children:ae(O.dividend_income||0)}),(0,p.jsx)("p",{className:"text-xs text-muted-foreground",children:"This year"})]})]})]}),(0,p.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 sm:gap-6 mb-6 sm:mb-8",children:[(0,p.jsxs)(l.Zp,{children:[(0,p.jsxs)(l.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,p.jsx)(l.ZB,{className:"text-sm font-medium",children:"Total Stocks"}),(0,p.jsx)(m.A,{className:"h-4 w-4 text-muted-foreground"})]}),(0,p.jsxs)(l.Wu,{children:[(0,p.jsx)("div",{className:"text-2xl font-bold",children:(null===I||void 0===I||null===(b=I.market_overview)||void 0===b||null===(k=b.total_stocks)||void 0===k?void 0:k.toLocaleString())||"10,500+"}),(0,p.jsx)("p",{className:"text-xs text-muted-foreground",children:"NYSE listings covered"}),(0,p.jsx)("div",{className:"mt-3",children:(0,p.jsx)(N,{dataType:"total",color:"#2563eb",width:60,height:20})})]})]}),(0,p.jsxs)(l.Zp,{children:[(0,p.jsxs)(l.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,p.jsx)(l.ZB,{className:"text-sm font-medium",children:"Gainers"}),(0,p.jsx)(o.A,{className:"h-4 w-4 text-green-600"})]}),(0,p.jsxs)(l.Wu,{children:[(0,p.jsx)("div",{className:"text-2xl font-bold text-green-600",children:(null===I||void 0===I||null===(S=I.market_overview)||void 0===S||null===(A=S.gainers)||void 0===A?void 0:A.toLocaleString())||"-"}),(0,p.jsx)("div",{className:"flex items-center gap-2 text-xs",children:(0,p.jsx)("span",{className:"text-muted-foreground",children:"Stocks up today"})}),(0,p.jsx)("div",{className:"mt-3",children:(0,p.jsx)(N,{dataType:"gainers",color:"#16a34a",width:60,height:20})})]})]}),(0,p.jsxs)(l.Zp,{children:[(0,p.jsxs)(l.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,p.jsx)(l.ZB,{className:"text-sm font-medium",children:"Losers"}),(0,p.jsx)(h.A,{className:"h-4 w-4 text-red-600"})]}),(0,p.jsxs)(l.Wu,{children:[(0,p.jsx)("div",{className:"text-2xl font-bold text-red-600",children:(null===I||void 0===I||null===(C=I.market_overview)||void 0===C||null===(Z=C.losers)||void 0===Z?void 0:Z.toLocaleString())||"-"}),(0,p.jsx)("div",{className:"flex items-center gap-2 text-xs",children:(0,p.jsx)("span",{className:"text-muted-foreground",children:"Stocks down today"})}),(0,p.jsx)("div",{className:"mt-3",children:(0,p.jsx)(N,{dataType:"losers",color:"#dc2626",width:60,height:20})})]})]})]}),(0,p.jsxs)(B,{direction:"horizontal",className:"h-full",children:[(0,p.jsx)(L,{defaultSize:66,minSize:40,children:(0,p.jsxs)(l.Zp,{children:[(0,p.jsxs)(l.aR,{className:"flex flex-row items-center justify-between",children:[(0,p.jsxs)("div",{children:[(0,p.jsx)(l.ZB,{children:"Top Gainers Today"}),(0,p.jsx)(l.BT,{children:"Best performing stocks from live market data"})]}),(0,p.jsx)(c.$,{asChild:!0,variant:"outline",size:"sm",children:(0,p.jsxs)(n.N_,{to:"/app/markets",children:["View All ",(0,p.jsx)(u.A,{className:"h-4 w-4 ml-1"})]})})]}),(0,p.jsx)(l.Wu,{children:null!==$&&void 0!==$&&$.top_gainers?(0,p.jsx)("div",{className:"space-y-4",children:$.top_gainers.slice(0,5).map((e,s)=>(0,p.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors",children:[(0,p.jsxs)("div",{className:"flex-1",children:[(0,p.jsx)("div",{className:"font-semibold",children:e.ticker}),(0,p.jsx)("div",{className:"text-sm text-gray-600",children:e.name||"Company Name"}),(0,p.jsx)("div",{className:"text-sm text-gray-800 font-medium",children:ae(e.current_price)})]}),(0,p.jsxs)("div",{className:"text-right",children:[(0,p.jsx)(r.E,{variant:"secondary",className:"bg-green-100 text-green-800 mb-1",children:le(e.change_percent)}),(0,p.jsx)("div",{className:"text-xs text-gray-600",children:ae(e.price_change_today)})]})]},s))}):(0,p.jsx)("div",{className:"flex items-center justify-center py-8 text-gray-500",children:"Loading market data..."})})]})}),(0,p.jsx)(W,{withHandle:!0}),(0,p.jsx)(L,{defaultSize:34,minSize:26,children:(0,p.jsxs)(l.Zp,{children:[(0,p.jsxs)(l.aR,{children:[(0,p.jsx)(l.ZB,{children:"Quick Actions"}),(0,p.jsx)(l.BT,{children:"Access your most-used tools"})]}),(0,p.jsxs)(l.Wu,{className:"space-y-3",children:[(0,p.jsx)(c.$,{asChild:!0,variant:"outline",className:"w-full justify-start",children:(0,p.jsxs)(n.N_,{to:"/app/stocks",children:[(0,p.jsx)(m.A,{className:"h-4 w-4 mr-2"}),"Stock Scanner"]})}),(0,p.jsx)(c.$,{asChild:!0,variant:"outline",className:"w-full justify-start",children:(0,p.jsxs)(n.N_,{to:"/app/screeners",children:[(0,p.jsx)(x.A,{className:"h-4 w-4 mr-2"}),"My Screeners"]})}),(0,p.jsx)(c.$,{asChild:!0,variant:"outline",className:"w-full justify-start",children:(0,p.jsxs)(n.N_,{to:"/app/watchlists",children:[(0,p.jsx)(j.A,{className:"h-4 w-4 mr-2"}),"Watchlists"]})}),(0,p.jsx)(c.$,{asChild:!0,variant:"outline",className:"w-full justify-start",children:(0,p.jsxs)(n.N_,{to:"/app/portfolio",children:[(0,p.jsx)(i.A,{className:"h-4 w-4 mr-2"}),"Portfolio"]})}),(0,p.jsx)(c.$,{asChild:!0,variant:"outline",className:"w-full justify-start",children:(0,p.jsxs)(n.N_,{to:"/app/alerts",children:[(0,p.jsx)(f.A,{className:"h-4 w-4 mr-2"}),"Alerts"]})})]})]})})]}),(0,p.jsx)("div",{className:"grid grid-cols-1 lg:grid-cols-1 gap-4 sm:gap-6 mt-4 sm:mt-6",children:(0,p.jsx)("div",{children:(0,p.jsx)(y.A,{})})}),se&&(0,p.jsx)("div",{className:"mt-8",children:(0,p.jsx)(M.A,{user:z})})]})})}}}]);
//# sourceMappingURL=198.9d233d1a.chunk.js.map