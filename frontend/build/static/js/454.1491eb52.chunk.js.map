{"version":3,"file":"static/js/454.1491eb52.chunk.js","mappings":"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","sources":["components/LightweightPriceChart.jsx","lib/indicatorsWorkerClient.js","components/StockNewsIntegration.jsx","pages/app/StockDetail.jsx"],"sourcesContent":["import React, { useEffect, useRef, useMemo } from 'react';\r\nimport { createChart } from 'lightweight-charts';\r\n\r\nfunction normalizeSeries(data) {\r\n  // Accepts array of {timestamp|time, open, high, low, close, volume, price}\r\n  // Returns candle series data when OHLC exists; else area series from price/close\r\n  if (!Array.isArray(data)) return { candles: [], area: [] };\r\n  const hasOhlc = data.some(d => d.open != null && d.high != null && d.low != null && d.close != null);\r\n  if (hasOhlc) {\r\n    const candles = data.map(d => ({\r\n      time: toChartTime(d.timestamp ?? d.time),\r\n      open: Number(d.open),\r\n      high: Number(d.high),\r\n      low: Number(d.low),\r\n      close: Number(d.close),\r\n    })).filter(v => Number.isFinite(v.open) && Number.isFinite(v.close));\r\n    return { candles, area: [] };\r\n  }\r\n  const area = data.map(d => ({\r\n    time: toChartTime(d.timestamp ?? d.time),\r\n    value: Number(d.price ?? d.close),\r\n  })).filter(v => Number.isFinite(v.value));\r\n  return { candles: [], area };\r\n}\r\n\r\nfunction toChartTime(ts) {\r\n  if (!ts) return undefined;\r\n  if (typeof ts === 'number') return Math.floor(ts / 1000);\r\n  const d = new Date(ts);\r\n  if (Number.isNaN(d.getTime())) return undefined;\r\n  return Math.floor(d.getTime() / 1000);\r\n}\r\n\r\nexport default function LightweightPriceChart({\r\n  data,\r\n  height = 420,\r\n  theme = 'light',\r\n  overlays = [], // optional array of overlay series: {name, values:[{time,value}], color}\r\n  onReady,\r\n  ariaLabel = 'Interactive price chart',\r\n}) {\r\n  const containerRef = useRef(null);\r\n  const chartRef = useRef(null);\r\n  const mainSeriesRef = useRef(null);\r\n  const overlaySeriesRefs = useRef([]);\r\n\r\n  const seriesData = useMemo(() => normalizeSeries(data || []), [data]);\r\n\r\n  useEffect(() => {\r\n    if (!containerRef.current) return;\r\n    const el = containerRef.current;\r\n    const chart = createChart(el, {\r\n      height,\r\n      autoSize: true,\r\n      layout: theme === 'dark' ? { background: { color: 'rgba(17,24,39,1)' }, textColor: '#e5e7eb' } : { background: { color: 'white' }, textColor: '#111827' },\r\n      grid: {\r\n        vertLines: { color: theme === 'dark' ? 'rgba(55,65,81,0.3)' : 'rgba(229,231,235,0.7)' },\r\n        horzLines: { color: theme === 'dark' ? 'rgba(55,65,81,0.3)' : 'rgba(229,231,235,0.7)' },\r\n      },\r\n      rightPriceScale: { borderColor: theme === 'dark' ? '#374151' : '#e5e7eb' },\r\n      timeScale: { borderColor: theme === 'dark' ? '#374151' : '#e5e7eb' },\r\n      crosshair: { mode: 1 },\r\n    });\r\n    chartRef.current = chart;\r\n\r\n    // Main series\r\n    let mainSeries;\r\n    if (seriesData.candles.length) {\r\n      mainSeries = chart.addCandlestickSeries({ upColor: '#16a34a', downColor: '#dc2626', borderVisible: false, wickUpColor: '#16a34a', wickDownColor: '#dc2626' });\r\n      mainSeries.setData(seriesData.candles);\r\n    } else {\r\n      mainSeries = chart.addAreaSeries({ lineColor: '#2563eb', topColor: 'rgba(37,99,235,0.25)', bottomColor: 'rgba(37,99,235,0.01)', lineWidth: 2 });\r\n      mainSeries.setData(seriesData.area);\r\n    }\r\n    mainSeriesRef.current = mainSeries;\r\n\r\n    // Overlays\r\n    overlaySeriesRefs.current = (overlays || []).map(({ values, color = '#3b82f6', lineWidth = 1.5 }) => {\r\n      const s = chart.addLineSeries({ color, lineWidth, priceLineVisible: false, lastValueVisible: false });\r\n      if (Array.isArray(values)) s.setData(values.map(p => ({ time: toChartTime(p.time), value: Number(p.value) })).filter(v => Number.isFinite(v.value)));\r\n      return s;\r\n    });\r\n\r\n    chart.timeScale().fitContent();\r\n    if (typeof onReady === 'function') onReady({ chart, mainSeries });\r\n\r\n    const ro = new ResizeObserver(() => { try { chart.applyOptions({}); } catch {} });\r\n    ro.observe(el);\r\n    return () => {\r\n      try { ro.disconnect(); } catch {}\r\n      try { overlaySeriesRefs.current.forEach(s => chart.removeSeries(s)); } catch {}\r\n      try { chart.remove(); } catch {}\r\n      chartRef.current = null;\r\n      mainSeriesRef.current = null;\r\n      overlaySeriesRefs.current = [];\r\n    };\r\n  }, [height, theme]);\r\n\r\n  // Update main data when input changes\r\n  useEffect(() => {\r\n    const chart = chartRef.current; const series = mainSeriesRef.current;\r\n    if (!chart || !series) return;\r\n    if (series.setData && seriesData.candles.length) {\r\n      if (series.priceScale && series.seriesType && series.seriesType() !== 'Candlestick') {\r\n        // Recreate as candlestick if type changed\r\n        try { chart.removeSeries(series); } catch {}\r\n        const s = chart.addCandlestickSeries({ upColor: '#16a34a', downColor: '#dc2626', borderVisible: false, wickUpColor: '#16a34a', wickDownColor: '#dc2626' });\r\n        s.setData(seriesData.candles);\r\n        mainSeriesRef.current = s;\r\n      } else {\r\n        series.setData(seriesData.candles);\r\n      }\r\n    } else if (series.setData && seriesData.area.length) {\r\n      if (series.priceScale && series.seriesType && series.seriesType() !== 'Area') {\r\n        try { chart.removeSeries(series); } catch {}\r\n        const s = chart.addAreaSeries({ lineColor: '#2563eb', topColor: 'rgba(37,99,235,0.25)', bottomColor: 'rgba(37,99,235,0.01)', lineWidth: 2 });\r\n        s.setData(seriesData.area);\r\n        mainSeriesRef.current = s;\r\n      } else {\r\n        series.setData(seriesData.area);\r\n      }\r\n    }\r\n    chart.timeScale().fitContent();\r\n  }, [seriesData]);\r\n\r\n  // Update overlays on prop change\r\n  useEffect(() => {\r\n    const chart = chartRef.current;\r\n    if (!chart) return;\r\n    try { overlaySeriesRefs.current.forEach(s => chart.removeSeries(s)); } catch {}\r\n    overlaySeriesRefs.current = (overlays || []).map(({ values, color = '#3b82f6', lineWidth = 1.5 }) => {\r\n      const s = chart.addLineSeries({ color, lineWidth, priceLineVisible: false, lastValueVisible: false });\r\n      if (Array.isArray(values)) s.setData(values.map(p => ({ time: toChartTime(p.time), value: Number(p.value) })).filter(v => Number.isFinite(v.value)));\r\n      return s;\r\n    });\r\n  }, [overlays]);\r\n\r\n  return (\r\n    <div ref={containerRef} className=\"w-full\" style={{ height }} role=\"img\" aria-label={ariaLabel} />\r\n  );\r\n}\r\n","// Simple client for the indicator web worker\r\nlet worker;\r\nlet nextId = 1;\r\nconst pending = new Map();\r\n\r\nfunction ensureWorker() {\r\n  if (worker) return worker;\r\n  try {\r\n    // CRA + craco supports Worker(new URL(..., import.meta.url))\r\n    worker = new Worker(new URL('../workers/indicatorWorker.js', import.meta.url));\r\n  } catch {\r\n    worker = new Worker('/workers/indicatorWorker.js');\r\n  }\r\n  worker.onmessage = (e) => {\r\n    const { id, type, payload, error } = e.data || {};\r\n    const entry = pending.get(id);\r\n    if (!entry) return;\r\n    pending.delete(id);\r\n    if (type === 'result') entry.resolve(payload);\r\n    else entry.reject(new Error(error || 'indicator worker error'));\r\n  };\r\n  worker.onerror = (err) => {\r\n    for (const [, entry] of pending) entry.reject(err);\r\n    pending.clear();\r\n  };\r\n  return worker;\r\n}\r\n\r\nexport function computeIndicatorsInWorker(indicators, series) {\r\n  const id = nextId++;\r\n  const w = ensureWorker();\r\n  return new Promise((resolve, reject) => {\r\n    pending.set(id, { resolve, reject });\r\n    w.postMessage({ id, type: 'compute', payload: { indicators, series } });\r\n  });\r\n}\r\n","import React, { useState, useEffect } from 'react';\r\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from './ui/card';\r\nimport { Badge } from './ui/badge';\r\nimport { Button } from './ui/button';\r\nimport { Alert, AlertDescription } from './ui/alert';\r\nimport { \r\n  ExternalLink, \r\n  Newspaper, \r\n  TrendingUp, \r\n  TrendingDown, \r\n  Clock,\r\n  RefreshCw,\r\n  Filter,\r\n  Search\r\n} from 'lucide-react';\r\nimport { getStockNews, markNewsRead, markNewsClicked } from '../api/client';\r\nimport { Link } from 'react-router-dom';\r\n\r\nconst StockNewsIntegration = ({ symbol, maxItems = 10, showHeader = true }) => {\r\n  const [news, setNews] = useState([]);\r\n  const [isLoading, setIsLoading] = useState(true);\r\n  const [error, setError] = useState(null);\r\n  const [lastUpdated, setLastUpdated] = useState(null);\r\n\r\n  useEffect(() => {\r\n    if (symbol) {\r\n      fetchStockNews();\r\n      // Refresh news every 10 minutes\r\n      const interval = setInterval(fetchStockNews, 10 * 60 * 1000);\r\n      return () => clearInterval(interval);\r\n    }\r\n  }, [symbol, maxItems]);\r\n\r\n  const fetchStockNews = async () => {\r\n    setIsLoading(true);\r\n    setError(null);\r\n    try {\r\n      const response = await getStockNews(symbol);\r\n      if (response.success && response.data?.news_items?.length) {\r\n        setNews(response.data.news_items.slice(0, maxItems));\r\n        setLastUpdated(new Date());\r\n        return;\r\n      }\r\n      // No items and backend will provide Yahoo fallback when available; do not fetch client-side due to CSP\r\n      setNews([]);\r\n    } catch (err) {\r\n      setError(`Failed to load news for ${symbol}`);\r\n      console.error('Stock news error:', err);\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleNewsClick = async (newsItem) => {\r\n    try {\r\n      // Mark news as clicked for analytics (only if ID is numeric from backend DB)\r\n      const numericId = Number(newsItem.id);\r\n      if (Number.isFinite(numericId)) {\r\n        await markNewsClicked(numericId);\r\n      }\r\n      // Open news article\r\n      window.open(newsItem.url, '_blank', 'noopener,noreferrer');\r\n    } catch (err) {\r\n      console.error('Mark news clicked error:', err);\r\n      // Still open the link even if tracking fails\r\n      window.open(newsItem.url, '_blank', 'noopener,noreferrer');\r\n    }\r\n  };\r\n\r\n  const handleMarkAsRead = async (newsId) => {\r\n    try {\r\n      const numericId = Number(newsId);\r\n      if (Number.isFinite(numericId)) {\r\n        await markNewsRead(numericId);\r\n        setNews(prev => prev.map(item => \r\n          item.id === newsId ? { ...item, is_read: true } : item\r\n        ));\r\n      }\r\n    } catch (err) {\r\n      console.error('Mark as read error:', err);\r\n    }\r\n  };\r\n\r\n  const getSentimentColor = (sentimentGrade) => {\r\n    switch (sentimentGrade?.toLowerCase()) {\r\n      case 'positive':\r\n        return 'text-green-600 bg-green-100';\r\n      case 'negative':  \r\n        return 'text-red-600 bg-red-100';\r\n      case 'neutral':\r\n        return 'text-gray-600 bg-gray-100';\r\n      default:\r\n        return 'text-gray-600 bg-gray-100';\r\n    }\r\n  };\r\n\r\n  const getSentimentIcon = (sentimentGrade) => {\r\n    switch (sentimentGrade?.toLowerCase()) {\r\n      case 'positive':\r\n        return <TrendingUp className=\"h-3 w-3\" />;\r\n      case 'negative':\r\n        return <TrendingDown className=\"h-3 w-3\" />;\r\n      default:\r\n        return <Clock className=\"h-3 w-3\" />;\r\n    }\r\n  };\r\n\r\n  const formatTimeAgo = (publishedAt) => {\r\n    if (!publishedAt) return 'Unknown time';\r\n    \r\n    const date = new Date(publishedAt);\r\n    const now = new Date();\r\n    const diffMs = now - date;\r\n    const diffMins = Math.floor(diffMs / (1000 * 60));\r\n    const diffHours = Math.floor(diffMs / (1000 * 60 * 60));\r\n    const diffDays = Math.floor(diffMs / (1000 * 60 * 60 * 24));\r\n\r\n    if (diffMins < 1) return 'Just now';\r\n    if (diffMins < 60) return `${diffMins}m ago`;\r\n    if (diffHours < 24) return `${diffHours}h ago`;\r\n    if (diffDays < 7) return `${diffDays}d ago`;\r\n    \r\n    return date.toLocaleDateString();\r\n  };\r\n\r\n  if (!symbol) {\r\n    return (\r\n      <Card>\r\n        <CardContent className=\"py-8\">\r\n          <div className=\"text-center text-gray-500\">\r\n            <Newspaper className=\"h-8 w-8 mx-auto mb-2 text-gray-400\" />\r\n            <p>Select a stock to view related news</p>\r\n          </div>\r\n        </CardContent>\r\n      </Card>\r\n    );\r\n  }\r\n\r\n  if (isLoading && news.length === 0) {\r\n    return (\r\n      <Card>\r\n        {showHeader && (\r\n          <CardHeader>\r\n            <CardTitle className=\"flex items-center gap-2\">\r\n              <Newspaper className=\"h-5 w-5\" />\r\n              News for {symbol}\r\n            </CardTitle>\r\n            <CardDescription>Latest news and analysis</CardDescription>\r\n          </CardHeader>\r\n        )}\r\n        <CardContent>\r\n          <div className=\"flex items-center justify-center py-8\">\r\n            <div className=\"text-center\">\r\n              <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-4\"></div>\r\n              <p className=\"text-gray-600\">Loading news...</p>\r\n            </div>\r\n          </div>\r\n        </CardContent>\r\n      </Card>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <Card>\r\n      {showHeader && (\r\n        <CardHeader className=\"flex flex-row items-center justify-between\">\r\n          <div>\r\n            <CardTitle className=\"flex items-center gap-2\">\r\n              <Newspaper className=\"h-5 w-5\" />\r\n              News for {symbol}\r\n              {lastUpdated && (\r\n                <Badge variant=\"secondary\" className=\"text-xs\">\r\n                  <Clock className=\"h-3 w-3 mr-1\" />\r\n                  {formatTimeAgo(lastUpdated)}\r\n                </Badge>\r\n              )}\r\n            </CardTitle>\r\n            <CardDescription>Latest news and market sentiment</CardDescription>\r\n          </div>\r\n          <div className=\"flex gap-2\">\r\n            <Button variant=\"ghost\" size=\"sm\" onClick={fetchStockNews} disabled={isLoading}>\r\n              <RefreshCw className={`h-4 w-4 ${isLoading ? 'animate-spin' : ''}`} />\r\n            </Button>\r\n            <Button variant=\"ghost\" size=\"sm\" asChild>\r\n              <Link to=\"/app/news\">\r\n                <Search className=\"h-4 w-4\" />\r\n              </Link>\r\n            </Button>\r\n          </div>\r\n        </CardHeader>\r\n      )}\r\n      \r\n      <CardContent>\r\n        {error && (\r\n          <Alert className=\"mb-4\">\r\n            <AlertDescription>{error}</AlertDescription>\r\n          </Alert>\r\n        )}\r\n\r\n        {news.length > 0 ? (\r\n          <div className=\"space-y-4\">\r\n            {news.map((newsItem, index) => (\r\n              <div \r\n                key={newsItem.id || index} \r\n                className={`p-4 border rounded-lg hover:bg-gray-50 transition-colors cursor-pointer ${\r\n                  newsItem.is_read ? 'opacity-70' : ''\r\n                }`}\r\n                onClick={() => handleNewsClick(newsItem)}\r\n              >\r\n                <div className=\"flex items-start justify-between mb-2\">\r\n                  <div className=\"flex items-center gap-2\">\r\n                    {newsItem.sentiment_grade && (\r\n                      <Badge \r\n                        variant=\"secondary\" \r\n                        className={`text-xs ${getSentimentColor(newsItem.sentiment_grade)}`}\r\n                      >\r\n                        {getSentimentIcon(newsItem.sentiment_grade)}\r\n                        <span className=\"ml-1\">{newsItem.sentiment_grade}</span>\r\n                      </Badge>\r\n                    )}\r\n                    {newsItem.source && (\r\n                      <Badge variant=\"outline\" className=\"text-xs\">\r\n                        {newsItem.source}\r\n                      </Badge>\r\n                    )}\r\n                  </div>\r\n                  <div className=\"flex items-center gap-2\">\r\n                    <span className=\"text-xs text-gray-500\">\r\n                      {formatTimeAgo(newsItem.published_at)}\r\n                    </span>\r\n                    <ExternalLink className=\"h-3 w-3 text-gray-400\" />\r\n                  </div>\r\n                </div>\r\n                \r\n                <h4 className=\"font-semibold text-gray-900 mb-2 line-clamp-2\">\r\n                  {newsItem.title}\r\n                </h4>\r\n                \r\n                {newsItem.content && (\r\n                  <p className=\"text-sm text-gray-600 line-clamp-3 mb-2\">\r\n                    {newsItem.content}\r\n                  </p>\r\n                )}\r\n\r\n                {newsItem.sentiment_score !== null && newsItem.sentiment_score !== undefined && (\r\n                  <div className=\"flex items-center gap-2 text-xs text-gray-500\">\r\n                    <span>Sentiment Score:</span>\r\n                    <span className={`font-medium ${\r\n                      newsItem.sentiment_score > 0 ? 'text-green-600' : \r\n                      newsItem.sentiment_score < 0 ? 'text-red-600' : 'text-gray-600'\r\n                    }`}>\r\n                      {newsItem.sentiment_score > 0 ? '+' : ''}{newsItem.sentiment_score.toFixed(2)}\r\n                    </span>\r\n                  </div>\r\n                )}\r\n\r\n                {!newsItem.is_read && (\r\n                  <div className=\"mt-2\">\r\n                    <Button \r\n                      variant=\"ghost\" \r\n                      size=\"sm\" \r\n                      onClick={(e) => {\r\n                        e.stopPropagation();\r\n                        handleMarkAsRead(newsItem.id);\r\n                      }}\r\n                    >\r\n                      Mark as Read\r\n                    </Button>\r\n                  </div>\r\n                )}\r\n              </div>\r\n            ))}\r\n          </div>\r\n        ) : (\r\n          <div className=\"flex items-center justify-center py-8 text-gray-500\">\r\n            <div className=\"text-center\">\r\n              <Newspaper className=\"h-8 w-8 mx-auto mb-2 text-gray-400\" />\r\n              <p>No news available for {symbol}</p>\r\n              <p className=\"text-sm\">Check back later for updates</p>\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {news.length >= maxItems && (\r\n          <div className=\"mt-4 text-center\">\r\n            <Button variant=\"outline\" size=\"sm\" asChild>\r\n              <Link to={`/app/news?symbol=${symbol}`}>\r\n                View All News for {symbol}\r\n                <ExternalLink className=\"h-4 w-4 ml-1\" />\r\n              </Link>\r\n            </Button>\r\n          </div>\r\n        )}\r\n      </CardContent>\r\n    </Card>\r\n  );\r\n};\r\n\r\nexport default StockNewsIntegration;","import React, { useState, useEffect } from \"react\";\r\nimport SEO from \"../../components/SEO\";\r\nimport { useParams, Link } from \"react-router-dom\";\r\nimport { Button } from \"../../components/ui/button\";\r\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"../../components/ui/card\";\r\nimport { Badge } from \"../../components/ui/badge\";\r\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from \"../../components/ui/tabs\";\r\nimport {\r\n  LineChart,\r\n  Line,\r\n  XAxis,\r\n  YAxis,\r\n  Tooltip,\r\n  ResponsiveContainer,\r\n  CartesianGrid,\r\n  Area,\r\n  AreaChart\r\n} from \"recharts\";\r\nimport { Skeleton } from \"../../components/ui/skeleton\";\r\nimport { Alert, AlertDescription } from \"../../components/ui/alert\";\r\nimport { toast } from \"sonner\";\r\nimport { \r\n  ArrowLeft,\r\n  TrendingUp, \r\n  TrendingDown,\r\n  Star,\r\n  Bell,\r\n  Plus,\r\n  BarChart3,\r\n  Activity,\r\n  DollarSign,\r\n  Volume2,\r\n  Target,\r\n  Calendar,\r\n  Building,\r\n  Users,\r\n  AlertTriangle,\r\n  ExternalLink\r\n} from \"lucide-react\";\r\nimport { getStock, getRealTimeQuote, addWatchlist, createAlert, getInsiderTrades } from \"../../api/client\";\r\nimport { isMissing, formatCurrencySafe, formatNumberSafe } from \"../../lib/utils\";\r\nimport LightweightPriceChart from \"../../components/LightweightPriceChart\";\r\nimport { computeIndicatorsInWorker } from \"../../lib/indicatorsWorkerClient\";\r\nimport StockNewsIntegration from \"../../components/StockNewsIntegration\";\r\n\r\nconst StockDetail = () => {\r\n  const { symbol } = useParams();\r\n  const [isLoading, setIsLoading] = useState(true);\r\n  const [stockData, setStockData] = useState(null);\r\n  const [realtimeData, setRealtimeData] = useState(null);\r\n  const [activeTab, setActiveTab] = useState(\"overview\");\r\n  const [chartData, setChartData] = useState([]);\r\n  const [isChartLoading, setIsChartLoading] = useState(false);\r\n  const [overlays, setOverlays] = useState([]);\r\n  const [newsItems, setNewsItems] = useState([]);\r\n  const [insiders, setInsiders] = useState({ loading: true, data: null, error: null });\r\n\r\n  useEffect(() => {\r\n    const fetchStockData = async () => {\r\n      if (!symbol) return;\r\n      \r\n      try {\r\n        const [stockResponse, realtimeResponse] = await Promise.all([\r\n          getStock(symbol).catch(() => null),\r\n          getRealTimeQuote(symbol).catch(() => null)\r\n        ]);\r\n\r\n        if (stockResponse?.success) {\r\n          setStockData(stockResponse.data);\r\n        } else if (stockResponse?.data) {\r\n          setStockData(stockResponse.data);\r\n        } else {\r\n          setStockData(null);\r\n        }\r\n\r\n        if (realtimeResponse?.success) {\r\n          setRealtimeData(realtimeResponse.data);\r\n        } else if (realtimeResponse?.data) {\r\n          setRealtimeData(realtimeResponse.data);\r\n        } else if (realtimeResponse) {\r\n          setRealtimeData(realtimeResponse);\r\n        }\r\n      } catch (error) {\r\n        toast.error(\"Failed to load stock data\");\r\n      } finally {\r\n        setIsLoading(false);\r\n      }\r\n    };\r\n\r\n    fetchStockData();\r\n\r\n    // Disable direct Yahoo Finance fetch to avoid CORS; rely on chart component fallbacks\r\n    const loadChart = async () => {\r\n      try {\r\n        setIsChartLoading(true);\r\n        const prices = (stockResponse?.data?.recent_prices || []).map(d => ({\r\n          time: d.timestamp || d.time,\r\n          open: d.open,\r\n          high: d.high,\r\n          low: d.low,\r\n          close: d.close ?? d.price,\r\n          volume: d.volume,\r\n        }));\r\n        setChartData(prices);\r\n        // Compute lightweight overlays in worker for performance\r\n        const closes = prices.map(p => Number(p.close ?? 0));\r\n        const highs = prices.map(p => Number(p.high ?? p.close ?? 0));\r\n        const lows = prices.map(p => Number(p.low ?? p.close ?? 0));\r\n        const volumes = prices.map(p => Number(p.volume ?? 0));\r\n        const res = await computeIndicatorsInWorker([\r\n          { name: 'sma', period: 20 },\r\n          { name: 'ema', period: 12 },\r\n          { name: 'ema', period: 26 },\r\n        ], { closes, highs, lows, volumes });\r\n        const ts = prices.map(p => p.time);\r\n        const toSeries = (arr) => (arr || []).map((v, i) => v == null ? null : ({ time: ts[i], value: Number(v) })).filter(Boolean);\r\n        const overlaySeries = [];\r\n        if (res?.output?.sma20) overlaySeries.push({ name: 'SMA20', color: '#3b82f6', values: toSeries(res.output.sma20) });\r\n        if (res?.output?.ema12) overlaySeries.push({ name: 'EMA12', color: '#f59e0b', values: toSeries(res.output.ema12) });\r\n        if (res?.output?.ema26) overlaySeries.push({ name: 'EMA26', color: '#10b981', values: toSeries(res.output.ema26) });\r\n        setOverlays(overlaySeries);\r\n      } finally {\r\n        setIsChartLoading(false);\r\n      }\r\n    };\r\n    loadChart();\r\n\r\n    // Load news via stock news endpoint if needed (handled by StockNewsIntegration component)\r\n\r\n    // Load insider trades\r\n    (async () => {\r\n      try {\r\n        setInsiders((s) => ({ ...s, loading: true, error: null }));\r\n        const res = await getInsiderTrades(symbol);\r\n        setInsiders({ loading: false, data: res, error: res?.success ? null : (res?.error || 'No data') });\r\n      } catch (e) {\r\n        setInsiders({ loading: false, data: null, error: 'Failed to load' });\r\n      }\r\n    })();\r\n\r\n    // Set up real-time updates every 30 seconds\r\n    const interval = setInterval(async () => {\r\n      try {\r\n        const realtimeResponse = await getRealTimeQuote(symbol);\r\n        if (realtimeResponse) {\r\n          setRealtimeData(realtimeResponse);\r\n        }\r\n      } catch (error) {\r\n        // Silently fail for real-time updates\r\n      }\r\n    }, 30000);\r\n\r\n    return () => clearInterval(interval);\r\n  }, [symbol]);\r\n\r\n  const handleAddToWatchlist = async () => {\r\n    try {\r\n      await addWatchlist(symbol, {\r\n        watchlist_name: \"My Watchlist\",\r\n        notes: `Added ${stockData.company_name} from stock detail page`\r\n      });\r\n      toast.success(`${symbol} added to watchlist`);\r\n    } catch (error) {\r\n      toast.error(`Failed to add ${symbol} to watchlist`);\r\n    }\r\n  };\r\n\r\n  const handleCreateAlert = async () => {\r\n    try {\r\n      await createAlert({\r\n        ticker: symbol,\r\n        target_price: stockData.current_price * 1.05, // 5% above current\r\n        condition: \"above\",\r\n        email: \"user@example.com\" // Should come from user context\r\n      });\r\n      toast.success(\"Price alert created successfully\");\r\n    } catch (error) {\r\n      toast.error(\"Failed to create price alert\");\r\n    }\r\n  };\r\n\r\n  const formatCurrency = (value) => formatCurrencySafe(value, 'USD', '$');\r\n\r\n  const formatMarketCap = (value) => {\r\n    const v = Number(value || 0);\r\n    if (!Number.isFinite(v)) return '$0';\r\n    if (v >= 1e12) return `$${(v / 1e12).toFixed(2)}T`;\r\n    if (v >= 1e9) return `$${(v / 1e9).toFixed(2)}B`;\r\n    if (v >= 1e6) return `$${(v / 1e6).toFixed(2)}M`;\r\n    return `$${v.toLocaleString()}`;\r\n  };\r\n\r\n  const formatVolume = (value) => {\r\n    const v = Number(value || 0);\r\n    if (!Number.isFinite(v)) return '0';\r\n    if (v >= 1e6) return `${(v / 1e6).toFixed(1)}M`;\r\n    if (v >= 1e3) return `${(v / 1e3).toFixed(0)}K`;\r\n    return v.toLocaleString();\r\n  };\r\n\r\n  if (isLoading) {\r\n    return (\r\n      <div className=\"container mx-auto px-4 py-8 max-w-6xl\">\r\n        <div className=\"space-y-6\">\r\n          <div className=\"flex items-center space-x-4\">\r\n            <Skeleton className=\"h-10 w-20\" />\r\n            <Skeleton className=\"h-8 w-48\" />\r\n          </div>\r\n          \r\n          <div className=\"grid lg:grid-cols-3 gap-6\">\r\n            <div className=\"lg:col-span-2\">\r\n              <Card>\r\n                <CardHeader>\r\n                  <Skeleton className=\"h-8 w-32\" />\r\n                  <Skeleton className=\"h-6 w-48\" />\r\n                </CardHeader>\r\n                <CardContent>\r\n                  <Skeleton className=\"h-64 w-full\" />\r\n                </CardContent>\r\n              </Card>\r\n            </div>\r\n            <div>\r\n              <Card>\r\n                <CardHeader>\r\n                  <Skeleton className=\"h-6 w-24\" />\r\n                </CardHeader>\r\n                <CardContent>\r\n                  <div className=\"space-y-4\">\r\n                    {[1, 2, 3, 4].map((i) => (\r\n                      <div key={i} className=\"flex justify-between\">\r\n                        <Skeleton className=\"h-4 w-24\" />\r\n                        <Skeleton className=\"h-4 w-16\" />\r\n                      </div>\r\n                    ))}\r\n                  </div>\r\n                </CardContent>\r\n              </Card>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (!stockData) {\r\n    return (\r\n      <div className=\"container mx-auto px-4 py-8 max-w-6xl\">\r\n        <SEO title={`Stock Not Found | Trade Scan Pro`} robots=\"noindex,follow\" />\r\n        <Alert variant=\"destructive\">\r\n          <AlertTriangle className=\"h-4 w-4\" />\r\n          <AlertDescription>\r\n            Stock data not found for symbol \"{symbol}\". Please check the symbol and try again.\r\n          </AlertDescription>\r\n        </Alert>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  const currentData = { ...(stockData || {}), ...(realtimeData || {}) };\r\n  const isPositive = Number(currentData.change_percent || 0) >= 0;\r\n\r\n  // Build dynamic details rows from available fields\r\n  // Use shared isMissing from utils\r\n\r\n  const toPercent = (v) => {\r\n    const n = Number(v);\r\n    if (!Number.isFinite(n)) return null;\r\n    // If value looks like 0-1, treat as fraction; if > 1 and < 1000, assume percent already\r\n    const pct = n > 1 ? n : (n * 100);\r\n    return `${pct >= 0 ? '' : ''}${pct.toFixed(2)}%`;\r\n  };\r\n\r\n  const safeDisplay = (value) => {\r\n    if (Array.isArray(value)) {\r\n      if (!value.length) return null;\r\n      const allPrimitive = value.every(v => (['string','number','boolean'].includes(typeof v)));\r\n      return allPrimitive ? value.join(', ') : null; // skip arrays of objects\r\n    }\r\n    if (typeof value === 'object') {\r\n      return null; // skip objects to avoid React rendering errors\r\n    }\r\n    return value;\r\n  };\r\n\r\n  const pushIf = (rows, key, label, value) => {\r\n    const display = safeDisplay(value);\r\n    if (!isMissing(display)) rows.push({ key, label, value: display });\r\n  };\r\n\r\n  const detailsRows = (() => {\r\n    const rows = [];\r\n    // Common, nicely formatted fields first\r\n    pushIf(rows, 'exchange', 'Exchange', currentData.exchange);\r\n    pushIf(rows, 'currency', 'Currency', currentData.currency || 'USD');\r\n    // Market Cap (prefer formatted)\r\n    const marketCapDisplay = !isMissing(currentData.formatted_market_cap)\r\n      ? currentData.formatted_market_cap\r\n      : (!isMissing(currentData.market_cap) ? formatMarketCap(currentData.market_cap) : null);\r\n    pushIf(rows, 'market_cap', 'Market Cap', marketCapDisplay);\r\n    // Volume\r\n    const vol = !isMissing(currentData.volume_today) ? currentData.volume_today : currentData.volume;\r\n    pushIf(rows, 'volume', 'Volume', Number.isFinite(Number(vol)) ? formatVolume(vol) : vol);\r\n    pushIf(rows, 'avg_volume_3mon', 'Avg Volume (3m)', Number.isFinite(Number(currentData.avg_volume_3mon)) ? formatVolume(currentData.avg_volume_3mon) : currentData.avg_volume_3mon);\r\n    pushIf(rows, 'dvav', 'Volume vs Avg', Number.isFinite(Number(currentData.dvav)) ? `${(Number(currentData.dvav) * 100).toFixed(1)}%` : currentData.dvav);\r\n    // Day range\r\n    const dayRange = !isMissing(currentData.days_range)\r\n      ? currentData.days_range\r\n      : (!isMissing(currentData.days_low) && !isMissing(currentData.days_high)\r\n          ? `${formatCurrency(currentData.days_low)} - ${formatCurrency(currentData.days_high)}`\r\n          : null);\r\n    pushIf(rows, 'days_range', 'Day Range', dayRange);\r\n    // Bid/Ask\r\n    pushIf(rows, 'bid_price', 'Bid', Number.isFinite(Number(currentData.bid_price)) ? formatCurrency(currentData.bid_price) : currentData.bid_price);\r\n    pushIf(rows, 'ask_price', 'Ask', Number.isFinite(Number(currentData.ask_price)) ? formatCurrency(currentData.ask_price) : currentData.ask_price);\r\n    pushIf(rows, 'bid_ask_spread', 'Bid-Ask Spread', currentData.bid_ask_spread);\r\n    // Ratios & yields\r\n    if (Number.isFinite(Number(currentData.pe_ratio))) {\r\n      pushIf(rows, 'pe_ratio', 'P/E Ratio', Number(currentData.pe_ratio).toFixed(2));\r\n    }\r\n    if (!isMissing(currentData.dividend_yield)) {\r\n      const dy = Number(currentData.dividend_yield);\r\n      const dyDisplay = Number.isFinite(dy) ? (dy > 1 ? `${dy.toFixed(2)}%` : `${(dy * 100).toFixed(2)}%`) : currentData.dividend_yield;\r\n      pushIf(rows, 'dividend_yield', 'Dividend Yield', dyDisplay);\r\n    }\r\n    if (Number.isFinite(Number(currentData.earnings_per_share))) {\r\n      pushIf(rows, 'earnings_per_share', 'EPS', Number(currentData.earnings_per_share).toFixed(2));\r\n    }\r\n    if (Number.isFinite(Number(currentData.book_value))) {\r\n      pushIf(rows, 'book_value', 'Book Value', formatCurrency(currentData.book_value));\r\n    }\r\n    if (Number.isFinite(Number(currentData.price_to_book))) {\r\n      pushIf(rows, 'price_to_book', 'Price/Book', Number(currentData.price_to_book).toFixed(2));\r\n    }\r\n\r\n    // Price change summaries if available\r\n    if (!isMissing(currentData.change_percent)) {\r\n      const cp = toPercent(currentData.change_percent);\r\n      if (cp) pushIf(rows, 'change_percent', 'Change (Today)', cp);\r\n    }\r\n    if (!isMissing(currentData.price_change_week)) {\r\n      const val = toPercent(currentData.price_change_week);\r\n      if (val) pushIf(rows, 'price_change_week', 'Change (Week)', val);\r\n    }\r\n    if (!isMissing(currentData.price_change_month)) {\r\n      const val = toPercent(currentData.price_change_month);\r\n      if (val) pushIf(rows, 'price_change_month', 'Change (Month)', val);\r\n    }\r\n    if (!isMissing(currentData.price_change_year)) {\r\n      const val = toPercent(currentData.price_change_year);\r\n      if (val) pushIf(rows, 'price_change_year', 'Change (Year)', val);\r\n    }\r\n\r\n    // Append any other non-null fields generically (avoid duplicates and noisy keys)\r\n    const handledKeys = new Set(rows.map(r => r.key));\r\n    const excludeKeys = new Set([\r\n      'ticker','symbol','company_name','name','current_price','price_change_today',\r\n      'last_updated','market_cap_change_3mon','pe_change_3mon','recent_prices'\r\n    ]);\r\n    Object.keys(currentData).forEach((k) => {\r\n      if (handledKeys.has(k) || excludeKeys.has(k)) return;\r\n      const v = currentData[k];\r\n      if (isMissing(v)) return;\r\n      const label = k.replace(/_/g, ' ').replace(/\\b\\w/g, (c) => c.toUpperCase());\r\n      let display = safeDisplay(v);\r\n      if (typeof v === 'number' && Number.isFinite(v)) {\r\n        // If looks like big integer, format with commas; if between 0 and 1, maybe percent\r\n        if (Math.abs(v) >= 1e6) display = v.toLocaleString();\r\n        else display = v.toString();\r\n      }\r\n      rows.push({ key: k, label, value: display });\r\n    });\r\n\r\n    return rows;\r\n  })();\r\n\r\n  return (\r\n    <div className=\"container mx-auto px-4 py-8 max-w-6xl\">\r\n      <SEO\r\n        title={`${stockData.ticker} | ${stockData.company_name} | Trade Scan Pro`}\r\n        description={`Live quote, key stats and news for ${stockData.company_name} (${stockData.ticker}).`}\r\n        url={`https://tradescanpro.com/app/stocks/${encodeURIComponent(stockData.ticker)}`}\r\n        robots=\"noindex,follow\"\r\n      />\r\n      <div className=\"space-y-6\">\r\n        {/* Header */}\r\n        <div className=\"flex items-center space-x-4\">\r\n          <Button variant=\"ghost\" size=\"sm\" asChild>\r\n            <Link to=\"/app/stocks\">\r\n              <ArrowLeft className=\"h-4 w-4 mr-2\" />\r\n              Back to Stocks\r\n            </Link>\r\n          </Button>\r\n        </div>\r\n\r\n        {/* Stock Header */}\r\n        <Card>\r\n          <CardContent className=\"p-6\">\r\n            <div className=\"flex items-center justify-between sm:flex-nowrap flex-wrap gap-3\">\r\n              <div className=\"flex items-center space-x-4\">\r\n                <div>\r\n                  <div className=\"flex items-center space-x-3\">\r\n                    <h1 className=\"text-3xl font-bold text-gray-900\">{stockData.ticker}</h1>\r\n                    <Badge variant=\"outline\">{stockData.exchange}</Badge>\r\n                  </div>\r\n                  <h2 className=\"text-xl text-gray-600 mt-1\">{stockData.company_name}</h2>\r\n                </div>\r\n                \r\n                <div className=\"text-right\">\r\n                  <div className=\"text-3xl font-bold\">\r\n                    {Number.isFinite(Number(currentData.current_price)) ? formatCurrency(Number(currentData.current_price)) : '$0.00'}\r\n                  </div>\r\n                  <div className={`flex items-center text-lg font-semibold ${\r\n                    isPositive ? 'text-green-600' : 'text-red-600'\r\n                  }`}>\r\n                    {isPositive ? (\r\n                      <TrendingUp className=\"h-5 w-5 mr-1\" />\r\n                    ) : (\r\n                      <TrendingDown className=\"h-5 w-5 mr-1\" />\r\n                    )}\r\n                    {isPositive ? '+' : ''}{Number.isFinite(Number(currentData.price_change_today)) ? Number(currentData.price_change_today).toFixed(2) : '0.00'} \r\n                    ({isPositive ? '+' : ''}{Number.isFinite(Number(currentData.change_percent)) ? Number(currentData.change_percent).toFixed(2) : '0.00'}%)\r\n                  </div>\r\n                </div>\r\n              </div>\r\n              \r\n              <div className=\"flex items-center space-x-2 sm:flex-nowrap flex-wrap gap-2\">\r\n                <Button asChild variant=\"outline\">\r\n                  <Link to={`/app/watchlists?symbol=${encodeURIComponent(symbol)}`}>\r\n                    <Star className=\"h-4 w-4 mr-2\" />\r\n                    Watch\r\n                  </Link>\r\n                </Button>\r\n                <Button asChild variant=\"outline\">\r\n                  <Link to={`/app/alerts?ticker=${encodeURIComponent(symbol)}`}>\r\n                  <Bell className=\"h-4 w-4 mr-2\" />\r\n                  Alert\r\n                  </Link>\r\n                </Button>\r\n              </div>\r\n            </div>\r\n            \r\n            <div className=\"mt-4 text-sm text-gray-500\">\r\n              Last updated: {currentData.last_updated ? new Date(currentData.last_updated).toLocaleString() : 'N/A'}\r\n            </div>\r\n\r\n            {/* Striped details table (dynamic) */}\r\n            <div className=\"mt-6 overflow-hidden border rounded-lg\">\r\n              <table className=\"min-w-full text-sm\">\r\n                <tbody className=\"divide-y\">\r\n                  {detailsRows.map((row) => (\r\n                    <tr key={row.key} className=\"odd:bg-gray-50\">\r\n                      <td className=\"p-3 text-gray-600\">{row.label}</td>\r\n                      <td className=\"p-3 font-medium\">{row.value}</td>\r\n                    </tr>\r\n                  ))}\r\n                </tbody>\r\n              </table>\r\n            </div>\r\n          </CardContent>\r\n        </Card>\r\n\r\n        <div className=\"grid lg:grid-cols-3 gap-6\">\r\n          {/* Main Content */}\r\n          <div className=\"lg:col-span-2\">\r\n            <Tabs value={activeTab} onValueChange={setActiveTab}>\r\n              <TabsList className=\"grid w-full grid-cols-4\">\r\n                <TabsTrigger value=\"overview\">Overview</TabsTrigger>\r\n                <TabsTrigger value=\"valuation\">Valuation</TabsTrigger>\r\n                <TabsTrigger value=\"insiders\">Insiders</TabsTrigger>\r\n                <TabsTrigger value=\"news\">News</TabsTrigger>\r\n              </TabsList>\r\n\r\n              <TabsContent value=\"overview\" className=\"space-y-4\">\r\n                <Card>\r\n                  <CardHeader>\r\n                    <CardTitle>Key Statistics</CardTitle>\r\n                  </CardHeader>\r\n                  <CardContent>\r\n                    <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4\">\r\n                      <div className=\"text-center p-4 bg-blue-50 rounded-lg\">\r\n                        <Volume2 className=\"h-6 w-6 text-blue-500 mx-auto mb-2\" />\r\n                        <div className=\"text-2xl font-bold text-blue-600\">\r\n                          {formatVolume(currentData.volume)}\r\n                        </div>\r\n                        <div className=\"text-sm text-blue-600\">Volume</div>\r\n                      </div>\r\n                      \r\n                      <div className=\"text-center p-4 bg-green-50 rounded-lg\">\r\n                        <Building className=\"h-6 w-6 text-green-500 mx-auto mb-2\" />\r\n                        <div className=\"text-2xl font-bold text-green-600\">\r\n                          {formatMarketCap(currentData.market_cap)}\r\n                        </div>\r\n                        <div className=\"text-sm text-green-600\">Market Cap</div>\r\n                      </div>\r\n                      \r\n                      <div className=\"text-center p-4 bg-purple-50 rounded-lg\">\r\n                        <Target className=\"h-6 w-6 text-purple-500 mx-auto mb-2\" />\r\n                        <div className=\"text-2xl font-bold text-purple-600\">\r\n                          {currentData.pe_ratio?.toFixed(1) || 'N/A'}\r\n                        </div>\r\n                        <div className=\"text-sm text-purple-600\">P/E Ratio</div>\r\n                      </div>\r\n                      \r\n                      <div className=\"text-center p-4 bg-yellow-50 rounded-lg\">\r\n                        <DollarSign className=\"h-6 w-6 text-yellow-500 mx-auto mb-2\" />\r\n                        <div className=\"text-2xl font-bold text-yellow-600\">\r\n                          {currentData.dividend_yield?.toFixed(2) || '0.00'}%\r\n                        </div>\r\n                        <div className=\"text-sm text-yellow-600\">Dividend Yield</div>\r\n                      </div>\r\n                    </div>\r\n                  </CardContent>\r\n                </Card>\r\n\r\n                <Card>\r\n                  <CardHeader>\r\n                    <CardTitle>Price History</CardTitle>\r\n                    <CardDescription>Recent price movements</CardDescription>\r\n                  </CardHeader>\r\n                  <CardContent>\r\n                    <div className=\"w-full\">\r\n                      <LightweightPriceChart\r\n                        data={chartData}\r\n                        overlays={overlays}\r\n                        height={400}\r\n                      />\r\n                    </div>\r\n                  </CardContent>\r\n                </Card>\r\n              </TabsContent>\r\n\r\n              <TabsContent value=\"valuation\" className=\"space-y-4\">\r\n                <Card>\r\n                  <CardHeader>\r\n                    <CardTitle>Fair Value (Restricted)  Subsector Multiples</CardTitle>\r\n                    <CardDescription>\r\n                      Based on sector/subsector P/E multiples  forward EPS\r\n                    </CardDescription>\r\n                  </CardHeader>\r\n                  <CardContent>\r\n                    {(() => {\r\n                      const v = stockData?.valuation || {};\r\n                      const fv = v.fair_value_restricted || {};\r\n                      const items = [\r\n                        { label: 'Low', value: fv.low },\r\n                        { label: 'Base', value: fv.base },\r\n                        { label: 'High', value: fv.high },\r\n                      ].filter(x => Number.isFinite(Number(x.value)) && Number(x.value) > 0);\r\n                      const data = items.map((x, i) => ({ name: x.label, value: Number(x.value) }));\r\n                      if (!data.length) return <div className=\"text-sm text-gray-500\">No fair value data yet.</div>;\r\n                      return (\r\n                        <div className=\"h-72\">\r\n                          <ResponsiveContainer width=\"100%\" height=\"100%\">\r\n                            <AreaChart data={data} margin={{ top: 10, right: 20, left: 0, bottom: 0 }}>\r\n                              <defs>\r\n                                <linearGradient id=\"colorFv\" x1=\"0\" y1=\"0\" x2=\"0\" y2=\"1\">\r\n                                  <stop offset=\"5%\" stopColor=\"#3b82f6\" stopOpacity={0.4}/>\r\n                                  <stop offset=\"95%\" stopColor=\"#3b82f6\" stopOpacity={0.05}/>\r\n                                </linearGradient>\r\n                              </defs>\r\n                              <CartesianGrid strokeDasharray=\"3 3\" />\r\n                              <XAxis dataKey=\"name\" />\r\n                              <YAxis tickFormatter={(v)=>`$${v}`} />\r\n                              <Tooltip formatter={(v)=>[formatCurrencySafe(v, 'USD', '$'), 'Fair Value']} />\r\n                              <Area type=\"monotone\" dataKey=\"value\" stroke=\"#3b82f6\" fillOpacity={1} fill=\"url(#colorFv)\" />\r\n                            </AreaChart>\r\n                          </ResponsiveContainer>\r\n                        </div>\r\n                      );\r\n                    })()}\r\n                    <div className=\"mt-4 grid grid-cols-2 md:grid-cols-4 gap-3 text-sm\">\r\n                      <div>\r\n                        <div className=\"text-gray-500\">Forward EPS</div>\r\n                        <div className=\"font-medium\">{formatNumberSafe(stockData?.valuation?.forward_eps, 2, 'N/A')}</div>\r\n                      </div>\r\n                      <div>\r\n                        <div className=\"text-gray-500\">Sector</div>\r\n                        <div className=\"font-medium\">{isMissing(stockData?.valuation?.sector) ? 'N/A' : stockData.valuation.sector}</div>\r\n                      </div>\r\n                      <div>\r\n                        <div className=\"text-gray-500\">PE (Subsector Base)</div>\r\n                        <div className=\"font-medium\">{formatNumberSafe(stockData?.valuation?.subsector_pe_base, 1, 'N/A')}</div>\r\n                      </div>\r\n                      <div>\r\n                        <div className=\"text-gray-500\">Analyst Target</div>\r\n                        <div className=\"font-medium\">{formatCurrencySafe(stockData?.valuation?.analyst_target, 'USD', 'N/A')}</div>\r\n                      </div>\r\n                    </div>\r\n                  </CardContent>\r\n                </Card>\r\n\r\n                <Card>\r\n                  <CardHeader>\r\n                    <CardTitle>Fair Value (Unrestricted)  Company Trajectory</CardTitle>\r\n                    <CardDescription>\r\n                      Company forward P/E  forward EPS (log scale)\r\n                    </CardDescription>\r\n                  </CardHeader>\r\n                  <CardContent>\r\n                    {(() => {\r\n                      const v = stockData?.valuation || {};\r\n                      const point = Number(v.fair_value_unrestricted);\r\n                      if (!Number.isFinite(point) || point <= 0) return <div className=\"text-sm text-gray-500\">No fair value data yet.</div>;\r\n                      const data = [\r\n                        { name: 'Now', value: Number(currentData.current_price) || 0 },\r\n                        { name: 'FV', value: point },\r\n                      ];\r\n                      return (\r\n                        <div className=\"h-72\">\r\n                          <ResponsiveContainer width=\"100%\" height=\"100%\">\r\n                            <LineChart data={data} margin={{ top: 10, right: 20, left: 0, bottom: 0 }}>\r\n                              <CartesianGrid strokeDasharray=\"3 3\" />\r\n                              <XAxis dataKey=\"name\" />\r\n                              <YAxis scale=\"log\" domain={['auto','auto']} tickFormatter={(v)=>`$${v}`} allowDataOverflow />\r\n                              <Tooltip formatter={(v)=>[formatCurrencySafe(v, 'USD', '$'), 'Value']} />\r\n                              <Line type=\"monotone\" dataKey=\"value\" stroke=\"#10b981\" strokeWidth={2} dot={{ r: 4 }} />\r\n                            </LineChart>\r\n                          </ResponsiveContainer>\r\n                        </div>\r\n                      );\r\n                    })()}\r\n                    <div className=\"mt-4 grid grid-cols-2 md:grid-cols-4 gap-3 text-sm\">\r\n                      <div>\r\n                        <div className=\"text-gray-500\">Forward P/E</div>\r\n                        <div className=\"font-medium\">{formatNumberSafe(stockData?.valuation?.forward_pe, 1, 'N/A')}</div>\r\n                      </div>\r\n                      <div>\r\n                        <div className=\"text-gray-500\">RSI(14)</div>\r\n                        <div className=\"font-medium\">{formatNumberSafe(stockData?.valuation?.rsi14, 2, 'N/A')}</div>\r\n                      </div>\r\n                    </div>\r\n                  </CardContent>\r\n                </Card>\r\n              </TabsContent>\r\n\r\n              <TabsContent value=\"insiders\" className=\"space-y-4\">\r\n                <Card>\r\n                  <CardHeader>\r\n                    <CardTitle>Recent Insider Trades (Last 30 Days)</CardTitle>\r\n                    <CardDescription>SEC Form 4 filings for executives and directors</CardDescription>\r\n                  </CardHeader>\r\n                  <CardContent>\r\n                    {insiders.loading ? (\r\n                      <div className=\"text-sm text-gray-500\">Loading insider trades...</div>\r\n                    ) : insiders.error ? (\r\n                      <div className=\"text-sm text-red-600\">{insiders.error}</div>\r\n                    ) : !insiders.data?.success ? (\r\n                      <div className=\"text-sm text-gray-500\">No insider data available.</div>\r\n                    ) : (\r\n                      <>\r\n                        <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4 mb-4\">\r\n                          <div className=\"bg-gray-50 rounded p-3\">\r\n                            <div className=\"text-xs text-gray-500\">Signal</div>\r\n                            <div className=\"text-base font-semibold\">{insiders.data.summary?.signal || 'Neutral'}</div>\r\n                          </div>\r\n                          <div className=\"bg-gray-50 rounded p-3\">\r\n                            <div className=\"text-xs text-gray-500\">Net Activity (shares)</div>\r\n                            <div className=\"text-base font-semibold\">{Number(insiders.data.summary?.net_insider_activity_shares || 0).toLocaleString()}</div>\r\n                          </div>\r\n                          <div className=\"bg-gray-50 rounded p-3\">\r\n                            <div className=\"text-xs text-gray-500\">Records</div>\r\n                            <div className=\"text-base font-semibold\">{insiders.data.summary?.records_count || 0}</div>\r\n                          </div>\r\n                          <div className=\"bg-gray-50 rounded p-3\">\r\n                            <div className=\"text-xs text-gray-500\">CIK</div>\r\n                            <div className=\"text-base font-semibold\">{insiders.data.cik}</div>\r\n                          </div>\r\n                        </div>\r\n                        <div className=\"overflow-auto border rounded\">\r\n                          <table className=\"min-w-full text-sm\">\r\n                            <thead className=\"bg-gray-50\">\r\n                              <tr>\r\n                                <th className=\"text-left p-2\">Date</th>\r\n                                <th className=\"text-left p-2\">Insider</th>\r\n                                <th className=\"text-left p-2\">Role</th>\r\n                                <th className=\"text-left p-2\">Type</th>\r\n                                <th className=\"text-right p-2\">Shares</th>\r\n                                <th className=\"text-right p-2\">Price</th>\r\n                                <th className=\"text-right p-2\">Value</th>\r\n                              </tr>\r\n                            </thead>\r\n                            <tbody className=\"divide-y\">\r\n                              {(insiders.data.records || []).map((r, idx) => (\r\n                                <tr key={idx} className=\"odd:bg-white even:bg-gray-50\">\r\n                                  <td className=\"p-2 whitespace-nowrap\">{r.date}</td>\r\n                                  <td className=\"p-2\">{r.insider_name}</td>\r\n                                  <td className=\"p-2\">{r.role}</td>\r\n                                  <td className=\"p-2\">{r.transaction_type}{r.ad ? ` (${r.ad === 'A' ? 'Buy' : (r.ad === 'D' ? 'Sell' : r.ad)})` : ''}</td>\r\n                                  <td className=\"p-2 text-right\">{Number(r.shares || 0).toLocaleString()}</td>\r\n                                  <td className=\"p-2 text-right\">{r.price != null ? `$${Number(r.price).toFixed(2)}` : '-'}</td>\r\n                                  <td className=\"p-2 text-right\">{r.value != null ? `$${Number(r.value).toFixed(2)}` : '-'}</td>\r\n                                </tr>\r\n                              ))}\r\n                            </tbody>\r\n                          </table>\r\n                        </div>\r\n                      </>\r\n                    )}\r\n                  </CardContent>\r\n                </Card>\r\n              </TabsContent>\r\n\r\n              <TabsContent value=\"news\" className=\"space-y-4\">\r\n                <StockNewsIntegration \r\n                  symbol={symbol}\r\n                  maxItems={15}\r\n                  showHeader={false}\r\n                />\r\n              </TabsContent>\r\n            </Tabs>\r\n          </div>\r\n\r\n          {/* Sidebar */}\r\n          <div className=\"space-y-6\">\r\n            {/* Quick Stats */}\r\n            <Card>\r\n              <CardHeader>\r\n                <CardTitle>Quick Stats</CardTitle>\r\n              </CardHeader>\r\n              <CardContent className=\"space-y-3\">\r\n                <div className=\"flex justify-between\">\r\n                  <span className=\"text-gray-600\">Open</span>\r\n                  <span className=\"font-medium\">{formatCurrency(currentData.current_price - (currentData.price_change_today || 0))}</span>\r\n                </div>\r\n                <div className=\"flex justify-between\">\r\n                  <span className=\"text-gray-600\">High</span>\r\n                  <span className=\"font-medium\">{formatCurrency(currentData.current_price * 1.02)}</span>\r\n                </div>\r\n                <div className=\"flex justify-between\">\r\n                  <span className=\"text-gray-600\">Low</span>\r\n                  <span className=\"font-medium\">{formatCurrency(currentData.current_price * 0.98)}</span>\r\n                </div>\r\n                <div className=\"flex justify-between\">\r\n                  <span className=\"text-gray-600\">Volume</span>\r\n                  <span className=\"font-medium\">{formatVolume(currentData.volume)}</span>\r\n                </div>\r\n                <div className=\"flex justify-between\">\r\n                  <span className=\"text-gray-600\">Avg Volume</span>\r\n                  <span className=\"font-medium\">{formatVolume(currentData.volume * 0.8)}</span>\r\n                </div>\r\n              </CardContent>\r\n            </Card>\r\n\r\n            {/* Actions */}\r\n            <Card>\r\n              <CardHeader>\r\n                <CardTitle>Actions</CardTitle>\r\n              </CardHeader>\r\n              <CardContent className=\"space-y-2\">\r\n                <Button className=\"w-full\" onClick={handleAddToWatchlist}>\r\n                  <Star className=\"h-4 w-4 mr-2\" />\r\n                  Add to Watchlist\r\n                </Button>\r\n                <Button variant=\"outline\" className=\"w-full\" onClick={handleCreateAlert}>\r\n                  <Bell className=\"h-4 w-4 mr-2\" />\r\n                  Set Price Alert\r\n                </Button>\r\n                <Button variant=\"outline\" className=\"w-full\" asChild>\r\n                  <a\r\n                    href={`https://finance.yahoo.com/quote/${symbol}`}\r\n                    target=\"_blank\"\r\n                    rel=\"noopener noreferrer\"\r\n                  >\r\n                    <ExternalLink className=\"h-4 w-4 mr-2\" />\r\n                    View on Yahoo Finance\r\n                  </a>\r\n                </Button>\r\n              </CardContent>\r\n            </Card>\r\n\r\n            {/* Related Stocks */}\r\n            <Card>\r\n              <CardHeader>\r\n                <CardTitle>Related Stocks</CardTitle>\r\n              </CardHeader>\r\n              <CardContent>\r\n                <div className=\"space-y-2\">\r\n                  <div className=\"flex items-center justify-between p-2 hover:bg-gray-50 rounded\">\r\n                    <Link to=\"/app/stocks/AAPL\" className=\"font-medium text-blue-600\">AAPL</Link>\r\n                    <span className=\"text-green-600\">+1.25%</span>\r\n                  </div>\r\n                  <div className=\"flex items-center justify-between p-2 hover:bg-gray-50 rounded\">\r\n                    <Link to=\"/app/stocks/MSFT\" className=\"font-medium text-blue-600\">MSFT</Link>\r\n                    <span className=\"text-red-600\">-0.83%</span>\r\n                  </div>\r\n                  <div className=\"flex items-center justify-between p-2 hover:bg-gray-50 rounded\">\r\n                    <Link to=\"/app/stocks/GOOGL\" className=\"font-medium text-blue-600\">GOOGL</Link>\r\n                    <span className=\"text-green-600\">+2.14%</span>\r\n                  </div>\r\n                </div>\r\n              </CardContent>\r\n            </Card>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default StockDetail;"],"names":["toChartTime","ts","Math","floor","d","Date","Number","isNaN","getTime","LightweightPriceChart","_ref","data","height","theme","overlays","onReady","ariaLabel","containerRef","useRef","chartRef","mainSeriesRef","overlaySeriesRefs","seriesData","useMemo","Array","isArray","candles","area","some","open","high","low","close","map","_d$timestamp","time","timestamp","filter","v","isFinite","_d$timestamp2","_d$price","value","price","normalizeSeries","useEffect","current","el","chart","createChart","autoSize","layout","background","color","textColor","grid","vertLines","horzLines","rightPriceScale","borderColor","timeScale","crosshair","mode","mainSeries","length","addCandlestickSeries","upColor","downColor","borderVisible","wickUpColor","wickDownColor","setData","addAreaSeries","lineColor","topColor","bottomColor","lineWidth","_ref2","values","s","addLineSeries","priceLineVisible","lastValueVisible","p","fitContent","ro","ResizeObserver","applyOptions","_unused","observe","disconnect","_unused2","forEach","removeSeries","_unused3","remove","_unused4","series","priceScale","seriesType","_unused5","_unused6","_unused7","_ref3","_jsx","ref","className","style","role","worker","nextId","pending","Map","computeIndicatorsInWorker","indicators","id","w","Worker","URL","onmessage","e","type","payload","error","entry","get","delete","resolve","reject","Error","onerror","err","clear","ensureWorker","Promise","set","postMessage","symbol","maxItems","showHeader","news","setNews","useState","isLoading","setIsLoading","setError","lastUpdated","setLastUpdated","fetchStockNews","interval","setInterval","clearInterval","async","_response$data","_response$data$news_i","response","getStockNews","success","news_items","slice","concat","console","getSentimentColor","sentimentGrade","toLowerCase","getSentimentIcon","TrendingUp","TrendingDown","Clock","formatTimeAgo","publishedAt","date","diffMs","diffMins","diffHours","diffDays","toLocaleDateString","_jsxs","Card","children","CardHeader","CardTitle","Newspaper","CardDescription","CardContent","Badge","variant","Button","size","onClick","disabled","RefreshCw","asChild","Link","to","Search","Alert","AlertDescription","newsItem","index","is_read","numericId","markNewsClicked","window","url","handleNewsClick","sentiment_grade","source","published_at","ExternalLink","title","content","sentiment_score","undefined","toFixed","stopPropagation","newsId","markNewsRead","prev","item","_objectSpread","handleMarkAsRead","StockDetail","_currentData$pe_ratio","_currentData$dividend","_stockData$valuation","_stockData$valuation2","_stockData$valuation3","_stockData$valuation4","_stockData$valuation5","_stockData$valuation6","_insiders$data","_insiders$data$summar","_insiders$data$summar2","_insiders$data$summar3","useParams","stockData","setStockData","realtimeData","setRealtimeData","activeTab","setActiveTab","chartData","setChartData","isChartLoading","setIsChartLoading","setOverlays","newsItems","setNewsItems","insiders","setInsiders","loading","stockResponse","realtimeResponse","all","getStock","catch","getRealTimeQuote","toast","fetchStockData","_stockResponse","_stockResponse$data","_res$output","_res$output2","_res$output3","prices","recent_prices","_d$close","volume","closes","_p$close","highs","_p$high","lows","_p$low","volumes","_p$volume","res","name","period","toSeries","arr","i","Boolean","overlaySeries","output","sma20","push","ema12","ema26","loadChart","getInsiderTrades","formatCurrency","formatCurrencySafe","formatMarketCap","toLocaleString","formatVolume","Skeleton","SEO","robots","AlertTriangle","currentData","isPositive","change_percent","toPercent","n","pct","safeDisplay","every","includes","join","pushIf","rows","key","label","display","isMissing","detailsRows","exchange","currency","marketCapDisplay","formatted_market_cap","market_cap","vol","volume_today","avg_volume_3mon","dvav","dayRange","days_range","days_low","days_high","bid_price","ask_price","bid_ask_spread","pe_ratio","dividend_yield","dy","dyDisplay","earnings_per_share","book_value","price_to_book","cp","price_change_week","val","price_change_month","price_change_year","handledKeys","Set","r","excludeKeys","Object","keys","k","has","replace","c","toUpperCase","abs","toString","ticker","company_name","description","encodeURIComponent","ArrowLeft","current_price","price_change_today","Star","Bell","last_updated","row","Tabs","onValueChange","TabsList","TabsTrigger","TabsContent","Volume2","Building","Target","DollarSign","fv","valuation","fair_value_restricted","base","x","ResponsiveContainer","width","AreaChart","margin","top","right","left","bottom","x1","y1","x2","y2","offset","stopColor","stopOpacity","CartesianGrid","strokeDasharray","XAxis","dataKey","YAxis","tickFormatter","Tooltip","formatter","Area","stroke","fillOpacity","fill","formatNumberSafe","forward_eps","sector","subsector_pe_base","analyst_target","point","fair_value_unrestricted","LineChart","scale","domain","allowDataOverflow","Line","strokeWidth","dot","forward_pe","rsi14","_Fragment","summary","signal","net_insider_activity_shares","records_count","cik","records","idx","insider_name","transaction_type","ad","shares","StockNewsIntegration","addWatchlist","watchlist_name","notes","createAlert","target_price","condition","email","href","target","rel"],"sourceRoot":""}