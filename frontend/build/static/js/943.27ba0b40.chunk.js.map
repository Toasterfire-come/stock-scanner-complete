{"version":3,"file":"static/js/943.27ba0b40.chunk.js","mappings":"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","sources":["workers/indicatorWorker.js"],"sourcesContent":["// Lightweight indicator engine running in a Web Worker\r\n// Expects messages: { id, type: 'compute', payload: { indicators, series } }\r\n// series: { closes: number[], highs?: number[], lows?: number[], volumes?: number[] }\r\n\r\nfunction sma(values, period) {\r\n  const out = new Array(values.length).fill(null);\r\n  if (period <= 1) return values.slice();\r\n  let sum = 0;\r\n  for (let i = 0; i < values.length; i++) {\r\n    const v = Number(values[i]);\r\n    sum += v;\r\n    if (i >= period) sum -= Number(values[i - period]);\r\n    if (i >= period - 1) out[i] = sum / period;\r\n  }\r\n  return out;\r\n}\r\n\r\nfunction ema(values, period) {\r\n  const out = new Array(values.length).fill(null);\r\n  const k = 2 / (period + 1);\r\n  let prev = null;\r\n  for (let i = 0; i < values.length; i++) {\r\n    const v = Number(values[i]);\r\n    if (i === 0) { prev = v; continue; }\r\n    prev = v * k + prev * (1 - k);\r\n    if (i >= period - 1) out[i] = prev;\r\n  }\r\n  return out;\r\n}\r\n\r\nfunction stddev(arr, idx, period) {\r\n  if (idx < period - 1) return null;\r\n  let sum = 0, sumSq = 0;\r\n  for (let i = idx - period + 1; i <= idx; i++) {\r\n    const v = Number(arr[i]);\r\n    sum += v; sumSq += v * v;\r\n  }\r\n  const mean = sum / period;\r\n  const variance = Math.max(0, (sumSq / period) - mean * mean);\r\n  return Math.sqrt(variance);\r\n}\r\n\r\nfunction bollinger(values, period = 20, mult = 2) {\r\n  const mid = sma(values, period);\r\n  const upper = new Array(values.length).fill(null);\r\n  const lower = new Array(values.length).fill(null);\r\n  for (let i = 0; i < values.length; i++) {\r\n    if (mid[i] == null) continue;\r\n    const sd = stddev(values, i, period);\r\n    if (sd == null) continue;\r\n    upper[i] = mid[i] + mult * sd;\r\n    lower[i] = mid[i] - mult * sd;\r\n  }\r\n  return { mid, upper, lower };\r\n}\r\n\r\nfunction rsi(values, period = 14) {\r\n  const out = new Array(values.length).fill(null);\r\n  if (values.length === 0) return out;\r\n  let gains = 0, losses = 0;\r\n  for (let i = 1; i <= period; i++) {\r\n    const change = values[i] - values[i - 1];\r\n    if (change >= 0) gains += change; else losses -= change;\r\n  }\r\n  let avgGain = gains / period;\r\n  let avgLoss = losses / period;\r\n  out[period] = avgLoss === 0 ? 100 : 100 - 100 / (1 + (avgGain / avgLoss));\r\n  for (let i = period + 1; i < values.length; i++) {\r\n    const change = values[i] - values[i - 1];\r\n    avgGain = (avgGain * (period - 1) + Math.max(0, change)) / period;\r\n    avgLoss = (avgLoss * (period - 1) + Math.max(0, -change)) / period;\r\n    out[i] = avgLoss === 0 ? 100 : 100 - 100 / (1 + (avgGain / avgLoss));\r\n  }\r\n  return out;\r\n}\r\n\r\nfunction macd(values, fast = 12, slow = 26, signal = 9) {\r\n  const emaFast = ema(values, fast);\r\n  const emaSlow = ema(values, slow);\r\n  const macdArr = values.map((_, i) => (emaFast[i] != null && emaSlow[i] != null) ? (emaFast[i] - emaSlow[i]) : null);\r\n  const signalLine = ema(macdArr.map(v => v == null ? 0 : v), signal);\r\n  const hist = macdArr.map((v, i) => (v != null && signalLine[i] != null) ? (v - signalLine[i]) : null);\r\n  return { macd: macdArr, signal: signalLine, hist };\r\n}\r\n\r\nfunction vwap(cl, hi, lo, vol) {\r\n  const out = new Array(cl.length).fill(null);\r\n  let cumPV = 0, cumV = 0;\r\n  for (let i = 0; i < cl.length; i++) {\r\n    const typical = ((Number(hi?.[i]) || 0) + (Number(lo?.[i]) || 0) + (Number(cl?.[i]) || 0)) / 3;\r\n    const v = Number(vol?.[i]) || 0;\r\n    cumPV += typical * v;\r\n    cumV += v;\r\n    out[i] = cumV > 0 ? cumPV / cumV : null;\r\n  }\r\n  return out;\r\n}\r\n\r\nfunction computeIndicators(indicators, series) {\r\n  const { closes = [], highs = [], lows = [], volumes = [] } = series || {};\r\n  const result = {};\r\n  for (const ind of indicators || []) {\r\n    const name = String(ind?.name || '').toLowerCase();\r\n    try {\r\n      if (name === 'sma') result[`sma${ind.period}`] = sma(closes, Number(ind.period || 20));\r\n      else if (name === 'ema') result[`ema${ind.period}`] = ema(closes, Number(ind.period || 20));\r\n      else if (name === 'bb' || name === 'bollinger') result[`bb${ind.period || 20}`] = bollinger(closes, Number(ind.period || 20), Number(ind.mult || 2));\r\n      else if (name === 'rsi') result[`rsi${ind.period || 14}`] = rsi(closes, Number(ind.period || 14));\r\n      else if (name === 'macd') result['macd'] = macd(closes, Number(ind.fast || 12), Number(ind.slow || 26), Number(ind.signal || 9));\r\n      else if (name === 'vwap') result['vwap'] = vwap(closes, highs, lows, volumes);\r\n    } catch (e) {\r\n      result[name] = null;\r\n    }\r\n  }\r\n  return result;\r\n}\r\n\r\nself.onmessage = function(e) {\r\n  const msg = e?.data || {};\r\n  if (msg.type === 'compute') {\r\n    const t0 = performance.now();\r\n    try {\r\n      const output = computeIndicators(msg.payload?.indicators, msg.payload?.series);\r\n      const ms = performance.now() - t0;\r\n      self.postMessage({ id: msg.id, type: 'result', payload: { output, ms } });\r\n    } catch (err) {\r\n      self.postMessage({ id: msg.id, type: 'error', error: String(err) });\r\n    }\r\n  }\r\n};\r\n"],"names":["sma","values","period","out","Array","length","fill","slice","sum","i","Number","ema","k","prev","v","stddev","arr","idx","sumSq","mean","variance","Math","max","sqrt","bollinger","arguments","undefined","mult","mid","upper","lower","sd","rsi","gains","losses","change","avgGain","avgLoss","macd","slow","signal","emaFast","emaSlow","macdArr","map","_","signalLine","hist","vwap","cl","hi","lo","vol","cumPV","cumV","typical","self","onmessage","e","msg","data","type","t0","performance","now","_msg$payload","_msg$payload2","output","indicators","series","closes","highs","lows","volumes","result","ind","name","String","toLowerCase","concat","fast","computeIndicators","payload","ms","postMessage","id","err","error"],"sourceRoot":""}