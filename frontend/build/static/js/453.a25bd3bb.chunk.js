"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[453],{2453:(e,s,t)=>{t.r(s),t.d(s,{default:()=>_});var a=t(2555),c=t(5043),l=t(5352),r=t(3390),i=t(1140),n=t(2264),d=t(1981),m=t(5949),o=t(1555),x=t(5598),h=t(6328),p=t(9233),j=t(5087),u=t(1360),N=t(9292),y=t(3944),g=t(9855),f=t(3782),v=t(4919),b=t(830),w=t(579);const _=()=>{const[e,s]=(0,c.useState)(!0),[t]=(0,l.ok)(),[_,A]=(0,c.useState)(null),[k,C]=(0,c.useState)(!1),[F,S]=(0,c.useState)(""),[W,R]=(0,c.useState)({symbol:"",notes:"",alert_price:"",watchlist_name:"My Watchlist"}),[Z,L]=(0,c.useState)((0,b.ay)());(0,c.useEffect)(()=>{E()},[]),(0,c.useEffect)(()=>{const e=(t.get("symbol")||"").toUpperCase();e&&(C(!0),R(s=>(0,a.A)((0,a.A)({},s),{},{symbol:e})))},[t]);const E=async()=>{try{const e=await(0,b.LN)();e&&e.success?A(e):A({success:!0,data:{watchlists:[]},summary:{total_items:0,gainers:0,losers:0,unchanged:0}})}catch(e){h.oR.error("Failed to load watchlist")}finally{s(!1)}},$=async(e,s)=>{if(confirm("Are you sure you want to remove ".concat(s," from your watchlist?")))try{(await(0,b.Z2)(e)).success?(h.oR.success("".concat(s," removed from watchlist")),E()):h.oR.error("Failed to remove from watchlist")}catch(t){h.oR.error("Failed to remove from watchlist")}},z=e=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(e),M=e=>{const s=Number(e||0);return s>=1e9?"".concat((s/1e9).toFixed(1),"B"):s>=1e6?"".concat((s/1e6).toFixed(1),"M"):s>=1e3?"".concat((s/1e3).toFixed(0),"K"):s.toLocaleString()},U=e=>"".concat(e>0?"+":"").concat(e.toFixed(2),"%"),P=(()=>{const e=null===_||void 0===_?void 0:_.data;return Array.isArray(e)?e.map(e=>({id:e.item_id||e.id,symbol:e.stock_ticker||e.symbol,company_name:e.company_name||e.name,current_price:e.current_price,price_change:e.price_change_today||e.price_change,price_change_percent:e.change_percent||e.price_change_percent,volume:e.volume,alert_price:e.alert_price,notes:e.notes})):((null===e||void 0===e?void 0:e.watchlists)||[]).flatMap(e=>(e.items||e.stocks||[]).map(e=>({id:e.item_id||e.id,symbol:e.stock_ticker||e.symbol,company_name:e.company_name||e.name,current_price:e.current_price,price_change:e.price_change_today||e.price_change,price_change_percent:e.change_percent||e.price_change_percent,volume:e.volume,alert_price:e.alert_price,notes:e.notes})))})(),B=P.filter(e=>(e.symbol||"").toLowerCase().includes(F.toLowerCase())||(e.company_name||"").toLowerCase().includes(F.toLowerCase()));return e?(0,w.jsx)("div",{className:"container mx-auto px-4 py-8 max-w-7xl",children:(0,w.jsxs)("div",{className:"space-y-6",children:[(0,w.jsxs)("div",{className:"flex items-center justify-between",children:[(0,w.jsx)(o.E,{className:"h-8 w-48"}),(0,w.jsx)(o.E,{className:"h-10 w-32"})]}),(0,w.jsx)("div",{className:"grid md:grid-cols-4 gap-6",children:[1,2,3,4].map(e=>(0,w.jsx)(i.Zp,{children:(0,w.jsxs)(i.Wu,{className:"p-6",children:[(0,w.jsx)(o.E,{className:"h-8 w-16 mb-2"}),(0,w.jsx)(o.E,{className:"h-4 w-24"})]})},e))})]})}):(0,w.jsx)("div",{className:"container mx-auto px-4 py-8 max-w-7xl",children:(0,w.jsxs)("div",{className:"space-y-6",children:[(0,w.jsx)("div",{className:"block md:hidden",children:(0,w.jsx)("div",{className:"bg-blue-50 border border-blue-200 text-blue-900 rounded-lg p-3 text-sm",children:"For the best experience managing watchlists, use a desktop browser."})}),(0,w.jsxs)("div",{className:"flex items-center justify-between sm:flex-nowrap flex-wrap gap-3",children:[(0,w.jsxs)("div",{children:[(0,w.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Watchlists"}),(0,w.jsx)("p",{className:"text-gray-600 mt-2",children:"Keep track of stocks you're interested in"})]}),(0,w.jsxs)(x.lG,{open:k,onOpenChange:C,children:[(0,w.jsx)(x.zM,{asChild:!0,children:(0,w.jsxs)(r.$,{children:[(0,w.jsx)(u.A,{className:"h-4 w-4 mr-2"}),"Add Stock"]})}),(0,w.jsxs)(x.Cf,{children:[(0,w.jsxs)(x.c7,{children:[(0,w.jsx)(x.L3,{children:"Add Stock to Watchlist"}),(0,w.jsx)(x.rr,{children:"Add a stock to your watchlist to monitor its performance"})]}),(0,w.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),W.symbol){try{const e=(0,b.ay)(),s=Array.isArray(P)?P.length:0;if(Number.isFinite(e.watchlists)&&s>=e.watchlists)return void h.oR.error("Watchlist limit reached for your plan")}catch(s){}try{const e={symbol:W.symbol.toUpperCase(),watchlist_name:W.watchlist_name,notes:W.notes,alert_price:W.alert_price?parseFloat(W.alert_price):null},s=await(0,b.dp)(e.symbol,e);s.success?(h.oR.success("".concat(W.symbol.toUpperCase()," added to watchlist")),R({symbol:"",notes:"",alert_price:"",watchlist_name:"My Watchlist"}),C(!1),E()):h.oR.error(s.message||"Failed to add to watchlist")}catch(t){h.oR.error("Failed to add stock to watchlist")}}else h.oR.error("Please enter a stock symbol")},className:"space-y-4",children:[(0,w.jsxs)("div",{className:"space-y-2",children:[(0,w.jsx)(d.J,{htmlFor:"symbol",children:"Stock Symbol"}),(0,w.jsx)(n.p,{id:"symbol",placeholder:"e.g. AAPL",value:W.symbol,onChange:e=>R((0,a.A)((0,a.A)({},W),{},{symbol:e.target.value})),required:!0})]}),(0,w.jsxs)("div",{className:"space-y-2",children:[(0,w.jsx)(d.J,{htmlFor:"notes",children:"Notes (Optional)"}),(0,w.jsx)(n.p,{id:"notes",placeholder:"Why are you watching this stock?",value:W.notes,onChange:e=>R((0,a.A)((0,a.A)({},W),{},{notes:e.target.value}))})]}),(0,w.jsxs)("div",{className:"space-y-2",children:[(0,w.jsx)(d.J,{htmlFor:"alert_price",children:"Price Alert (Optional)"}),(0,w.jsx)(n.p,{id:"alert_price",type:"number",step:"0.01",placeholder:"e.g. 150.00",value:W.alert_price,onChange:e=>R((0,a.A)((0,a.A)({},W),{},{alert_price:e.target.value}))})]}),(0,w.jsxs)("div",{className:"flex gap-2",children:[(0,w.jsx)(r.$,{type:"submit",className:"flex-1",children:"Add to Watchlist"}),(0,w.jsx)(r.$,{type:"button",variant:"outline",onClick:()=>C(!1),children:"Cancel"})]})]})]})]})]}),(null===_||void 0===_?void 0:_.summary)&&(0,w.jsxs)("div",{className:"grid md:grid-cols-4 gap-6",children:[(0,w.jsx)(i.Zp,{children:(0,w.jsx)(i.Wu,{className:"p-6",children:(0,w.jsxs)("div",{className:"flex items-center justify-between sm:flex-nowrap flex-wrap gap-2",children:[(0,w.jsxs)("div",{children:[(0,w.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Total Items"}),(0,w.jsx)("p",{className:"text-2xl font-bold",children:_.summary.total_items})]}),(0,w.jsx)(y.A,{className:"h-8 w-8 text-blue-500"})]})})}),(0,w.jsx)(i.Zp,{children:(0,w.jsx)(i.Wu,{className:"p-6",children:(0,w.jsxs)("div",{className:"flex items-center justify-between sm:flex-nowrap flex-wrap gap-2",children:[(0,w.jsxs)("div",{children:[(0,w.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Gainers"}),(0,w.jsxs)("div",{className:"flex items-center",children:[(0,w.jsx)("p",{className:"text-2xl font-bold text-green-600",children:_.summary.gainers}),(0,w.jsx)(v.A,{className:"h-5 w-5 text-green-500 ml-2"})]})]}),(0,w.jsx)(v.A,{className:"h-8 w-8 text-green-500"})]})})}),(0,w.jsx)(i.Zp,{children:(0,w.jsx)(i.Wu,{className:"p-6",children:(0,w.jsxs)("div",{className:"flex items-center justify-between sm:flex-nowrap flex-wrap gap-2",children:[(0,w.jsxs)("div",{children:[(0,w.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Losers"}),(0,w.jsxs)("div",{className:"flex items-center",children:[(0,w.jsx)("p",{className:"text-2xl font-bold text-red-600",children:_.summary.losers}),(0,w.jsx)(f.A,{className:"h-5 w-5 text-red-500 ml-2"})]})]}),(0,w.jsx)(f.A,{className:"h-8 w-8 text-red-500"})]})})}),(0,w.jsx)(i.Zp,{children:(0,w.jsx)(i.Wu,{className:"p-6",children:(0,w.jsxs)("div",{className:"flex items-center justify-between sm:flex-nowrap flex-wrap gap-2",children:[(0,w.jsxs)("div",{children:[(0,w.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"With Alerts"}),(0,w.jsx)("p",{className:"text-2xl font-bold",children:P.filter(e=>e.alert_price).length||0})]}),(0,w.jsx)(p.A,{className:"h-8 w-8 text-purple-500"})]})})})]}),(0,w.jsx)(i.Zp,{children:(0,w.jsx)(i.Wu,{className:"p-6",children:(0,w.jsxs)("div",{className:"relative",children:[(0,w.jsx)(N.A,{className:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),(0,w.jsx)(n.p,{placeholder:"Search watchlist...",value:F,onChange:e=>S(e.target.value),className:"pl-10"})]})})}),(0,w.jsxs)(i.Zp,{children:[(0,w.jsxs)(i.aR,{children:[(0,w.jsx)(i.ZB,{children:"Your Watchlist"}),(0,w.jsxs)(i.BT,{children:["Stocks you're monitoring - ",B.length," items"]})]}),(0,w.jsx)(i.Wu,{children:B.length>0?(0,w.jsxs)("div",{className:"space-y-4",children:[(0,w.jsx)("div",{className:"hidden lg:block overflow-x-auto",children:(0,w.jsxs)("table",{className:"w-full",children:[(0,w.jsx)("thead",{children:(0,w.jsxs)("tr",{className:"border-b bg-gray-50",children:[(0,w.jsx)("th",{className:"text-left p-4 font-medium",children:"Symbol"}),(0,w.jsx)("th",{className:"text-left p-4 font-medium",children:"Company"}),(0,w.jsx)("th",{className:"text-right p-4 font-medium",children:"Price"}),(0,w.jsx)("th",{className:"text-right p-4 font-medium",children:"Change"}),(0,w.jsx)("th",{className:"text-right p-4 font-medium",children:"% Change"}),(0,w.jsx)("th",{className:"text-right p-4 font-medium",children:"Volume"}),(0,w.jsx)("th",{className:"text-left p-4 font-medium",children:"Notes"}),(0,w.jsx)("th",{className:"text-center p-4 font-medium",children:"Alert"}),(0,w.jsx)("th",{className:"text-center p-4 font-medium",children:"Actions"})]})}),(0,w.jsx)("tbody",{children:B.map(e=>{var s;return(0,w.jsxs)("tr",{className:"border-b hover:bg-gray-50",children:[(0,w.jsx)("td",{className:"p-4",children:(0,w.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,w.jsx)("div",{className:"w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center",children:(0,w.jsx)("span",{className:"font-bold text-blue-600 text-sm",children:e.symbol.substring(0,2)})}),(0,w.jsx)("div",{children:(0,w.jsx)(l.N_,{to:"/app/stocks/".concat(e.symbol),className:"font-semibold text-blue-600 hover:underline",children:e.symbol})})]})}),(0,w.jsx)("td",{className:"p-4",children:(0,w.jsx)("div",{className:"font-medium text-gray-900",children:e.company_name})}),(0,w.jsx)("td",{className:"p-4 text-right font-medium",children:z(e.current_price)}),(0,w.jsxs)("td",{className:"p-4 text-right ".concat(e.price_change>=0?"text-green-600":"text-red-600"),children:[e.price_change>=0?"+":"",null===(s=e.price_change)||void 0===s?void 0:s.toFixed(2)]}),(0,w.jsx)("td",{className:"p-4 text-right font-medium ".concat(e.price_change_percent>=0?"text-green-600":"text-red-600"),children:(0,w.jsxs)("div",{className:"flex items-center justify-end",children:[e.price_change_percent>=0?(0,w.jsx)(v.A,{className:"h-3 w-3 mr-1"}):(0,w.jsx)(f.A,{className:"h-3 w-3 mr-1"}),U(e.price_change_percent)]})}),(0,w.jsx)("td",{className:"p-4 text-right text-gray-600",children:M(e.volume)}),(0,w.jsx)("td",{className:"p-4",children:(0,w.jsx)("div",{className:"text-sm text-gray-600 max-w-32 truncate",title:e.notes,children:e.notes||"-"})}),(0,w.jsx)("td",{className:"p-4 text-center",children:e.alert_price?(0,w.jsxs)(m.E,{variant:"secondary",className:"text-xs",children:[(0,w.jsx)(p.A,{className:"h-3 w-3 mr-1"}),z(e.alert_price)]}):(0,w.jsx)("span",{className:"text-gray-400",children:"-"})}),(0,w.jsx)("td",{className:"p-4",children:(0,w.jsxs)("div",{className:"flex items-center justify-center space-x-2",children:[(0,w.jsx)(r.$,{size:"sm",variant:"ghost",asChild:!0,title:"View Details",children:(0,w.jsx)(l.N_,{to:"/app/stocks/".concat(e.symbol),children:(0,w.jsx)(j.A,{className:"h-4 w-4"})})}),(0,w.jsx)(r.$,{size:"sm",variant:"ghost",onClick:()=>$(e.id,e.symbol),className:"text-red-600 hover:text-red-700",title:"Remove from Watchlist",children:(0,w.jsx)(g.A,{className:"h-4 w-4"})})]})})]},e.id)})})]})}),(0,w.jsx)("div",{className:"lg:hidden space-y-4",children:B.map(e=>(0,w.jsx)(i.Zp,{className:"hover:shadow-md transition-shadow",children:(0,w.jsxs)(i.Wu,{className:"p-4",children:[(0,w.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,w.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,w.jsx)("div",{className:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center",children:(0,w.jsx)("span",{className:"font-bold text-blue-600",children:e.symbol.substring(0,2)})}),(0,w.jsxs)("div",{children:[(0,w.jsx)(l.N_,{to:"/app/stocks/".concat(e.symbol),className:"font-semibold text-blue-600 hover:underline",children:e.symbol}),(0,w.jsx)("div",{className:"text-sm text-gray-600",children:e.company_name})]})]}),(0,w.jsxs)("div",{className:"text-right",children:[(0,w.jsx)("div",{className:"font-semibold text-lg",children:z(e.current_price)}),(0,w.jsxs)("div",{className:"text-sm font-medium ".concat(e.price_change_percent>=0?"text-green-600":"text-red-600"," flex items-center justify-end"),children:[e.price_change_percent>=0?(0,w.jsx)(v.A,{className:"h-3 w-3 mr-1"}):(0,w.jsx)(f.A,{className:"h-3 w-3 mr-1"}),U(e.price_change_percent)]})]})]}),(0,w.jsxs)("div",{className:"space-y-2",children:[e.notes&&(0,w.jsxs)("div",{className:"text-sm",children:[(0,w.jsx)("span",{className:"text-gray-500",children:"Notes: "}),(0,w.jsx)("span",{className:"text-gray-700",children:e.notes})]}),e.alert_price&&(0,w.jsx)("div",{className:"text-sm",children:(0,w.jsxs)(m.E,{variant:"secondary",className:"text-xs",children:[(0,w.jsx)(p.A,{className:"h-3 w-3 mr-1"}),"Alert at ",z(e.alert_price)]})}),(0,w.jsxs)("div",{className:"flex items-center justify-between pt-2",children:[(0,w.jsxs)("div",{className:"text-sm text-gray-600",children:["Vol: ",M(e.volume)]}),(0,w.jsxs)("div",{className:"flex space-x-2",children:[(0,w.jsx)(r.$,{size:"sm",variant:"ghost",asChild:!0,children:(0,w.jsx)(l.N_,{to:"/app/stocks/".concat(e.symbol),children:(0,w.jsx)(j.A,{className:"h-4 w-4"})})}),(0,w.jsx)(r.$,{size:"sm",variant:"ghost",onClick:()=>$(e.id,e.symbol),className:"text-red-600",children:(0,w.jsx)(g.A,{className:"h-4 w-4"})})]})]})]})]})},e.id))})]}):(0,w.jsxs)("div",{className:"text-center py-12",children:[(0,w.jsx)(y.A,{className:"h-12 w-12 text-gray-300 mx-auto mb-4"}),(0,w.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:F?"No matching stocks found":"Your watchlist is empty"}),(0,w.jsx)("p",{className:"text-gray-600 mb-4",children:F?'No stocks match "'.concat(F,'". Try a different search term.'):"Add stocks to your watchlist to keep track of their performance"}),!F&&(0,w.jsxs)(r.$,{onClick:()=>C(!0),children:[(0,w.jsx)(u.A,{className:"h-4 w-4 mr-2"}),"Add Your First Stock"]})]})})]})]})})}}}]);
//# sourceMappingURL=453.a25bd3bb.chunk.js.map