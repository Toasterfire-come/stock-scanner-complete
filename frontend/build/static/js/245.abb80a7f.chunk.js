/*! For license information please see 245.abb80a7f.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[245],{5245:(e,s,t)=>{t.r(s),t.d(s,{default:()=>_});var a=t(2555),l=t(5043),c=t(5352),r=t(3390),i=t(1140),n=t(2264),d=t(4370),o=t(5949),x=t(1555),m=t(6328),h=t(2580),u=t(9292),j=t(516);const g=(0,t(7784).A)("bookmark",[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z",key:"1fy3hk"}]]);var p=t(5087),v=t(4919),N=t(3782),f=t(830),y=t(99),b=t(579);const _=()=>{const[e,s]=(0,l.useState)(!0),[t,_]=(0,l.useState)(!1),[w,k]=(0,l.useState)([]),[A,C]=(0,l.useState)(""),[S,F]=(0,l.useState)("all"),[$,E]=(0,l.useState)("last_updated"),[z,M]=(0,l.useState)("desc"),[V,T]=(0,l.useState)(1),[W,L]=(0,l.useState)(0),R=(0,l.useRef)(0),U=e=>{let{field:s,children:t,align:a="left"}=e;return(0,b.jsx)("th",{className:"p-4 font-medium text-".concat(a),children:(0,b.jsxs)("button",{onClick:()=>(e=>{$===e?M("asc"===z?"desc":"asc"):(E(e),M("desc")),T(1)})(s),className:"inline-flex items-center gap-1 hover:text-blue-600",children:[(0,b.jsx)("span",{children:t}),$===s&&(0,b.jsx)("span",{className:"text-xs text-muted-foreground",children:"asc"===z?"\u25b2":"\u25bc"})]})})};(0,l.useEffect)(()=>{const e=new AbortController,t=Date.now()+Math.random(),a=R;a.current=t;const l=setTimeout(async()=>{try{let s;const m=A.trim();if(m){var l,c;_(!0),s=await(0,f.ip)(m,{signal:e.signal});const r=Array.isArray(s)?s:(null===(l=s)||void 0===l?void 0:l.results)||(null===(c=s)||void 0===c?void 0:c.data)||[];a.current!==t||e.signal.aborted||(k(Array.isArray(r)?r:[]),L(Array.isArray(r)?r.length:0)),_(!1)}else{var r,i,n;const l={page:V,limit:50,category:"all"===S?void 0:S,sort_by:$,sort_order:z};s=await(0,f.WF)(l,{signal:e.signal});const c=Array.isArray(s)?s:(null===(r=s)||void 0===r?void 0:r.data)||(null===(i=s)||void 0===i?void 0:i.results)||[],m=Number((null===(n=s)||void 0===n?void 0:n.page)||l.page);var d,o,x;if(a.current===t&&!e.signal.aborted&&m===V)k(Array.isArray(c)?c:[]),L(Number((null===(d=s)||void 0===d?void 0:d.total_available)||(null===(o=s)||void 0===o?void 0:o.total_count)||(null===(x=s)||void 0===x?void 0:x.count)||(Array.isArray(c)?c.length:0)))}}catch(h){e.signal.aborted||m.oR.error("Failed to load stocks")}finally{e.signal.aborted||a.current!==t||s(!1)}},A?300:0);return()=>{e.abort(),clearTimeout(l)}},[A,S,$,z,V]);const D=async(e,s)=>{try{await(0,f.dp)(e,{watchlist_name:"My Watchlist",notes:"Added ".concat(s," from stocks page")}),m.oR.success("".concat(e," added to watchlist"))}catch(t){m.oR.error("Failed to add ".concat(e," to watchlist"))}},Z=e=>{e<1||e>Math.max(1,Math.ceil(W/50))||(s(!0),T(e),window.scrollTo({top:0,behavior:"smooth"}))},I=Math.max(1,Math.ceil(W/50)),q=e=>{let{className:s=""}=e;return I>1?(0,b.jsxs)("div",{className:"flex items-center justify-between ".concat(s),children:[(0,b.jsx)("div",{}),(0,b.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,b.jsx)(r.$,{variant:"outline",size:"sm",onClick:()=>Z(V-1),disabled:1===V,children:"Previous"}),(0,b.jsx)("div",{className:"flex space-x-1",children:(I<=3?Array.from({length:I},(e,s)=>s+1):V<=2?[1,2,3]:V>=I-1?[I-2,I-1,I]:[V-1,V,V+1]).map(e=>(0,b.jsx)(r.$,{variant:e===V?"default":"outline",size:"sm",onClick:()=>Z(e),children:e},e))}),(0,b.jsx)(r.$,{variant:"outline",size:"sm",onClick:()=>Z(V+1),disabled:V===I,children:"Next"})]})]}):null},B=A.trim().length>0,P=(0,l.useMemo)(()=>{if(!B)return w;const e=50*(V-1);return w.slice(e,e+50)},[w,B,V]),G=B?P:w,H=G.length>200,K=e=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(Number(e||0)),Q=e=>{const s=Number(e||0);return Number.isFinite(s)?s>=1e9?"".concat((s/1e9).toFixed(1),"B"):s>=1e6?"".concat((s/1e6).toFixed(1),"M"):s>=1e3?"".concat((s/1e3).toFixed(0),"K"):s.toLocaleString():"0"},Y=e=>{const s=Number(e||0);return Number.isFinite(s)?s>=1e12?"$".concat((s/1e12).toFixed(1),"T"):s>=1e9?"$".concat((s/1e9).toFixed(1),"B"):s>=1e6?"$".concat((s/1e6).toFixed(1),"M"):"$".concat(s.toLocaleString()):"$0"},J=e=>"".concat((Number(e)||0)>0?"+":"").concat((Number(e)||0).toFixed(2),"%"),O=e=>["etf","warrant","right","unit","etn"].includes((e||"").toLowerCase()),X=e=>{const s=(e||"").toUpperCase();if(!s)return null;const t="EQUITY"===s?"default":"secondary";return(0,b.jsx)(o.E,{variant:t,className:"ml-2",children:s})};return e&&0===G.length?(0,b.jsx)("div",{className:"container mx-auto px-4 py-8 max-w-7xl",children:(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)(x.E,{className:"h-8 w-48"}),(0,b.jsx)(x.E,{className:"h-10 w-32"})]}),(0,b.jsx)(i.Zp,{children:(0,b.jsx)(i.Wu,{className:"p-6",children:(0,b.jsxs)("div",{className:"flex gap-4",children:[(0,b.jsx)(x.E,{className:"h-10 flex-1"}),(0,b.jsx)(x.E,{className:"h-10 w-48"}),(0,b.jsx)(x.E,{className:"h-10 w-32"})]})})}),(0,b.jsx)("div",{className:"grid gap-4",children:[1,2,3,4,5].map(e=>(0,b.jsx)(i.Zp,{children:(0,b.jsx)(i.Wu,{className:"p-6",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,b.jsx)(x.E,{className:"h-12 w-12 rounded"}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(x.E,{className:"h-6 w-32"}),(0,b.jsx)(x.E,{className:"h-4 w-48"})]})]}),(0,b.jsxs)("div",{className:"text-right space-y-2",children:[(0,b.jsx)(x.E,{className:"h-6 w-24"}),(0,b.jsx)(x.E,{className:"h-4 w-16"})]})]})})},e))})]})}):(0,b.jsx)("div",{className:"container mx-auto px-4 py-8 max-w-7xl",children:(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"All Stocks"}),(0,b.jsxs)("p",{className:"text-gray-600 mt-2",children:["Browse and search through ",Number(W||0).toLocaleString()," stocks"]})]}),(0,b.jsx)(r.$,{asChild:!0,children:(0,b.jsxs)(c.N_,{to:"/app/screeners/new",children:[(0,b.jsx)(h.A,{className:"h-4 w-4 mr-2"}),"Create Screener"]})})]}),(0,b.jsx)(i.Zp,{children:(0,b.jsx)(i.Wu,{className:"p-6",children:(0,b.jsxs)("div",{className:"flex flex-col lg:flex-row gap-4",children:[(0,b.jsx)("div",{className:"flex-1",children:(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)(u.A,{className:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),(0,b.jsx)(n.p,{placeholder:"Search stocks by symbol or company name...",value:A,onChange:e=>{T(1),C(e.target.value)},className:"pl-10"}),t&&(0,b.jsx)(j.A,{className:"absolute right-3 top-3 h-4 w-4 text-gray-400 animate-spin"})]})}),(0,b.jsxs)(d.l6,{value:S,onValueChange:e=>{T(1),F(e)},children:[(0,b.jsx)(d.bq,{className:"w-48",children:(0,b.jsx)(d.yv,{placeholder:"Category"})}),(0,b.jsxs)(d.gC,{children:[(0,b.jsx)(d.eb,{value:"all",children:"All Stocks"}),(0,b.jsx)(d.eb,{value:"gainers",children:"Top Gainers"}),(0,b.jsx)(d.eb,{value:"losers",children:"Top Losers"}),(0,b.jsx)(d.eb,{value:"high_volume",children:"High Volume"}),(0,b.jsx)(d.eb,{value:"large_cap",children:"Large Cap"}),(0,b.jsx)(d.eb,{value:"small_cap",children:"Small Cap"})]})]}),(0,b.jsxs)(d.l6,{value:$,onValueChange:e=>{T(1),E(e)},children:[(0,b.jsx)(d.bq,{className:"w-48",children:(0,b.jsx)(d.yv,{placeholder:"Sort by"})}),(0,b.jsxs)(d.gC,{children:[(0,b.jsx)(d.eb,{value:"last_updated",children:"Recently Updated"}),(0,b.jsx)(d.eb,{value:"price",children:"Price"}),(0,b.jsx)(d.eb,{value:"volume",children:"Volume"}),(0,b.jsx)(d.eb,{value:"market_cap",children:"Market Cap"}),(0,b.jsx)(d.eb,{value:"change_percent",children:"% Change"})]})]}),(0,b.jsxs)(d.l6,{value:z,onValueChange:e=>{T(1),M(e)},children:[(0,b.jsx)(d.bq,{className:"w-32",children:(0,b.jsx)(d.yv,{})}),(0,b.jsxs)(d.gC,{children:[(0,b.jsx)(d.eb,{value:"desc",children:"Desc"}),(0,b.jsx)(d.eb,{value:"asc",children:"Asc"})]})]})]})})}),(0,b.jsx)(q,{}),(0,b.jsxs)(i.Zp,{children:[(0,b.jsx)(i.aR,{}),(0,b.jsx)(i.Wu,{children:0===G.length?(0,b.jsxs)("div",{className:"text-center py-12",children:[(0,b.jsx)(u.A,{className:"h-12 w-12 text-gray-300 mx-auto mb-4"}),(0,b.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No stocks found"}),(0,b.jsx)("p",{className:"text-gray-600",children:A?'No results found for "'.concat(A,'". Try a different search term.'):"No stocks available with the current filters."})]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{className:"hidden lg:block",children:[(0,b.jsx)("div",{className:"overflow-x-auto",children:(0,b.jsx)("table",{className:"w-full",children:(0,b.jsx)("thead",{className:"sticky top-0 z-10",children:(0,b.jsxs)("tr",{className:"border-b bg-gray-50",children:[(0,b.jsx)(U,{field:"ticker",children:"Symbol"}),(0,b.jsx)(U,{field:"company_name",children:"Company"}),(0,b.jsx)(U,{field:"price",align:"right",children:"Price"}),(0,b.jsx)(U,{field:"price_change_today",align:"right",children:"Change"}),(0,b.jsx)(U,{field:"change_percent",align:"right",children:"% Change"}),(0,b.jsx)(U,{field:"volume",align:"right",children:"Volume"}),(0,b.jsx)(U,{field:"market_cap",align:"right",children:"Market Cap"}),(0,b.jsx)("th",{className:"text-center p-4 font-medium",children:"Actions"})]})})})}),H?(0,b.jsx)("div",{className:"border rounded",children:(0,b.jsx)(y.A,{items:G,itemSize:56,height:560,row:e=>{var s,t,l,i;let{index:n,style:d,item:o}=e;return(0,b.jsxs)("div",{className:"border-b hover:bg-gray-50 grid",style:(0,a.A)((0,a.A)({},d),{},{display:"grid",gridTemplateColumns:"2fr 3fr 1fr 1fr 1fr 1fr 1fr 1fr",alignItems:"center"}),children:[(0,b.jsxs)("div",{className:"p-4 flex items-center space-x-3",children:[(0,b.jsx)("div",{className:"w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center",children:(0,b.jsx)("span",{className:"font-bold text-blue-600 text-sm",children:null===(s=o.ticker)||void 0===s?void 0:s.substring(0,2)})}),(0,b.jsxs)("div",{children:[(0,b.jsx)(c.N_,{to:"/app/stocks/".concat(o.ticker),className:"font-semibold text-blue-600 hover:underline",children:o.ticker}),(0,b.jsxs)("div",{className:"text-xs text-gray-500 flex items-center",children:[o.exchange,X(o.instrument_type)]})]})]}),(0,b.jsx)("div",{className:"p-4 font-medium text-gray-900",children:o.company_name}),(0,b.jsx)("div",{className:"p-4 text-right font-medium",children:o.formatted_price||K(o.current_price)}),(0,b.jsxs)("div",{className:"".concat((null!==(t=o.is_gaining)&&void 0!==t?t:Number(o.price_change_today)>=0)?"text-green-600":"text-red-600"," p-4 text-right"),children:[(null!==(l=o.price_change_today)&&void 0!==l?l:0)>=0?"+":"",Number(o.price_change_today||0).toFixed(2)]}),(0,b.jsx)("div",{className:"p-4 text-right font-medium ".concat((null!==(i=o.is_gaining)&&void 0!==i?i:Number(o.change_percent)>=0)?"text-green-600":"text-red-600"),children:o.formatted_change||J(o.change_percent)}),(0,b.jsx)("div",{className:"p-4 text-right text-gray-600",children:o.formatted_volume||Q(o.volume)}),(0,b.jsx)("div",{className:"p-4 text-right text-gray-600",children:O(o.instrument_type)?"-":o.formatted_market_cap||Y(o.market_cap)}),(0,b.jsxs)("div",{className:"p-4 flex items-center justify-center space-x-2",children:[(0,b.jsx)(r.$,{size:"sm",variant:"ghost",onClick:()=>D(o.ticker,o.company_name),title:"Add to Watchlist",children:(0,b.jsx)(g,{className:"h-4 w-4"})}),(0,b.jsx)(r.$,{size:"sm",variant:"ghost",asChild:!0,title:"View Details",children:(0,b.jsx)(c.N_,{to:"/app/stocks/".concat(o.ticker),children:(0,b.jsx)(p.A,{className:"h-4 w-4"})})})]})]})}})}):(0,b.jsx)("div",{className:"hidden lg:block overflow-x-auto",children:(0,b.jsx)("table",{className:"w-full",children:(0,b.jsx)("tbody",{children:G.map(e=>{var s,t,a,l,i;return(0,b.jsxs)("tr",{className:"border-b hover:bg-gray-50",children:[(0,b.jsx)("td",{className:"p-4",children:(0,b.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,b.jsx)("div",{className:"w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center",children:(0,b.jsx)("span",{className:"font-bold text-blue-600 text-sm",children:e.ticker.substring(0,2)})}),(0,b.jsxs)("div",{children:[(0,b.jsx)(c.N_,{to:"/app/stocks/".concat(e.ticker),className:"font-semibold text-blue-600 hover:underline",children:e.ticker}),(0,b.jsxs)("div",{className:"text-xs text-gray-500 flex items-center",children:[e.exchange,X(e.instrument_type)]})]})]})}),(0,b.jsx)("td",{className:"p-4",children:(0,b.jsx)("div",{className:"font-medium text-gray-900",children:e.company_name})}),(0,b.jsx)("td",{className:"p-4 text-right font-medium",children:e.formatted_price||K(e.current_price)}),(0,b.jsxs)("td",{className:"".concat((null!==(s=e.is_gaining)&&void 0!==s?s:Number(e.price_change_today)>=0)?"text-green-600":"text-red-600"," p-4 text-right"),children:[(null!==(t=e.price_change_today)&&void 0!==t?t:0)>=0?"+":"",null===(a=e.price_change_today)||void 0===a?void 0:a.toFixed(2)]}),(0,b.jsx)("td",{className:"p-4 text-right font-medium ".concat((null!==(l=e.is_gaining)&&void 0!==l?l:Number(e.change_percent)>=0)?"text-green-600":"text-red-600"),children:(0,b.jsxs)("div",{className:"flex items-center justify-end",children:[(null!==(i=e.is_gaining)&&void 0!==i?i:Number(e.change_percent)>=0)?(0,b.jsx)(v.A,{className:"h-3 w-3 mr-1"}):(0,b.jsx)(N.A,{className:"h-3 w-3 mr-1"}),e.formatted_change||J(e.change_percent)]})}),(0,b.jsx)("td",{className:"p-4 text-right text-gray-600",children:e.formatted_volume||Q(e.volume)}),(0,b.jsx)("td",{className:"p-4 text-right text-gray-600",children:O(e.instrument_type)?"-":e.formatted_market_cap||Y(e.market_cap)}),(0,b.jsx)("td",{className:"p-4",children:(0,b.jsxs)("div",{className:"flex items-center justify-center space-x-2",children:[(0,b.jsx)(r.$,{size:"sm",variant:"ghost",onClick:()=>D(e.ticker,e.company_name),title:"Add to Watchlist",children:(0,b.jsx)(g,{className:"h-4 w-4"})}),(0,b.jsx)(r.$,{size:"sm",variant:"ghost",asChild:!0,title:"View Details",children:(0,b.jsx)(c.N_,{to:"/app/stocks/".concat(e.ticker),children:(0,b.jsx)(p.A,{className:"h-4 w-4"})})})]})})]},e.ticker)})})})})]}),(0,b.jsx)("div",{className:"lg:hidden space-y-4",children:G.map(e=>{var s,t;return(0,b.jsx)(i.Zp,{className:"hover:shadow-md transition-shadow",children:(0,b.jsxs)(i.Wu,{className:"p-4",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,b.jsx)("div",{className:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center",children:(0,b.jsx)("span",{className:"font-bold text-blue-600",children:e.ticker.substring(0,2)})}),(0,b.jsxs)("div",{children:[(0,b.jsx)(c.N_,{to:"/app/stocks/".concat(e.ticker),className:"font-semibold text-blue-600 hover:underline",children:e.ticker}),(0,b.jsxs)("div",{className:"text-sm text-gray-600 flex items-center",children:[e.company_name,X(e.instrument_type)]}),(0,b.jsx)("div",{className:"text-xs text-gray-500",children:e.exchange})]})]}),(0,b.jsxs)("div",{className:"text-right",children:[(0,b.jsx)("div",{className:"font-semibold text-lg",children:e.formatted_price||K(e.current_price)}),(0,b.jsxs)("div",{className:"text-sm font-medium flex items-center justify-end ".concat((null!==(s=e.is_gaining)&&void 0!==s?s:Number(e.change_percent)>=0)?"text-green-600":"text-red-600"),children:[(null!==(t=e.is_gaining)&&void 0!==t?t:Number(e.change_percent)>=0)?(0,b.jsx)(v.A,{className:"h-3 w-3 mr-1"}):(0,b.jsx)(N.A,{className:"h-3 w-3 mr-1"}),e.formatted_change||J(e.change_percent)]}),(0,b.jsxs)("div",{className:"text-xs text-gray-500",children:["Vol: ",e.formatted_volume||Q(e.volume)]})]})]}),(0,b.jsxs)("div",{className:"flex items-center justify-between mt-4",children:[(0,b.jsx)("div",{className:"text-sm text-gray-600",children:O(e.instrument_type)?"Instrument: "+(e.instrument_type||"N/A").toUpperCase():"Market Cap: ".concat(e.formatted_market_cap||Y(e.market_cap))}),(0,b.jsxs)("div",{className:"flex space-x-2",children:[(0,b.jsx)(r.$,{size:"sm",variant:"ghost",onClick:()=>D(e.ticker,e.company_name),children:(0,b.jsx)(g,{className:"h-4 w-4"})}),(0,b.jsx)(r.$,{size:"sm",variant:"ghost",asChild:!0,children:(0,b.jsx)(c.N_,{to:"/app/stocks/".concat(e.ticker),children:(0,b.jsx)(p.A,{className:"h-4 w-4"})})})]})]})]})},e.ticker)})}),(0,b.jsx)(q,{className:"mt-6"})]})})]})]})})}}}]);
//# sourceMappingURL=245.abb80a7f.chunk.js.map