"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[69],{5069:(e,t,s)=>{s.r(t),s.d(t,{default:()=>R});var r=s(2555),a=s(5043),o=s(3390),l=s(1140),i=s(2264),c=s(1981),n=(s(5949),s(1555)),d=s(5598),m=s(6328),x=s(3033),h=s(8646),u=s(3062),p=s(7104),f=s(1360),j=s(9855),g=s(3782),v=s(4919),y=s(6150),N=s(108),b=s(7734),_=s(168),w=s(3839),S=s(2185),k=s(6026),C=s(5748),F=s(877),A=s(830),P=s(579);const R=()=>{const[e,t]=(0,a.useState)(!0),[s,R]=(0,a.useState)(null),[B,E]=(0,a.useState)([]),[T,L]=(0,a.useState)(null),[U,V]=(0,a.useState)(!1),[O,W]=(0,a.useState)("My Portfolio"),[Z,D]=(0,a.useState)(null),[M,$]=(0,a.useState)(!1),[G,z]=(0,a.useState)({symbol:"",shares:"",avg_cost:"",portfolio_name:"My Portfolio"}),[I,J]=(0,a.useState)(""),[q,K]=(0,a.useState)(null),[Y,H]=(0,a.useState)(!1),[Q,X]=(0,a.useState)([]),[ee,te]=(0,a.useState)(!1),[se,re]=(0,a.useState)({}),[ae,oe]=(0,a.useState)({});(0,a.useEffect)(()=>{le()},[]),(0,a.useEffect)(()=>{const e=(G.symbol||"").trim();if(!e)return void X([]);te(!0);const t=setTimeout(async()=>{try{const t=await(0,A.ip)(e).catch(()=>null),s=Array.isArray(t)?t:(null===t||void 0===t?void 0:t.results)||(null===t||void 0===t?void 0:t.data)||[];X((s||[]).slice(0,6))}finally{te(!1)}},200);return()=>clearTimeout(t)},[G.symbol]),(0,a.useEffect)(()=>{const e=(G.symbol||"").trim();if(!e)return void K(null);let t=!0;return(async()=>{try{var s;H(!0);const r=await(0,A.Tw)(e).catch(()=>null),a=Number((null===r||void 0===r||null===(s=r.data)||void 0===s?void 0:s.current_price)||(null===r||void 0===r?void 0:r.current_price)||0)||null;t&&K(a)}finally{t&&H(!1)}})(),()=>{t=!1}},[G.symbol]),(0,a.useEffect)(()=>{const e=Number(I);if(!e||!q||q<=0)return;const t=e/q;z(e=>(0,r.A)((0,r.A)({},e),{},{shares:t.toFixed(6),avg_cost:q.toFixed(2)}))},[I,q]);const le=async()=>{t(!0);try{var e;const[t,r,a]=await Promise.all([(0,A.sB)().catch(()=>({success:!0,data:{portfolios:[],count:0}})),(0,A.h0)(T?{portfolio_id:T}:{}).catch(()=>({success:!0,data:[],summary:{total_value:0,total_gain_loss:0,total_gain_loss_percent:0,total_holdings:0}})),(0,A.WF)({}).catch(()=>[])]),o=Array.isArray(null===t||void 0===t||null===(e=t.data)||void 0===e?void 0:e.portfolios)?t.data.portfolios:[];E(o),!T&&o.length>0&&L(o[0].id),R(r),D(null);try{const e={},t=Array.isArray(null===a||void 0===a?void 0:a.results)?a.results:Array.isArray(a)?a:[];for(const s of t){const t=String((null===s||void 0===s?void 0:s.symbol)||(null===s||void 0===s?void 0:s.ticker)||"").toUpperCase(),r=Number(null===s||void 0===s?void 0:s.current_price);t&&Number.isFinite(r)&&(e[t]=r)}oe(e)}catch(s){oe({})}}catch(r){console.error("Failed to load portfolio data:",r),m.oR.error("Failed to load portfolio data")}finally{t(!1)}},ie=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const s=Number(e);return Number.isFinite(s)?s:t},ce=e=>{const t=ie(e,0);return new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:2}).format(t)},ne=e=>{const t=ie(e,0);return"".concat(t>=0?"+":"").concat(t.toFixed(2),"%")},de=Z||(null===s||void 0===s?void 0:s.summary)||{total_value:0,total_gain_loss:0,total_gain_loss_percent:0,day_change:0,day_change_percent:0},me={total_value:ie(de.total_value,0),total_gain_loss:ie(de.total_gain_loss,0),total_gain_loss_percent:ie(de.total_gain_loss_percent,0),day_change:ie(de.day_change,0),day_change_percent:ie(de.day_change_percent,0)},xe=Array.isArray(null===s||void 0===s?void 0:s.data)?s.data:[],he=e=>{const t=ie(e.shares,0),s=ie(e.avg_cost,0),r=String(e.symbol||e.ticker||"").toUpperCase(),a=ie(ae[r],NaN),o=ie(e.current_value,NaN),l=Number.isFinite(a)?a:t>0&&Number.isFinite(o)?o/t:0;return{shares:t,purchasePrice:s,currentPrice:l,currentValue:l*t,costBasis:t*s,profit:(l-s)*t,ratio:s>0?l/s:0,percentChange:s>0?(l-s)/s*100:0}},ue=xe.reduce((e,t)=>{const s=he(t);return e.currentValue+=s.currentValue,e.costBasis+=s.costBasis,e.profit+=s.profit,e},{currentValue:0,costBasis:0,profit:0}),pe=ue.costBasis>0?(ue.currentValue-ue.costBasis)/ue.costBasis*100:0,fe="portfolio_value_timeseries_csv",je="portfolio_profit_timeseries_csv",ge=e=>(e=>{try{if(!e||"string"!==typeof e)return[];const t=e.trim().split(/\r?\n/);return t.length<=1?[]:t.slice(1).map(e=>e.split(",")).filter(e=>e.length>=2).map(e=>({ts:Number(e[0]),value:Number(e[1])})).filter(e=>Number.isFinite(e.ts)&&Number.isFinite(e.value))}catch(t){return[]}})(localStorage.getItem(e)||""),ve=(e,t)=>localStorage.setItem(e,(e=>{const t=(e||[]).map(e=>"".concat(e.ts,",").concat(e.value)).join("\n");return"".concat("timestamp,value","\n").concat(t)})(t)),ye=(e,t)=>{const s=Date.now(),r=ge(e),a=r[r.length-1];if(a&&s-a.ts<6e5)a.ts=s,a.value=t,ve(e,r);else{const a=[...r,{ts:s,value:t}].slice(-500);ve(e,a)}};(0,a.useEffect)(()=>{try{ye(fe,ue.currentValue),ye(je,ue.profit)}catch(e){}},[ue.currentValue,ue.profit]);const Ne=ge(fe),be=ge(je),_e=e=>e.map(e=>({x:new Date(e.ts).toLocaleString([],{hour:"2-digit",minute:"2-digit",month:"short",day:"2-digit"}),y:e.value})),we=_e(Ne),Se=_e(be);return e?(0,P.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,P.jsxs)("div",{className:"flex justify-between items-center mb-8",children:[(0,P.jsxs)("div",{children:[(0,P.jsx)(n.E,{className:"h-8 w-64 mb-2"}),(0,P.jsx)(n.E,{className:"h-4 w-96"})]}),(0,P.jsx)(n.E,{className:"h-10 w-32"})]}),(0,P.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[1,2,3,4].map(e=>(0,P.jsx)(l.Zp,{children:(0,P.jsxs)(l.Wu,{className:"p-6",children:[(0,P.jsx)(n.E,{className:"h-4 w-24 mb-2"}),(0,P.jsx)(n.E,{className:"h-8 w-32 mb-2"}),(0,P.jsx)(n.E,{className:"h-3 w-20"})]})},e))})]}):(0,P.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,P.jsxs)("div",{className:"flex justify-between items-center mb-8",children:[(0,P.jsxs)("div",{className:"flex items-center gap-3",children:[(0,P.jsxs)("div",{children:[(0,P.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Portfolio"}),(0,P.jsx)("p",{className:"text-gray-600",children:"Track and analyze your investments"})]}),(0,P.jsxs)("div",{className:"ml-4",children:[(0,P.jsx)("label",{htmlFor:"portfolio-select",className:"sr-only",children:"Select Portfolio"}),(0,P.jsxs)("select",{id:"portfolio-select",className:"border rounded-md px-2 py-2 text-sm",value:T||"",onChange:e=>L(e.target.value?Number(e.target.value):null),children:[0===B.length&&(0,P.jsx)("option",{value:"",children:"No portfolios"}),B.map(e=>(0,P.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,P.jsx)(o.$,{variant:"outline",onClick:()=>V(!0),children:"New Portfolio"})]}),(0,P.jsxs)("div",{className:"flex gap-2",children:[(0,P.jsx)(o.$,{variant:"outline",onClick:async()=>{try{if(!T)return void m.oR.error("Select a portfolio");const e=await(0,A.JM)(T);if(null!==e&&void 0!==e&&e.success&&null!==e&&void 0!==e&&e.url){const t="".concat(window.location.origin).concat(e.url);await navigator.clipboard.writeText(t),m.oR.success("Share link copied")}else m.oR.error("Failed to create share link")}catch(e){m.oR.error("Failed to create share link")}},children:"Share"}),(0,P.jsxs)(o.$,{onClick:async()=>{try{const e=await(0,A.Z5)(),t=new Blob([e],{type:"text/csv"}),s=window.URL.createObjectURL(t),r=document.createElement("a");r.style.display="none",r.href=s,r.download="portfolio_".concat((new Date).toISOString().split("T")[0],".csv"),document.body.appendChild(r),r.click(),window.URL.revokeObjectURL(s),m.oR.success("Portfolio exported successfully")}catch(e){console.error("Failed to export portfolio:",e);try{const e=[["Symbol","Company","Shares","Avg Cost","Current Price","Current Value","Gain/Loss","Gain/Loss %"]];((null===s||void 0===s?void 0:s.data)||[]).forEach(t=>{const s=Number(t.shares||0),r=Number(t.current_value&&s?t.current_value/s:0),a=Number(t.current_value||r*s),o=Number(t.avg_cost||0),l=a-s*o,i=s*o>0?l/(s*o)*100:0;e.push([t.symbol,String(t.name||"").replace(/,/g," "),s,o.toFixed(2),r.toFixed(2),a.toFixed(2),l.toFixed(2),i.toFixed(2)])});const t=e.map(e=>e.join(",")).join("\n"),r=new Blob([t],{type:"text/csv"}),a=window.URL.createObjectURL(r),o=document.createElement("a");o.style.display="none",o.href=a,o.download="portfolio_local_".concat((new Date).toISOString().split("T")[0],".csv"),document.body.appendChild(o),o.click(),window.URL.revokeObjectURL(a),m.oR.success("Portfolio exported (local)")}catch(t){m.oR.error("Failed to export portfolio")}}},variant:"outline",children:[(0,P.jsx)(p.A,{className:"h-4 w-4 mr-2"}),"Export"]}),(0,P.jsxs)(d.lG,{open:M,onOpenChange:$,children:[(0,P.jsx)(d.zM,{asChild:!0,children:(0,P.jsxs)(o.$,{children:[(0,P.jsx)(f.A,{className:"h-4 w-4 mr-2"}),"Add Stock"]})}),(0,P.jsxs)(d.Cf,{children:[(0,P.jsxs)(d.c7,{children:[(0,P.jsx)(d.L3,{children:"Add Stock to Portfolio"}),(0,P.jsx)(d.rr,{children:"Enter the stock details to add to your portfolio"})]}),(0,P.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),G.symbol&&G.shares&&G.avg_cost){try{const e=(0,A.ay)(),t=Array.isArray(xe)?xe.length:0;if(Number.isFinite(e.portfolios)&&0===e.portfolios&&t>=1)return void m.oR.error("Your plan does not include portfolios");if(Number.isFinite(e.portfolios)&&e.portfolios>0&&t>=e.portfolios)return void m.oR.error("Portfolio limit reached for your plan")}catch(t){}try{const e=await(0,A.Gg)({symbol:G.symbol.toUpperCase(),shares:parseFloat(G.shares),avg_cost:parseFloat(G.avg_cost),portfolio_name:G.portfolio_name});if(!e||!e.success)throw new Error((null===e||void 0===e?void 0:e.message)||"Failed to add stock");m.oR.success("Stock added to portfolio successfully"),$(!1),z({symbol:"",shares:"",avg_cost:"",portfolio_name:"My Portfolio"}),le()}catch(s){console.error("Failed to add stock:",s),m.oR.error(s.message||"Failed to add stock to portfolio")}}else m.oR.error("Please fill in all required fields")},className:"space-y-4",children:[(0,P.jsxs)("div",{children:[(0,P.jsx)(c.J,{htmlFor:"symbol",children:"Stock Symbol *"}),(0,P.jsx)(i.p,{id:"symbol",value:G.symbol,onChange:e=>z((0,r.A)((0,r.A)({},G),{},{symbol:e.target.value.toUpperCase()})),placeholder:"AAPL",required:!0}),ee&&(0,P.jsx)("div",{className:"text-xs text-gray-500 mt-1",children:"Searching..."}),Q.length>0&&(0,P.jsx)("div",{className:"mt-2 border rounded-md bg-white max-h-48 overflow-auto",children:Q.map((e,t)=>(0,P.jsxs)("button",{type:"button",className:"w-full text-left px-3 py-2 hover:bg-gray-50",onClick:()=>{const t=String(e.ticker||e.symbol||"").toUpperCase();z((0,r.A)((0,r.A)({},G),{},{symbol:t})),X([])},children:[(0,P.jsx)("span",{className:"font-medium mr-2",children:String(e.ticker||e.symbol||"").toUpperCase()}),(0,P.jsx)("span",{className:"text-gray-600 text-sm",children:String(e.company_name||e.name||"")})]},"".concat(e.ticker||e.symbol,"-").concat(t)))})]}),(0,P.jsxs)("div",{children:[(0,P.jsx)(c.J,{htmlFor:"amount",children:"Amount to Invest (optional)"}),(0,P.jsx)(i.p,{id:"amount",type:"number",step:"0.01",value:I,onChange:e=>J(e.target.value),placeholder:"1000.00"}),q?(0,P.jsxs)("div",{className:"text-xs text-gray-600 mt-1",children:["Current price ~ ",ce(q),Y?" (updating...)":""]}):(0,P.jsx)("div",{className:"text-xs text-gray-500 mt-1",children:"Enter a valid symbol to load current price"})]}),(0,P.jsxs)("div",{children:[(0,P.jsx)(c.J,{htmlFor:"shares",children:"Number of Shares *"}),(0,P.jsx)(i.p,{id:"shares",type:"number",step:"0.001",value:G.shares,onChange:e=>z((0,r.A)((0,r.A)({},G),{},{shares:e.target.value})),placeholder:"100",required:!0})]}),(0,P.jsxs)("div",{children:[(0,P.jsx)(c.J,{htmlFor:"avg_cost",children:"Average Cost per Share *"}),(0,P.jsx)(i.p,{id:"avg_cost",type:"number",step:"0.01",value:G.avg_cost,onChange:e=>z((0,r.A)((0,r.A)({},G),{},{avg_cost:e.target.value})),placeholder:"150.00",required:!0})]}),(0,P.jsxs)("div",{children:[(0,P.jsx)(c.J,{htmlFor:"portfolio_name",children:"Portfolio Name"}),(0,P.jsx)(i.p,{id:"portfolio_name",value:G.portfolio_name,onChange:e=>z((0,r.A)((0,r.A)({},G),{},{portfolio_name:e.target.value})),placeholder:"My Portfolio"})]}),(0,P.jsx)(o.$,{type:"submit",className:"w-full",children:"Add to Portfolio"})]})]})]})]})]}),(0,P.jsx)(d.lG,{open:U,onOpenChange:V,children:(0,P.jsxs)(d.Cf,{children:[(0,P.jsxs)(d.c7,{children:[(0,P.jsx)(d.L3,{children:"Create Portfolio"}),(0,P.jsx)(d.rr,{children:"Name your new portfolio. Limits are enforced per your plan."})]}),(0,P.jsxs)("form",{onSubmit:async e=>{e.preventDefault();const t=(O||"").trim();if(t)try{const e=await(0,A.Fl)({name:t});var s;if(null!==e&&void 0!==e&&e.success)m.oR.success("Portfolio created"),V(!1),W("My Portfolio"),await le(),null!==(s=e.data)&&void 0!==s&&s.portfolio_id&&L(e.data.portfolio_id);else m.oR.error((null===e||void 0===e?void 0:e.error)||"Failed to create portfolio")}catch(o){var r,a;m.oR.error((null===o||void 0===o||null===(r=o.response)||void 0===r||null===(a=r.data)||void 0===a?void 0:a.error)||(null===o||void 0===o?void 0:o.message)||"Failed to create portfolio")}else m.oR.error("Enter a portfolio name")},className:"space-y-4",children:[(0,P.jsxs)("div",{children:[(0,P.jsx)(c.J,{htmlFor:"np-name",children:"Portfolio Name"}),(0,P.jsx)(i.p,{id:"np-name",value:O,onChange:e=>W(e.target.value),placeholder:"My Portfolio"})]}),(0,P.jsxs)("div",{className:"flex gap-2",children:[(0,P.jsx)(o.$,{type:"submit",className:"flex-1",children:"Create"}),(0,P.jsx)(o.$,{type:"button",variant:"outline",onClick:()=>V(!1),children:"Cancel"})]})]})]})}),(0,P.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[(0,P.jsx)(l.Zp,{className:"bg-gradient-to-r from-blue-50 to-blue-100",children:(0,P.jsx)(l.Wu,{className:"p-6",children:(0,P.jsxs)("div",{className:"flex items-center justify-between",children:[(0,P.jsxs)("div",{children:[(0,P.jsx)("p",{className:"text-sm text-gray-600",children:"Total Value"}),(0,P.jsx)("p",{className:"text-2xl font-bold",children:ce(me.total_value)})]}),(0,P.jsx)(u.A,{className:"h-8 w-8 text-blue-600"})]})})}),(0,P.jsx)(l.Zp,{className:"bg-gradient-to-r ".concat(me.total_gain_loss>=0?"from-green-50 to-green-100":"from-red-50 to-red-100"),children:(0,P.jsx)(l.Wu,{className:"p-6",children:(0,P.jsxs)("div",{className:"flex items-center justify-between",children:[(0,P.jsxs)("div",{children:[(0,P.jsx)("p",{className:"text-sm text-gray-600",children:"Total Gain/Loss"}),(0,P.jsx)("p",{className:"text-2xl font-bold ".concat(me.total_gain_loss>=0?"text-green-600":"text-red-600"),children:ce(me.total_gain_loss)}),(0,P.jsx)("p",{className:"text-sm ".concat(me.total_gain_loss>=0?"text-green-600":"text-red-600"),children:ne(me.total_gain_loss_percent)})]}),me.total_gain_loss>=0?(0,P.jsx)(v.A,{className:"h-8 w-8 text-green-600"}):(0,P.jsx)(g.A,{className:"h-8 w-8 text-red-600"})]})})}),(0,P.jsx)(l.Zp,{className:"bg-gradient-to-r ".concat(me.day_change>=0?"from-green-50 to-green-100":"from-red-50 to-red-100"),children:(0,P.jsx)(l.Wu,{className:"p-6",children:(0,P.jsxs)("div",{className:"flex items-center justify-between",children:[(0,P.jsxs)("div",{children:[(0,P.jsx)("p",{className:"text-sm text-gray-600",children:"Today's Change"}),(0,P.jsx)("p",{className:"text-2xl font-bold ".concat(me.day_change>=0?"text-green-600":"text-red-600"),children:ce(me.day_change||0)}),(0,P.jsx)("p",{className:"text-sm ".concat(me.day_change>=0?"text-green-600":"text-red-600"),children:ne(me.day_change_percent||0)})]}),(0,P.jsx)(h.A,{className:"h-8 w-8 text-gray-600"})]})})}),(0,P.jsx)(l.Zp,{className:"bg-gradient-to-r from-purple-50 to-purple-100",children:(0,P.jsx)(l.Wu,{className:"p-6",children:(0,P.jsxs)("div",{className:"flex items-center justify-between",children:[(0,P.jsxs)("div",{children:[(0,P.jsx)("p",{className:"text-sm text-gray-600",children:"Holdings"}),(0,P.jsx)("p",{className:"text-2xl font-bold",children:xe.length}),(0,P.jsx)("p",{className:"text-sm text-gray-600",children:"Stocks tracked"})]}),(0,P.jsx)(x.A,{className:"h-8 w-8 text-purple-600"})]})})}),(0,P.jsx)(l.Zp,{className:"bg-gradient-to-r from-indigo-50 to-indigo-100",children:(0,P.jsx)(l.Wu,{className:"p-6",children:(0,P.jsx)("div",{className:"flex items-center justify-between",children:(0,P.jsxs)("div",{children:[(0,P.jsx)("p",{className:"text-sm text-gray-600",children:"Combined Totals"}),(0,P.jsxs)("div",{className:"space-y-1",children:[(0,P.jsx)("p",{className:"text-sm text-gray-600",children:"Current Value"}),(0,P.jsx)("p",{className:"text-lg font-semibold",children:ce(ue.currentValue)}),(0,P.jsx)("p",{className:"text-sm text-gray-600",children:"Cost Basis"}),(0,P.jsx)("p",{className:"text-lg font-semibold",children:ce(ue.costBasis)}),(0,P.jsx)("p",{className:"text-sm ".concat(ue.profit>=0?"text-green-600":"text-red-600"),children:"Profit"}),(0,P.jsxs)("p",{className:"text-lg font-semibold ".concat(ue.profit>=0?"text-green-600":"text-red-600"),children:[ce(ue.profit)," (",ne(pe),")"]})]})]})})})})]}),(0,P.jsxs)(l.Zp,{children:[(0,P.jsxs)(l.aR,{children:[(0,P.jsx)(l.ZB,{children:"Your Holdings"}),(0,P.jsx)(l.BT,{children:"Manage your portfolio positions"})]}),(0,P.jsx)(l.Wu,{children:0===xe.length?(0,P.jsxs)("div",{className:"text-center py-12",children:[(0,P.jsx)(x.A,{className:"h-16 w-16 text-gray-400 mx-auto mb-4"}),(0,P.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No Holdings Yet"}),(0,P.jsx)("p",{className:"text-gray-600 mb-6",children:"Start building your portfolio by adding your first stock position."}),(0,P.jsxs)(o.$,{onClick:()=>$(!0),children:[(0,P.jsx)(f.A,{className:"h-4 w-4 mr-2"}),"Add Your First Stock"]})]}):(0,P.jsx)("div",{className:"space-y-4",children:xe.map((e,t)=>{const s=he(e);return(0,P.jsxs)("div",{className:"p-4 bg-gray-50 rounded-lg",children:[(0,P.jsxs)("div",{className:"flex items-start justify-between gap-4",children:[(0,P.jsxs)("div",{className:"flex-1",children:[(0,P.jsx)("h3",{className:"font-semibold text-lg",children:e.symbol}),(0,P.jsx)("p",{className:"text-sm text-gray-600",children:e.name||"Company Name"})]}),(0,P.jsxs)("div",{className:"text-right",children:[(0,P.jsxs)("p",{className:"font-medium",children:[s.shares," shares"]}),(0,P.jsxs)("p",{className:"text-sm text-gray-600",children:["@ ",ce(s.currentPrice)]})]})]}),(0,P.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3 mt-3",children:[(0,P.jsxs)("div",{className:"text-sm",children:[(0,P.jsx)("div",{className:"text-gray-600",children:"Current Value"}),(0,P.jsx)("div",{className:"font-semibold",children:ce(s.currentValue)})]}),(0,P.jsxs)("div",{className:"text-sm",children:[(0,P.jsx)("div",{className:"text-gray-600",children:"Cost Basis"}),(0,P.jsx)("div",{className:"font-semibold",children:ce(s.costBasis)})]}),(0,P.jsxs)("div",{className:"text-sm",children:[(0,P.jsx)("div",{className:"".concat(s.profit>=0?"text-green-600":"text-red-600"),children:"Profit"}),(0,P.jsxs)("div",{className:"font-semibold ".concat(s.profit>=0?"text-green-600":"text-red-600"),children:[ce(s.profit)," (",ne(s.percentChange),")"]})]})]}),(0,P.jsxs)("div",{className:"mt-3 grid grid-cols-1 sm:grid-cols-2 gap-3",children:[(0,P.jsxs)("div",{className:"text-sm",children:[(0,P.jsx)("label",{className:"text-gray-600",children:"Amount to Invest"}),(0,P.jsx)(i.p,{type:"number",className:"mt-1",placeholder:"1000.00",value:se[e.symbol]||"",onChange:t=>re(s=>(0,r.A)((0,r.A)({},s),{},{[e.symbol]:t.target.value}))})]}),(0,P.jsx)("div",{className:"text-sm flex items-end",children:(0,P.jsxs)("div",{children:[(0,P.jsx)("div",{className:"text-gray-600",children:"Estimated Shares"}),(0,P.jsx)("div",{className:"font-semibold",children:(()=>{const t=ie(se[e.symbol],0);return s.currentPrice>0&&t>0?(t/s.currentPrice).toFixed(6):"\u2014"})()})]})})]}),(0,P.jsx)("div",{className:"flex items-center justify-end mt-3",children:(0,P.jsx)(o.$,{variant:"ghost",size:"sm",onClick:()=>(async e=>{if(window.confirm("Are you sure you want to remove this stock from your portfolio?"))try{const t=await(0,A.om)(e);if(!t||!t.success)throw new Error((null===t||void 0===t?void 0:t.message)||"Failed to delete stock");m.oR.success("Stock removed from portfolio"),le()}catch(t){console.error("Failed to delete stock:",t),m.oR.error(t.message||"Failed to remove stock from portfolio")}})(e.id),children:(0,P.jsx)(j.A,{className:"h-4 w-4"})})})]},t)})})})]}),(0,P.jsxs)("div",{className:"grid gap-6 mt-6",children:[(0,P.jsxs)(l.Zp,{children:[(0,P.jsxs)(l.aR,{children:[(0,P.jsx)(l.ZB,{children:"Total Value Over Time"}),(0,P.jsx)(l.BT,{children:"Browser-cached time series (no server required)"})]}),(0,P.jsx)(l.Wu,{children:we.length?(0,P.jsx)("div",{className:"h-64",children:(0,P.jsx)(N.u,{width:"100%",height:"100%",children:(0,P.jsxs)(F.Q,{data:we,margin:{top:10,right:10,left:0,bottom:0},children:[(0,P.jsx)("defs",{children:(0,P.jsxs)("linearGradient",{id:"valueFill",x1:"0",y1:"0",x2:"0",y2:"1",children:[(0,P.jsx)("stop",{offset:"5%",stopColor:"#2563eb",stopOpacity:.35}),(0,P.jsx)("stop",{offset:"95%",stopColor:"#2563eb",stopOpacity:0})]})}),(0,P.jsx)(b.d,{strokeDasharray:"3 3"}),(0,P.jsx)(S.W,{dataKey:"x",hide:!1,tick:{fontSize:12}}),(0,P.jsx)(k.h,{tickFormatter:e=>ce(e),width:80,tick:{fontSize:12}}),(0,P.jsx)(y.m,{formatter:e=>ce(e)}),(0,P.jsx)(w.G,{type:"monotone",dataKey:"y",stroke:"#2563eb",fillOpacity:1,fill:"url(#valueFill)"})]})})}):(0,P.jsx)("div",{className:"text-center py-8 text-gray-600",children:"No data yet. This will populate as you view your portfolio."})})]}),(0,P.jsxs)(l.Zp,{children:[(0,P.jsxs)(l.aR,{children:[(0,P.jsx)(l.ZB,{children:"Profit Over Time"}),(0,P.jsx)(l.BT,{children:"Browser-cached time series (no server required)"})]}),(0,P.jsx)(l.Wu,{children:Se.length?(0,P.jsx)("div",{className:"h-64",children:(0,P.jsx)(N.u,{width:"100%",height:"100%",children:(0,P.jsxs)(C.b,{data:Se,margin:{top:10,right:10,left:0,bottom:0},children:[(0,P.jsx)(b.d,{strokeDasharray:"3 3"}),(0,P.jsx)(S.W,{dataKey:"x",hide:!1,tick:{fontSize:12}}),(0,P.jsx)(k.h,{tickFormatter:e=>ce(e),width:80,tick:{fontSize:12}}),(0,P.jsx)(y.m,{formatter:e=>ce(e)}),(0,P.jsx)(_.N,{type:"monotone",dataKey:"y",stroke:"#10b981",strokeWidth:2,dot:!1})]})})}):(0,P.jsx)("div",{className:"text-center py-8 text-gray-600",children:"No data yet. This will populate as you view your portfolio."})})]})]})]})}}}]);
//# sourceMappingURL=69.e2f353f3.chunk.js.map