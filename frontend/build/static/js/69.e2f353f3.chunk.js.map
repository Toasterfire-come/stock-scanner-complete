{"version":3,"file":"static/js/69.e2f353f3.chunk.js","mappings":"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","sources":["pages/app/Portfolio.jsx"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { Button } from \"../../components/ui/button\";\r\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"../../components/ui/card\";\r\nimport { Input } from \"../../components/ui/input\";\r\nimport { Label } from \"../../components/ui/label\";\r\nimport { Badge } from \"../../components/ui/badge\";\r\nimport { Skeleton } from \"../../components/ui/skeleton\";\r\nimport { Dialog, DialogContent, DialogDescription, DialogHeader, DialogTitle, DialogTrigger } from \"../../components/ui/dialog\";\r\nimport { toast } from \"sonner\";\r\nimport { \r\n  Plus, \r\n  TrendingUp, \r\n  TrendingDown, \r\n  PieChart, \r\n  DollarSign,\r\n  Trash2,\r\n  Edit,\r\n  Eye,\r\n  BarChart3,\r\n  Download,\r\n  Calendar,\r\n  Target,\r\n  AlertCircle\r\n} from \"lucide-react\";\r\nimport { ResponsiveContainer, LineChart, Line, XAxis, YAxis, Tooltip, CartesianGrid, AreaChart, Area } from 'recharts';\r\nimport { \r\n  getPortfolio, \r\n  addPortfolio, \r\n  deletePortfolio,\r\n  exportPortfolioCSV,\r\n  searchStocks,\r\n  getStock,\r\n  listStocks,\r\n  getPlanLimits,\r\n  listPortfolios,\r\n  createPortfolio,\r\n  createShareLinkForPortfolio\r\n} from \"../../api/client\";\r\n\r\nconst Portfolio = () => {\r\n  const [isLoading, setIsLoading] = useState(true);\r\n  const [portfolio, setPortfolio] = useState(null);\r\n  const [portfolios, setPortfolios] = useState([]);\r\n  const [selectedPortfolioId, setSelectedPortfolioId] = useState(null);\r\n  const [isCreatePortfolioOpen, setIsCreatePortfolioOpen] = useState(false);\r\n  const [newPortfolioName, setNewPortfolioName] = useState(\"My Portfolio\");\r\n  const [analytics, setAnalytics] = useState(null);\r\n  const [isAddModalOpen, setIsAddModalOpen] = useState(false);\r\n  const [newHolding, setNewHolding] = useState({\r\n    symbol: \"\",\r\n    shares: \"\",\r\n    avg_cost: \"\",\r\n    portfolio_name: \"My Portfolio\"\r\n  });\r\n  const [amountToInvest, setAmountToInvest] = useState(\"\");\r\n  const [currentPrice, setCurrentPrice] = useState(null);\r\n  const [isFetchingPrice, setIsFetchingPrice] = useState(false);\r\n  const [tickerSuggestions, setTickerSuggestions] = useState([]);\r\n  const [isSuggesting, setIsSuggesting] = useState(false);\r\n  const [investInput, setInvestInput] = useState({});\r\n  const [priceMap, setPriceMap] = useState({});\r\n\r\n  useEffect(() => {\r\n    fetchAllPortfolioData();\r\n  }, []);\r\n\r\n  // Autocomplete and price fetching\r\n  useEffect(() => {\r\n    const q = (newHolding.symbol || '').trim();\r\n    if (!q) { setTickerSuggestions([]); return; }\r\n    setIsSuggesting(true);\r\n    const t = setTimeout(async () => {\r\n      try {\r\n        const res = await searchStocks(q).catch(() => null);\r\n        const results = Array.isArray(res) ? res : (res?.results || res?.data || []);\r\n        setTickerSuggestions((results || []).slice(0, 6));\r\n      } finally {\r\n        setIsSuggesting(false);\r\n      }\r\n    }, 200);\r\n    return () => clearTimeout(t);\r\n  }, [newHolding.symbol]);\r\n\r\n  useEffect(() => {\r\n    const sym = (newHolding.symbol || '').trim();\r\n    if (!sym) { setCurrentPrice(null); return; }\r\n    let mounted = true;\r\n    (async () => {\r\n      try {\r\n        setIsFetchingPrice(true);\r\n        const res = await getStock(sym).catch(() => null);\r\n        const price = Number(res?.data?.current_price || res?.current_price || 0) || null;\r\n        if (mounted) setCurrentPrice(price);\r\n      } finally {\r\n        if (mounted) setIsFetchingPrice(false);\r\n      }\r\n    })();\r\n    return () => { mounted = false; };\r\n  }, [newHolding.symbol]);\r\n\r\n  useEffect(() => {\r\n    const amt = Number(amountToInvest);\r\n    if (!amt || !currentPrice || currentPrice <= 0) return;\r\n    const shares = amt / currentPrice;\r\n    setNewHolding((prev) => ({ ...prev, shares: shares.toFixed(6), avg_cost: currentPrice.toFixed(2) }));\r\n  }, [amountToInvest, currentPrice]);\r\n\r\n  const fetchAllPortfolioData = async () => {\r\n    setIsLoading(true);\r\n    try {\r\n      // Fetch list of portfolios and current holdings (optionally filtered) in parallel\r\n      const [\r\n        listRes,\r\n        portfolioResponse,\r\n        allStocks\r\n      ] = await Promise.all([\r\n        listPortfolios().catch(() => ({ success: true, data: { portfolios: [], count: 0 } })),\r\n        getPortfolio(selectedPortfolioId ? { portfolio_id: selectedPortfolioId } : {}).catch(() => ({ success: true, data: [], summary: { total_value: 0, total_gain_loss: 0, total_gain_loss_percent: 0, total_holdings: 0 } })),\r\n        listStocks({}).catch(() => [])\r\n      ]);\r\n\r\n      const pList = Array.isArray(listRes?.data?.portfolios) ? listRes.data.portfolios : [];\r\n      setPortfolios(pList);\r\n      if (!selectedPortfolioId && pList.length > 0) {\r\n        setSelectedPortfolioId(pList[0].id);\r\n      }\r\n      setPortfolio(portfolioResponse);\r\n      setAnalytics(null);\r\n      // Build a symbol -> current_price map from the stock list\r\n      try {\r\n        const map = {};\r\n        const rows = Array.isArray(allStocks?.results) ? allStocks.results : (Array.isArray(allStocks) ? allStocks : []);\r\n        for (const s of rows) {\r\n          const sym = String(s?.symbol || s?.ticker || '').toUpperCase();\r\n          const p = Number(s?.current_price);\r\n          if (sym && Number.isFinite(p)) map[sym] = p;\r\n        }\r\n        setPriceMap(map);\r\n      } catch { setPriceMap({}); }\r\n    } catch (error) {\r\n      console.error(\"Failed to load portfolio data:\", error);\r\n      toast.error(\"Failed to load portfolio data\");\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleAddStock = async (e) => {\r\n    e.preventDefault();\r\n    \r\n    if (!newHolding.symbol || !newHolding.shares || !newHolding.avg_cost) {\r\n      toast.error(\"Please fill in all required fields\");\r\n      return;\r\n    }\r\n\r\n    // Enforce plan limit for portfolios\r\n    try {\r\n      const limits = getPlanLimits();\r\n      const currentCount = Array.isArray(holdings) ? holdings.length : 0;\r\n      if (Number.isFinite(limits.portfolios) && limits.portfolios === 0 && currentCount >= 1) {\r\n        toast.error(\"Your plan does not include portfolios\");\r\n        return;\r\n      }\r\n      if (Number.isFinite(limits.portfolios) && limits.portfolios > 0 && currentCount >= limits.portfolios) {\r\n        toast.error(\"Portfolio limit reached for your plan\");\r\n        return;\r\n      }\r\n    } catch {}\r\n\r\n    try {\r\n      const response = await addPortfolio({\r\n        symbol: newHolding.symbol.toUpperCase(),\r\n        shares: parseFloat(newHolding.shares),\r\n        avg_cost: parseFloat(newHolding.avg_cost),\r\n        portfolio_name: newHolding.portfolio_name\r\n      });\r\n\r\n      if (response && response.success) {\r\n        toast.success(\"Stock added to portfolio successfully\");\r\n        setIsAddModalOpen(false);\r\n        setNewHolding({\r\n          symbol: \"\",\r\n          shares: \"\",\r\n          avg_cost: \"\",\r\n          portfolio_name: \"My Portfolio\"\r\n        });\r\n        // Refresh all portfolio data\r\n        fetchAllPortfolioData();\r\n      } else {\r\n        throw new Error(response?.message || 'Failed to add stock');\r\n      }\r\n    } catch (error) {\r\n      console.error(\"Failed to add stock:\", error);\r\n      toast.error(error.message || \"Failed to add stock to portfolio\");\r\n    }\r\n  };\r\n\r\n  const handleCreatePortfolio = async (e) => {\r\n    e.preventDefault();\r\n    const name = (newPortfolioName || \"\").trim();\r\n    if (!name) { toast.error(\"Enter a portfolio name\"); return; }\r\n    try {\r\n      const res = await createPortfolio({ name });\r\n      if (res?.success) {\r\n        toast.success(\"Portfolio created\");\r\n        setIsCreatePortfolioOpen(false);\r\n        setNewPortfolioName(\"My Portfolio\");\r\n        await fetchAllPortfolioData();\r\n        if (res.data?.portfolio_id) setSelectedPortfolioId(res.data.portfolio_id);\r\n      } else {\r\n        toast.error(res?.error || \"Failed to create portfolio\");\r\n      }\r\n    } catch (err) {\r\n      toast.error(err?.response?.data?.error || err?.message || \"Failed to create portfolio\");\r\n    }\r\n  };\r\n\r\n  const handleDeleteStock = async (holdingId) => {\r\n    if (!window.confirm(\"Are you sure you want to remove this stock from your portfolio?\")) {\r\n      return;\r\n    }\r\n\r\n    try {\r\n      const response = await deletePortfolio(holdingId);\r\n      if (response && response.success) {\r\n        toast.success(\"Stock removed from portfolio\");\r\n        fetchAllPortfolioData();\r\n      } else {\r\n        throw new Error(response?.message || 'Failed to delete stock');\r\n      }\r\n    } catch (error) {\r\n      console.error(\"Failed to delete stock:\", error);\r\n      toast.error(error.message || \"Failed to remove stock from portfolio\");\r\n    }\r\n  };\r\n\r\n  const handleExportPortfolio = async () => {\r\n    try {\r\n      const csvData = await exportPortfolioCSV();\r\n      const blob = new Blob([csvData], { type: 'text/csv' });\r\n      const url = window.URL.createObjectURL(blob);\r\n      const a = document.createElement('a');\r\n      a.style.display = 'none';\r\n      a.href = url;\r\n      a.download = `portfolio_${new Date().toISOString().split('T')[0]}.csv`;\r\n      document.body.appendChild(a);\r\n      a.click();\r\n      window.URL.revokeObjectURL(url);\r\n      toast.success(\"Portfolio exported successfully\");\r\n    } catch (error) {\r\n      console.error(\"Failed to export portfolio:\", error);\r\n      // Fallback CSV from current state\r\n      try {\r\n        const rows = [[\"Symbol\",\"Company\",\"Shares\",\"Avg Cost\",\"Current Price\",\"Current Value\",\"Gain/Loss\",\"Gain/Loss %\"]];\r\n        (portfolio?.data || []).forEach(h => {\r\n          const shares = Number(h.shares || 0);\r\n          const curPrice = Number((h.current_value && shares) ? (h.current_value / shares) : 0);\r\n          const curVal = Number(h.current_value || (curPrice * shares));\r\n          const cost = Number(h.avg_cost || 0);\r\n          const gain = curVal - (shares * cost);\r\n          const gainPct = shares * cost > 0 ? (gain / (shares * cost)) * 100 : 0;\r\n          rows.push([\r\n            h.symbol,\r\n            String(h.name || '').replace(/,/g,' '),\r\n            shares,\r\n            cost.toFixed(2),\r\n            curPrice.toFixed(2),\r\n            curVal.toFixed(2),\r\n            gain.toFixed(2),\r\n            gainPct.toFixed(2)\r\n          ]);\r\n        });\r\n        const content = rows.map(r => r.join(',')).join('\\n');\r\n        const blob2 = new Blob([content], { type: 'text/csv' });\r\n        const url2 = window.URL.createObjectURL(blob2);\r\n        const a2 = document.createElement('a');\r\n        a2.style.display = 'none';\r\n        a2.href = url2;\r\n        a2.download = `portfolio_local_${new Date().toISOString().split('T')[0]}.csv`;\r\n        document.body.appendChild(a2);\r\n        a2.click();\r\n        window.URL.revokeObjectURL(url2);\r\n        toast.success(\"Portfolio exported (local)\");\r\n      } catch (e2) {\r\n        toast.error(\"Failed to export portfolio\");\r\n      }\r\n    }\r\n  };\r\n\r\n  const toNumber = (v, d = 0) => {\r\n    const n = Number(v);\r\n    return Number.isFinite(n) ? n : d;\r\n  };\r\n\r\n  const formatCurrency = (value) => {\r\n    const n = toNumber(value, 0);\r\n    return new Intl.NumberFormat('en-US', {\r\n      style: 'currency',\r\n      currency: 'USD',\r\n      minimumFractionDigits: 2\r\n    }).format(n);\r\n  };\r\n\r\n  const formatPercent = (value) => {\r\n    const n = toNumber(value, 0);\r\n    const sign = n >= 0 ? '+' : '';\r\n    return `${sign}${n.toFixed(2)}%`;\r\n  };\r\n\r\n  \r\n\r\n  const portfolioSummaryRaw = analytics || portfolio?.summary || {\r\n    total_value: 0,\r\n    total_gain_loss: 0,\r\n    total_gain_loss_percent: 0,\r\n    day_change: 0,\r\n    day_change_percent: 0\r\n  };\r\n  const portfolioSummary = {\r\n    total_value: toNumber(portfolioSummaryRaw.total_value, 0),\r\n    total_gain_loss: toNumber(portfolioSummaryRaw.total_gain_loss, 0),\r\n    total_gain_loss_percent: toNumber(portfolioSummaryRaw.total_gain_loss_percent, 0),\r\n    day_change: toNumber(portfolioSummaryRaw.day_change, 0),\r\n    day_change_percent: toNumber(portfolioSummaryRaw.day_change_percent, 0),\r\n  };\r\n\r\n  const holdings = Array.isArray(portfolio?.data) ? portfolio.data : [];\r\n\r\n  const getHoldingCalculations = (holding) => {\r\n    const shares = toNumber(holding.shares, 0);\r\n    const purchasePrice = toNumber(holding.avg_cost, 0);\r\n    const sym = String(holding.symbol || holding.ticker || '').toUpperCase();\r\n    const priceFromMap = toNumber(priceMap[sym], NaN);\r\n    const fallbackCurrentValue = toNumber(holding.current_value, NaN);\r\n    const currentPrice = Number.isFinite(priceFromMap)\r\n      ? priceFromMap\r\n      : (shares > 0 && Number.isFinite(fallbackCurrentValue) ? (fallbackCurrentValue / shares) : 0);\r\n    const costBasis = shares * purchasePrice;\r\n    const profit = (currentPrice - purchasePrice) * shares;\r\n    const ratio = purchasePrice > 0 ? (currentPrice / purchasePrice) : 0;\r\n    const percentChange = purchasePrice > 0 ? ((currentPrice - purchasePrice) / purchasePrice) * 100 : 0;\r\n    return {\r\n      shares,\r\n      purchasePrice,\r\n      currentPrice,\r\n      currentValue: currentPrice * shares,\r\n      costBasis,\r\n      profit,\r\n      ratio,\r\n      percentChange,\r\n    };\r\n  };\r\n\r\n  const totals = holdings.reduce((acc, h) => {\r\n    const c = getHoldingCalculations(h);\r\n    acc.currentValue += c.currentValue;\r\n    acc.costBasis += c.costBasis;\r\n    acc.profit += c.profit;\r\n    return acc;\r\n  }, { currentValue: 0, costBasis: 0, profit: 0 });\r\n  const totalsPercent = totals.costBasis > 0 ? ((totals.currentValue - totals.costBasis) / totals.costBasis) * 100 : 0;\r\n\r\n  // CSV time series handling (browser-side cached via localStorage)\r\n  const VALUE_CSV_KEY = 'portfolio_value_timeseries_csv';\r\n  const PROFIT_CSV_KEY = 'portfolio_profit_timeseries_csv';\r\n\r\n  const parseCsv = (csvText) => {\r\n    try {\r\n      if (!csvText || typeof csvText !== 'string') return [];\r\n      const rows = csvText.trim().split(/\\r?\\n/);\r\n      if (rows.length <= 1) return [];\r\n      const dataRows = rows.slice(1);\r\n      return dataRows\r\n        .map((r) => r.split(','))\r\n        .filter((cols) => cols.length >= 2)\r\n        .map((cols) => ({ ts: Number(cols[0]), value: Number(cols[1]) }))\r\n        .filter((p) => Number.isFinite(p.ts) && Number.isFinite(p.value));\r\n    } catch { return []; }\r\n  };\r\n\r\n  const toCsv = (rows) => {\r\n    const header = 'timestamp,value';\r\n    const body = (rows || []).map((r) => `${r.ts},${r.value}`).join('\\n');\r\n    return `${header}\\n${body}`;\r\n  };\r\n\r\n  const loadSeries = (key) => parseCsv(localStorage.getItem(key) || '');\r\n  const saveSeries = (key, rows) => localStorage.setItem(key, toCsv(rows));\r\n\r\n  const upsertSnapshot = (key, value) => {\r\n    const now = Date.now();\r\n    const rows = loadSeries(key);\r\n    const last = rows[rows.length - 1];\r\n    // Update if last within 10 minutes, else append\r\n    if (last && now - last.ts < 10 * 60 * 1000) {\r\n      last.ts = now;\r\n      last.value = value;\r\n      saveSeries(key, rows);\r\n    } else {\r\n      const next = [...rows, { ts: now, value }];\r\n      // Keep last 500 points max\r\n      const trimmed = next.slice(-500);\r\n      saveSeries(key, trimmed);\r\n    }\r\n  };\r\n\r\n  // Update snapshots whenever totals recalc\r\n  useEffect(() => {\r\n    try {\r\n      upsertSnapshot(VALUE_CSV_KEY, totals.currentValue);\r\n      upsertSnapshot(PROFIT_CSV_KEY, totals.profit);\r\n    } catch {}\r\n  }, [totals.currentValue, totals.profit]);\r\n\r\n  const valueSeries = loadSeries(VALUE_CSV_KEY);\r\n  const profitSeries = loadSeries(PROFIT_CSV_KEY);\r\n  const toChartData = (rows) => rows.map((r) => ({\r\n    x: new Date(r.ts).toLocaleString([], { hour: '2-digit', minute: '2-digit', month: 'short', day: '2-digit' }),\r\n    y: r.value\r\n  }));\r\n  const valueChartData = toChartData(valueSeries);\r\n  const profitChartData = toChartData(profitSeries);\r\n\r\n  if (isLoading) {\r\n    return (\r\n      <div className=\"container mx-auto px-4 py-8\">\r\n        <div className=\"flex justify-between items-center mb-8\">\r\n          <div>\r\n            <Skeleton className=\"h-8 w-64 mb-2\" />\r\n            <Skeleton className=\"h-4 w-96\" />\r\n          </div>\r\n          <Skeleton className=\"h-10 w-32\" />\r\n        </div>\r\n        \r\n        <div className=\"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8\">\r\n          {[1, 2, 3, 4].map((i) => (\r\n            <Card key={i}>\r\n              <CardContent className=\"p-6\">\r\n                <Skeleton className=\"h-4 w-24 mb-2\" />\r\n                <Skeleton className=\"h-8 w-32 mb-2\" />\r\n                <Skeleton className=\"h-3 w-20\" />\r\n              </CardContent>\r\n            </Card>\r\n          ))}\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"container mx-auto px-4 py-8\">\r\n      {/* Header */}\r\n      <div className=\"flex justify-between items-center mb-8\">\r\n        <div className=\"flex items-center gap-3\">\r\n          <div>\r\n            <h1 className=\"text-3xl font-bold text-gray-900\">Portfolio</h1>\r\n            <p className=\"text-gray-600\">Track and analyze your investments</p>\r\n          </div>\r\n          {/* Portfolio selector */}\r\n          <div className=\"ml-4\">\r\n            <label htmlFor=\"portfolio-select\" className=\"sr-only\">Select Portfolio</label>\r\n            <select\r\n              id=\"portfolio-select\"\r\n              className=\"border rounded-md px-2 py-2 text-sm\"\r\n              value={selectedPortfolioId || ''}\r\n              onChange={(e) => setSelectedPortfolioId(e.target.value ? Number(e.target.value) : null)}\r\n            >\r\n              {portfolios.length === 0 && <option value=\"\">No portfolios</option>}\r\n              {portfolios.map(p => (\r\n                <option key={p.id} value={p.id}>{p.name}</option>\r\n              ))}\r\n            </select>\r\n          </div>\r\n          <Button variant=\"outline\" onClick={() => setIsCreatePortfolioOpen(true)}>New Portfolio</Button>\r\n        </div>\r\n        <div className=\"flex gap-2\">\r\n          <Button variant=\"outline\" onClick={async () => {\r\n            try {\r\n              if (!selectedPortfolioId) { toast.error('Select a portfolio'); return; }\r\n              const res = await createShareLinkForPortfolio(selectedPortfolioId);\r\n              if (res?.success && res?.url) {\r\n                const link = `${window.location.origin}${res.url}`;\r\n                await navigator.clipboard.writeText(link);\r\n                toast.success('Share link copied');\r\n              } else {\r\n                toast.error('Failed to create share link');\r\n              }\r\n            } catch {\r\n              toast.error('Failed to create share link');\r\n            }\r\n          }}>Share</Button>\r\n          <Button onClick={handleExportPortfolio} variant=\"outline\">\r\n            <Download className=\"h-4 w-4 mr-2\" />\r\n            Export\r\n          </Button>\r\n          <Dialog open={isAddModalOpen} onOpenChange={setIsAddModalOpen}>\r\n            <DialogTrigger asChild>\r\n              <Button>\r\n                <Plus className=\"h-4 w-4 mr-2\" />\r\n                Add Stock\r\n              </Button>\r\n            </DialogTrigger>\r\n            <DialogContent>\r\n              <DialogHeader>\r\n                <DialogTitle>Add Stock to Portfolio</DialogTitle>\r\n                <DialogDescription>\r\n                  Enter the stock details to add to your portfolio\r\n                </DialogDescription>\r\n              </DialogHeader>\r\n              <form onSubmit={handleAddStock} className=\"space-y-4\">\r\n                <div>\r\n                  <Label htmlFor=\"symbol\">Stock Symbol *</Label>\r\n                  <Input\r\n                    id=\"symbol\"\r\n                    value={newHolding.symbol}\r\n                    onChange={(e) => setNewHolding({...newHolding, symbol: e.target.value.toUpperCase()})}\r\n                    placeholder=\"AAPL\"\r\n                    required\r\n                  />\r\n                  {isSuggesting && <div className=\"text-xs text-gray-500 mt-1\">Searching...</div>}\r\n                  {tickerSuggestions.length > 0 && (\r\n                    <div className=\"mt-2 border rounded-md bg-white max-h-48 overflow-auto\">\r\n                  {tickerSuggestions.map((s, idx) => (\r\n                        <button\r\n                          key={`${s.ticker || s.symbol}-${idx}`}\r\n                          type=\"button\"\r\n                          className=\"w-full text-left px-3 py-2 hover:bg-gray-50\"\r\n                          onClick={() => {\r\n                            const sym = String(s.ticker || s.symbol || '').toUpperCase();\r\n                            setNewHolding({ ...newHolding, symbol: sym });\r\n                            setTickerSuggestions([]);\r\n                          }}\r\n                        >\r\n                          <span className=\"font-medium mr-2\">{String(s.ticker || s.symbol || '').toUpperCase()}</span>\r\n                          <span className=\"text-gray-600 text-sm\">{String(s.company_name || s.name || '')}</span>\r\n                        </button>\r\n                      ))}\r\n                    </div>\r\n                  )}\r\n                </div>\r\n                <div>\r\n                  <Label htmlFor=\"amount\">Amount to Invest (optional)</Label>\r\n                  <Input\r\n                    id=\"amount\"\r\n                    type=\"number\"\r\n                    step=\"0.01\"\r\n                    value={amountToInvest}\r\n                    onChange={(e) => setAmountToInvest(e.target.value)}\r\n                    placeholder=\"1000.00\"\r\n                  />\r\n                  {currentPrice ? (\r\n                    <div className=\"text-xs text-gray-600 mt-1\">Current price ~ {formatCurrency(currentPrice)}{isFetchingPrice ? ' (updating...)' : ''}</div>\r\n                  ) : (\r\n                    <div className=\"text-xs text-gray-500 mt-1\">Enter a valid symbol to load current price</div>\r\n                  )}\r\n                </div>\r\n                <div>\r\n                  <Label htmlFor=\"shares\">Number of Shares *</Label>\r\n                  <Input\r\n                    id=\"shares\"\r\n                    type=\"number\"\r\n                    step=\"0.001\"\r\n                    value={newHolding.shares}\r\n                    onChange={(e) => setNewHolding({...newHolding, shares: e.target.value})}\r\n                    placeholder=\"100\"\r\n                    required\r\n                  />\r\n                </div>\r\n                <div>\r\n                  <Label htmlFor=\"avg_cost\">Average Cost per Share *</Label>\r\n                  <Input\r\n                    id=\"avg_cost\"\r\n                    type=\"number\"\r\n                    step=\"0.01\"\r\n                    value={newHolding.avg_cost}\r\n                    onChange={(e) => setNewHolding({...newHolding, avg_cost: e.target.value})}\r\n                    placeholder=\"150.00\"\r\n                    required\r\n                  />\r\n                </div>\r\n                <div>\r\n                  <Label htmlFor=\"portfolio_name\">Portfolio Name</Label>\r\n                  <Input\r\n                    id=\"portfolio_name\"\r\n                    value={newHolding.portfolio_name}\r\n                    onChange={(e) => setNewHolding({...newHolding, portfolio_name: e.target.value})}\r\n                    placeholder=\"My Portfolio\"\r\n                  />\r\n                </div>\r\n                <Button type=\"submit\" className=\"w-full\">\r\n                  Add to Portfolio\r\n                </Button>\r\n              </form>\r\n            </DialogContent>\r\n          </Dialog>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Create portfolio dialog */}\r\n      <Dialog open={isCreatePortfolioOpen} onOpenChange={setIsCreatePortfolioOpen}>\r\n        <DialogContent>\r\n          <DialogHeader>\r\n            <DialogTitle>Create Portfolio</DialogTitle>\r\n            <DialogDescription>\r\n              Name your new portfolio. Limits are enforced per your plan.\r\n            </DialogDescription>\r\n          </DialogHeader>\r\n          <form onSubmit={handleCreatePortfolio} className=\"space-y-4\">\r\n            <div>\r\n              <Label htmlFor=\"np-name\">Portfolio Name</Label>\r\n              <Input id=\"np-name\" value={newPortfolioName} onChange={(e) => setNewPortfolioName(e.target.value)} placeholder=\"My Portfolio\" />\r\n            </div>\r\n            <div className=\"flex gap-2\">\r\n              <Button type=\"submit\" className=\"flex-1\">Create</Button>\r\n              <Button type=\"button\" variant=\"outline\" onClick={() => setIsCreatePortfolioOpen(false)}>Cancel</Button>\r\n            </div>\r\n          </form>\r\n        </DialogContent>\r\n      </Dialog>\r\n\r\n      {/* Portfolio Summary Cards */}\r\n      <div className=\"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8\">\r\n        <Card className=\"bg-gradient-to-r from-blue-50 to-blue-100\">\r\n          <CardContent className=\"p-6\">\r\n            <div className=\"flex items-center justify-between\">\r\n              <div>\r\n                <p className=\"text-sm text-gray-600\">Total Value</p>\r\n                <p className=\"text-2xl font-bold\">{formatCurrency(portfolioSummary.total_value)}</p>\r\n              </div>\r\n              <DollarSign className=\"h-8 w-8 text-blue-600\" />\r\n            </div>\r\n          </CardContent>\r\n        </Card>\r\n\r\n        <Card className={`bg-gradient-to-r ${portfolioSummary.total_gain_loss >= 0 ? 'from-green-50 to-green-100' : 'from-red-50 to-red-100'}`}>\r\n          <CardContent className=\"p-6\">\r\n            <div className=\"flex items-center justify-between\">\r\n              <div>\r\n                <p className=\"text-sm text-gray-600\">Total Gain/Loss</p>\r\n                <p className={`text-2xl font-bold ${portfolioSummary.total_gain_loss >= 0 ? 'text-green-600' : 'text-red-600'}`}>\r\n                  {formatCurrency(portfolioSummary.total_gain_loss)}\r\n                </p>\r\n                <p className={`text-sm ${portfolioSummary.total_gain_loss >= 0 ? 'text-green-600' : 'text-red-600'}`}>\r\n                  {formatPercent(portfolioSummary.total_gain_loss_percent)}\r\n                </p>\r\n              </div>\r\n              {portfolioSummary.total_gain_loss >= 0 ? \r\n                <TrendingUp className=\"h-8 w-8 text-green-600\" /> : \r\n                <TrendingDown className=\"h-8 w-8 text-red-600\" />\r\n              }\r\n            </div>\r\n          </CardContent>\r\n        </Card>\r\n\r\n        <Card className={`bg-gradient-to-r ${portfolioSummary.day_change >= 0 ? 'from-green-50 to-green-100' : 'from-red-50 to-red-100'}`}>\r\n          <CardContent className=\"p-6\">\r\n            <div className=\"flex items-center justify-between\">\r\n              <div>\r\n                <p className=\"text-sm text-gray-600\">Today's Change</p>\r\n                <p className={`text-2xl font-bold ${portfolioSummary.day_change >= 0 ? 'text-green-600' : 'text-red-600'}`}>\r\n                  {formatCurrency(portfolioSummary.day_change || 0)}\r\n                </p>\r\n                <p className={`text-sm ${portfolioSummary.day_change >= 0 ? 'text-green-600' : 'text-red-600'}`}>\r\n                  {formatPercent(portfolioSummary.day_change_percent || 0)}\r\n                </p>\r\n              </div>\r\n              <Calendar className=\"h-8 w-8 text-gray-600\" />\r\n            </div>\r\n          </CardContent>\r\n        </Card>\r\n\r\n        <Card className=\"bg-gradient-to-r from-purple-50 to-purple-100\">\r\n          <CardContent className=\"p-6\">\r\n            <div className=\"flex items-center justify-between\">\r\n              <div>\r\n                <p className=\"text-sm text-gray-600\">Holdings</p>\r\n                <p className=\"text-2xl font-bold\">{holdings.length}</p>\r\n                <p className=\"text-sm text-gray-600\">Stocks tracked</p>\r\n              </div>\r\n              <PieChart className=\"h-8 w-8 text-purple-600\" />\r\n            </div>\r\n          </CardContent>\r\n        </Card>\r\n        {/* Combined Totals */}\r\n        <Card className=\"bg-gradient-to-r from-indigo-50 to-indigo-100\">\r\n          <CardContent className=\"p-6\">\r\n            <div className=\"flex items-center justify-between\">\r\n              <div>\r\n                <p className=\"text-sm text-gray-600\">Combined Totals</p>\r\n                <div className=\"space-y-1\">\r\n                  <p className=\"text-sm text-gray-600\">Current Value</p>\r\n                  <p className=\"text-lg font-semibold\">{formatCurrency(totals.currentValue)}</p>\r\n                  <p className=\"text-sm text-gray-600\">Cost Basis</p>\r\n                  <p className=\"text-lg font-semibold\">{formatCurrency(totals.costBasis)}</p>\r\n                  <p className={`text-sm ${totals.profit >= 0 ? 'text-green-600' : 'text-red-600'}`}>Profit</p>\r\n                  <p className={`text-lg font-semibold ${totals.profit >= 0 ? 'text-green-600' : 'text-red-600'}`}>{formatCurrency(totals.profit)} ({formatPercent(totalsPercent)})</p>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </CardContent>\r\n        </Card>\r\n      </div>\r\n\r\n      {/* Holdings Only (tabs removed) */}\r\n          <Card>\r\n            <CardHeader>\r\n              <CardTitle>Your Holdings</CardTitle>\r\n              <CardDescription>\r\n                Manage your portfolio positions\r\n              </CardDescription>\r\n            </CardHeader>\r\n            <CardContent>\r\n              {holdings.length === 0 ? (\r\n                <div className=\"text-center py-12\">\r\n                  <PieChart className=\"h-16 w-16 text-gray-400 mx-auto mb-4\" />\r\n                  <h3 className=\"text-lg font-semibold text-gray-900 mb-2\">No Holdings Yet</h3>\r\n                  <p className=\"text-gray-600 mb-6\">Start building your portfolio by adding your first stock position.</p>\r\n                  <Button onClick={() => setIsAddModalOpen(true)}>\r\n                    <Plus className=\"h-4 w-4 mr-2\" />\r\n                    Add Your First Stock\r\n                  </Button>\r\n                </div>\r\n              ) : (\r\n                <div className=\"space-y-4\">\r\n                  {holdings.map((holding, index) => {\r\n                    const c = getHoldingCalculations(holding);\r\n                    return (\r\n                      <div key={index} className=\"p-4 bg-gray-50 rounded-lg\">\r\n                        <div className=\"flex items-start justify-between gap-4\">\r\n                          <div className=\"flex-1\">\r\n                            <h3 className=\"font-semibold text-lg\">{holding.symbol}</h3>\r\n                            <p className=\"text-sm text-gray-600\">{holding.name || 'Company Name'}</p>\r\n                          </div>\r\n                          <div className=\"text-right\">\r\n                            <p className=\"font-medium\">{c.shares} shares</p>\r\n                            <p className=\"text-sm text-gray-600\">@ {formatCurrency(c.currentPrice)}</p>\r\n                          </div>\r\n                        </div>\r\n                        <div className=\"grid grid-cols-1 sm:grid-cols-3 gap-3 mt-3\">\r\n                          <div className=\"text-sm\">\r\n                            <div className=\"text-gray-600\">Current Value</div>\r\n                            <div className=\"font-semibold\">{formatCurrency(c.currentValue)}</div>\r\n                          </div>\r\n                          <div className=\"text-sm\">\r\n                            <div className=\"text-gray-600\">Cost Basis</div>\r\n                            <div className=\"font-semibold\">{formatCurrency(c.costBasis)}</div>\r\n                          </div>\r\n                          <div className=\"text-sm\">\r\n                            <div className={`${c.profit >= 0 ? 'text-green-600' : 'text-red-600'}`}>Profit</div>\r\n                            <div className={`font-semibold ${c.profit >= 0 ? 'text-green-600' : 'text-red-600'}`}>{formatCurrency(c.profit)} ({formatPercent(c.percentChange)})</div>\r\n                          </div>\r\n                        </div>\r\n                        {/* Per-holding quick calculator */}\r\n                        <div className=\"mt-3 grid grid-cols-1 sm:grid-cols-2 gap-3\">\r\n                          <div className=\"text-sm\">\r\n                            <label className=\"text-gray-600\">Amount to Invest</label>\r\n                            <Input\r\n                              type=\"number\"\r\n                              className=\"mt-1\"\r\n                              placeholder=\"1000.00\"\r\n                              value={investInput[holding.symbol] || ''}\r\n                              onChange={(e) => setInvestInput((prev) => ({ ...prev, [holding.symbol]: e.target.value }))}\r\n                            />\r\n                          </div>\r\n                          <div className=\"text-sm flex items-end\">\r\n                            <div>\r\n                              <div className=\"text-gray-600\">Estimated Shares</div>\r\n                              <div className=\"font-semibold\">\r\n                                {(() => {\r\n                                  const amt = toNumber(investInput[holding.symbol], 0);\r\n                                  return c.currentPrice > 0 && amt > 0 ? (amt / c.currentPrice).toFixed(6) : '';\r\n                                })()}\r\n                              </div>\r\n                            </div>\r\n                          </div>\r\n                        </div>\r\n                        <div className=\"flex items-center justify-end mt-3\">\r\n                          <Button variant=\"ghost\" size=\"sm\" onClick={() => handleDeleteStock(holding.id)}>\r\n                            <Trash2 className=\"h-4 w-4\" />\r\n                          </Button>\r\n                        </div>\r\n                      </div>\r\n                    );\r\n                  })}\r\n                </div>\r\n              )}\r\n            </CardContent>\r\n          </Card>\r\n        {/* Performance Charts */}\r\n        <div className=\"grid gap-6 mt-6\">\r\n          <Card>\r\n            <CardHeader>\r\n              <CardTitle>Total Value Over Time</CardTitle>\r\n              <CardDescription>Browser-cached time series (no server required)</CardDescription>\r\n            </CardHeader>\r\n            <CardContent>\r\n              {valueChartData.length ? (\r\n                <div className=\"h-64\">\r\n                  <ResponsiveContainer width=\"100%\" height=\"100%\">\r\n                    <AreaChart data={valueChartData} margin={{ top: 10, right: 10, left: 0, bottom: 0 }}>\r\n                      <defs>\r\n                        <linearGradient id=\"valueFill\" x1=\"0\" y1=\"0\" x2=\"0\" y2=\"1\">\r\n                          <stop offset=\"5%\" stopColor=\"#2563eb\" stopOpacity={0.35}/>\r\n                          <stop offset=\"95%\" stopColor=\"#2563eb\" stopOpacity={0}/>\r\n                        </linearGradient>\r\n                      </defs>\r\n                      <CartesianGrid strokeDasharray=\"3 3\" />\r\n                      <XAxis dataKey=\"x\" hide={false} tick={{ fontSize: 12 }} />\r\n                      <YAxis tickFormatter={(v) => formatCurrency(v)} width={80} tick={{ fontSize: 12 }} />\r\n                      <Tooltip formatter={(v) => formatCurrency(v)} />\r\n                      <Area type=\"monotone\" dataKey=\"y\" stroke=\"#2563eb\" fillOpacity={1} fill=\"url(#valueFill)\" />\r\n                    </AreaChart>\r\n                  </ResponsiveContainer>\r\n                </div>\r\n              ) : (\r\n                <div className=\"text-center py-8 text-gray-600\">No data yet. This will populate as you view your portfolio.</div>\r\n              )}\r\n            </CardContent>\r\n          </Card>\r\n\r\n          <Card>\r\n            <CardHeader>\r\n              <CardTitle>Profit Over Time</CardTitle>\r\n              <CardDescription>Browser-cached time series (no server required)</CardDescription>\r\n            </CardHeader>\r\n            <CardContent>\r\n              {profitChartData.length ? (\r\n                <div className=\"h-64\">\r\n                  <ResponsiveContainer width=\"100%\" height=\"100%\">\r\n                    <LineChart data={profitChartData} margin={{ top: 10, right: 10, left: 0, bottom: 0 }}>\r\n                      <CartesianGrid strokeDasharray=\"3 3\" />\r\n                      <XAxis dataKey=\"x\" hide={false} tick={{ fontSize: 12 }} />\r\n                      <YAxis tickFormatter={(v) => formatCurrency(v)} width={80} tick={{ fontSize: 12 }} />\r\n                      <Tooltip formatter={(v) => formatCurrency(v)} />\r\n                      <Line type=\"monotone\" dataKey=\"y\" stroke=\"#10b981\" strokeWidth={2} dot={false} />\r\n                    </LineChart>\r\n                  </ResponsiveContainer>\r\n                </div>\r\n              ) : (\r\n                <div className=\"text-center py-8 text-gray-600\">No data yet. This will populate as you view your portfolio.</div>\r\n              )}\r\n            </CardContent>\r\n          </Card>\r\n        </div>\r\n      {/* End holdings only */}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Portfolio;"],"names":["Portfolio","isLoading","setIsLoading","useState","portfolio","setPortfolio","portfolios","setPortfolios","selectedPortfolioId","setSelectedPortfolioId","isCreatePortfolioOpen","setIsCreatePortfolioOpen","newPortfolioName","setNewPortfolioName","analytics","setAnalytics","isAddModalOpen","setIsAddModalOpen","newHolding","setNewHolding","symbol","shares","avg_cost","portfolio_name","amountToInvest","setAmountToInvest","currentPrice","setCurrentPrice","isFetchingPrice","setIsFetchingPrice","tickerSuggestions","setTickerSuggestions","isSuggesting","setIsSuggesting","investInput","setInvestInput","priceMap","setPriceMap","useEffect","fetchAllPortfolioData","q","trim","t","setTimeout","async","res","searchStocks","catch","results","Array","isArray","data","slice","clearTimeout","sym","mounted","_res$data","getStock","price","Number","current_price","amt","prev","_objectSpread","toFixed","_listRes$data","listRes","portfolioResponse","allStocks","Promise","all","listPortfolios","success","count","getPortfolio","portfolio_id","summary","total_value","total_gain_loss","total_gain_loss_percent","total_holdings","listStocks","pList","length","id","map","rows","s","String","ticker","toUpperCase","p","isFinite","_unused","error","console","toast","toNumber","v","d","arguments","undefined","n","formatCurrency","value","Intl","NumberFormat","style","currency","minimumFractionDigits","format","formatPercent","concat","portfolioSummaryRaw","day_change","day_change_percent","portfolioSummary","holdings","getHoldingCalculations","holding","purchasePrice","priceFromMap","NaN","fallbackCurrentValue","current_value","currentValue","costBasis","profit","ratio","percentChange","totals","reduce","acc","h","c","totalsPercent","VALUE_CSV_KEY","PROFIT_CSV_KEY","loadSeries","key","csvText","split","r","filter","cols","ts","_unused3","parseCsv","localStorage","getItem","saveSeries","setItem","body","join","toCsv","upsertSnapshot","now","Date","last","trimmed","_unused4","valueSeries","profitSeries","toChartData","x","toLocaleString","hour","minute","month","day","y","valueChartData","profitChartData","_jsxs","className","children","_jsx","Skeleton","i","Card","CardContent","htmlFor","onChange","e","target","name","Button","variant","onClick","createShareLinkForPortfolio","url","link","window","location","origin","navigator","clipboard","writeText","_unused5","csvData","exportPortfolioCSV","blob","Blob","type","URL","createObjectURL","a","document","createElement","display","href","download","toISOString","appendChild","click","revokeObjectURL","forEach","curPrice","curVal","cost","gain","gainPct","push","replace","content","blob2","url2","a2","e2","Download","Dialog","open","onOpenChange","DialogTrigger","asChild","Plus","DialogContent","DialogHeader","DialogTitle","DialogDescription","onSubmit","preventDefault","limits","getPlanLimits","currentCount","_unused2","response","addPortfolio","parseFloat","Error","message","Label","Input","placeholder","required","idx","company_name","step","createPortfolio","_res$data2","err","_err$response","_err$response$data","DollarSign","TrendingUp","TrendingDown","Calendar","PieChart","CardHeader","CardTitle","CardDescription","index","size","confirm","deletePortfolio","holdingId","handleDeleteStock","Trash2","ResponsiveContainer","width","height","AreaChart","margin","top","right","left","bottom","x1","y1","x2","y2","offset","stopColor","stopOpacity","CartesianGrid","strokeDasharray","XAxis","dataKey","hide","tick","fontSize","YAxis","tickFormatter","Tooltip","formatter","Area","stroke","fillOpacity","fill","LineChart","Line","strokeWidth","dot"],"sourceRoot":""}