"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[454],{6454:(e,s,a)=>{a.r(s),a.d(s,{default:()=>X});var t=a(2555),r=a(5043),l=a(9624),i=a(5352),n=a(3390),c=a(1140),o=a(5949),d=a(5732),m=a(108),u=a(877),x=a(7734),h=a(2185),v=a(6026),p=a(6150),j=a(3839),N=a(5748),g=a(168),b=a(1555),y=a(4158),f=a(6328),w=a(7719),_=a(5469),k=a(4919),S=a(3782),A=a(3944),F=a(9233),C=a(3677),R=a(5264),E=a(3165),D=a(3062),L=a(764),W=a(830),V=a(9766),B=a(1547),T=a(579);function M(e){if(!e)return;if("number"===typeof e)return Math.floor(e/1e3);const s=new Date(e);return Number.isNaN(s.getTime())?void 0:Math.floor(s.getTime()/1e3)}function P(e){let{data:s,height:a=420,theme:t="light",overlays:l=[],onReady:i,ariaLabel:n="Interactive price chart"}=e;const c=(0,r.useRef)(null),o=(0,r.useRef)(null),d=(0,r.useRef)(null),m=(0,r.useRef)([]),u=(0,r.useMemo)(()=>function(e){if(!Array.isArray(e))return{candles:[],area:[]};if(e.some(e=>null!=e.open&&null!=e.high&&null!=e.low&&null!=e.close))return{candles:e.map(e=>{var s;return{time:M(null!==(s=e.timestamp)&&void 0!==s?s:e.time),open:Number(e.open),high:Number(e.high),low:Number(e.low),close:Number(e.close)}}).filter(e=>Number.isFinite(e.open)&&Number.isFinite(e.close)),area:[]};return{candles:[],area:e.map(e=>{var s,a;return{time:M(null!==(s=e.timestamp)&&void 0!==s?s:e.time),value:Number(null!==(a=e.price)&&void 0!==a?a:e.close)}}).filter(e=>Number.isFinite(e.value))}}(s||[]),[s]);return(0,r.useEffect)(()=>{if(!c.current)return;const e=c.current,s=(0,B.R9)(e,{height:a,autoSize:!0,layout:"dark"===t?{background:{color:"rgba(17,24,39,1)"},textColor:"#e5e7eb"}:{background:{color:"white"},textColor:"#111827"},grid:{vertLines:{color:"dark"===t?"rgba(55,65,81,0.3)":"rgba(229,231,235,0.7)"},horzLines:{color:"dark"===t?"rgba(55,65,81,0.3)":"rgba(229,231,235,0.7)"}},rightPriceScale:{borderColor:"dark"===t?"#374151":"#e5e7eb"},timeScale:{borderColor:"dark"===t?"#374151":"#e5e7eb"},crosshair:{mode:1}});let r;o.current=s,u.candles.length?(r=s.addCandlestickSeries({upColor:"#16a34a",downColor:"#dc2626",borderVisible:!1,wickUpColor:"#16a34a",wickDownColor:"#dc2626"}),r.setData(u.candles)):(r=s.addAreaSeries({lineColor:"#2563eb",topColor:"rgba(37,99,235,0.25)",bottomColor:"rgba(37,99,235,0.01)",lineWidth:2}),r.setData(u.area)),d.current=r,m.current=(l||[]).map(e=>{let{values:a,color:t="#3b82f6",lineWidth:r=1.5}=e;const l=s.addLineSeries({color:t,lineWidth:r,priceLineVisible:!1,lastValueVisible:!1});return Array.isArray(a)&&l.setData(a.map(e=>({time:M(e.time),value:Number(e.value)})).filter(e=>Number.isFinite(e.value))),l}),s.timeScale().fitContent(),"function"===typeof i&&i({chart:s,mainSeries:r});const n=new ResizeObserver(()=>{try{s.applyOptions({})}catch(e){}});return n.observe(e),()=>{try{n.disconnect()}catch(e){}try{m.current.forEach(e=>s.removeSeries(e))}catch(a){}try{s.remove()}catch(t){}o.current=null,d.current=null,m.current=[]}},[a,t]),(0,r.useEffect)(()=>{const e=o.current,s=d.current;if(e&&s){if(s.setData&&u.candles.length)if(s.priceScale&&s.seriesType&&"Candlestick"!==s.seriesType()){try{e.removeSeries(s)}catch(a){}const t=e.addCandlestickSeries({upColor:"#16a34a",downColor:"#dc2626",borderVisible:!1,wickUpColor:"#16a34a",wickDownColor:"#dc2626"});t.setData(u.candles),d.current=t}else s.setData(u.candles);else if(s.setData&&u.area.length)if(s.priceScale&&s.seriesType&&"Area"!==s.seriesType()){try{e.removeSeries(s)}catch(t){}const a=e.addAreaSeries({lineColor:"#2563eb",topColor:"rgba(37,99,235,0.25)",bottomColor:"rgba(37,99,235,0.01)",lineWidth:2});a.setData(u.area),d.current=a}else s.setData(u.area);e.timeScale().fitContent()}},[u]),(0,r.useEffect)(()=>{const e=o.current;if(e){try{m.current.forEach(s=>e.removeSeries(s))}catch(s){}m.current=(l||[]).map(s=>{let{values:a,color:t="#3b82f6",lineWidth:r=1.5}=s;const l=e.addLineSeries({color:t,lineWidth:r,priceLineVisible:!1,lastValueVisible:!1});return Array.isArray(a)&&l.setData(a.map(e=>({time:M(e.time),value:Number(e.value)})).filter(e=>Number.isFinite(e.value))),l})}},[l]),(0,T.jsx)("div",{ref:c,className:"w-full",style:{height:a},role:"img","aria-label":n})}let Z,$=1;const I=new Map;function U(e,s){const t=$++,r=function(){if(Z)return Z;try{Z=new Worker(new URL(a.p+a.u(943),a.b))}catch(e){Z=new Worker("/workers/indicatorWorker.js")}return Z.onmessage=e=>{const{id:s,type:a,payload:t,error:r}=e.data||{},l=I.get(s);l&&(I.delete(s),"result"===a?l.resolve(t):l.reject(new Error(r||"indicator worker error")))},Z.onerror=e=>{for(const[,s]of I)s.reject(e);I.clear()},Z}();return new Promise((a,l)=>{I.set(t,{resolve:a,reject:l}),r.postMessage({id:t,type:"compute",payload:{indicators:e,series:s}})})}var O=a(5088),z=a(929),K=a(516),G=a(9292);const H=e=>{let{symbol:s,maxItems:a=10,showHeader:l=!0}=e;const[d,m]=(0,r.useState)([]),[u,x]=(0,r.useState)(!0),[h,v]=(0,r.useState)(null),[p,j]=(0,r.useState)(null);(0,r.useEffect)(()=>{if(s){N();const e=setInterval(N,6e5);return()=>clearInterval(e)}},[s,a]);const N=async()=>{x(!0),v(null);try{var e,t;const r=await(0,W.KM)(s);if(r.success&&null!==(e=r.data)&&void 0!==e&&null!==(t=e.news_items)&&void 0!==t&&t.length)return m(r.data.news_items.slice(0,a)),void j(new Date);m([])}catch(r){v("Failed to load news for ".concat(s)),console.error("Stock news error:",r)}finally{x(!1)}},g=e=>{switch(null===e||void 0===e?void 0:e.toLowerCase()){case"positive":return"text-green-600 bg-green-100";case"negative":return"text-red-600 bg-red-100";default:return"text-gray-600 bg-gray-100"}},b=e=>{switch(null===e||void 0===e?void 0:e.toLowerCase()){case"positive":return(0,T.jsx)(k.A,{className:"h-3 w-3"});case"negative":return(0,T.jsx)(S.A,{className:"h-3 w-3"});default:return(0,T.jsx)(O.A,{className:"h-3 w-3"})}},f=e=>{if(!e)return"Unknown time";const s=new Date(e),a=new Date-s,t=Math.floor(a/6e4),r=Math.floor(a/36e5),l=Math.floor(a/864e5);return t<1?"Just now":t<60?"".concat(t,"m ago"):r<24?"".concat(r,"h ago"):l<7?"".concat(l,"d ago"):s.toLocaleDateString()};return s?u&&0===d.length?(0,T.jsxs)(c.Zp,{children:[l&&(0,T.jsxs)(c.aR,{children:[(0,T.jsxs)(c.ZB,{className:"flex items-center gap-2",children:[(0,T.jsx)(z.A,{className:"h-5 w-5"}),"News for ",s]}),(0,T.jsx)(c.BT,{children:"Latest news and analysis"})]}),(0,T.jsx)(c.Wu,{children:(0,T.jsx)("div",{className:"flex items-center justify-center py-8",children:(0,T.jsxs)("div",{className:"text-center",children:[(0,T.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-4"}),(0,T.jsx)("p",{className:"text-gray-600",children:"Loading news..."})]})})})]}):(0,T.jsxs)(c.Zp,{children:[l&&(0,T.jsxs)(c.aR,{className:"flex flex-row items-center justify-between",children:[(0,T.jsxs)("div",{children:[(0,T.jsxs)(c.ZB,{className:"flex items-center gap-2",children:[(0,T.jsx)(z.A,{className:"h-5 w-5"}),"News for ",s,p&&(0,T.jsxs)(o.E,{variant:"secondary",className:"text-xs",children:[(0,T.jsx)(O.A,{className:"h-3 w-3 mr-1"}),f(p)]})]}),(0,T.jsx)(c.BT,{children:"Latest news and market sentiment"})]}),(0,T.jsxs)("div",{className:"flex gap-2",children:[(0,T.jsx)(n.$,{variant:"ghost",size:"sm",onClick:N,disabled:u,children:(0,T.jsx)(K.A,{className:"h-4 w-4 ".concat(u?"animate-spin":"")})}),(0,T.jsx)(n.$,{variant:"ghost",size:"sm",asChild:!0,children:(0,T.jsx)(i.N_,{to:"/app/news",children:(0,T.jsx)(G.A,{className:"h-4 w-4"})})})]})]}),(0,T.jsxs)(c.Wu,{children:[h&&(0,T.jsx)(y.Fc,{className:"mb-4",children:(0,T.jsx)(y.TN,{children:h})}),d.length>0?(0,T.jsx)("div",{className:"space-y-4",children:d.map((e,s)=>(0,T.jsxs)("div",{className:"p-4 border rounded-lg hover:bg-gray-50 transition-colors cursor-pointer ".concat(e.is_read?"opacity-70":""),onClick:()=>(async e=>{try{const s=Number(e.id);Number.isFinite(s)&&await(0,W.oR)(s),window.open(e.url,"_blank","noopener,noreferrer")}catch(s){console.error("Mark news clicked error:",s),window.open(e.url,"_blank","noopener,noreferrer")}})(e),children:[(0,T.jsxs)("div",{className:"flex items-start justify-between mb-2",children:[(0,T.jsxs)("div",{className:"flex items-center gap-2",children:[e.sentiment_grade&&(0,T.jsxs)(o.E,{variant:"secondary",className:"text-xs ".concat(g(e.sentiment_grade)),children:[b(e.sentiment_grade),(0,T.jsx)("span",{className:"ml-1",children:e.sentiment_grade})]}),e.source&&(0,T.jsx)(o.E,{variant:"outline",className:"text-xs",children:e.source})]}),(0,T.jsxs)("div",{className:"flex items-center gap-2",children:[(0,T.jsx)("span",{className:"text-xs text-gray-500",children:f(e.published_at)}),(0,T.jsx)(L.A,{className:"h-3 w-3 text-gray-400"})]})]}),(0,T.jsx)("h4",{className:"font-semibold text-gray-900 mb-2 line-clamp-2",children:e.title}),e.content&&(0,T.jsx)("p",{className:"text-sm text-gray-600 line-clamp-3 mb-2",children:e.content}),null!==e.sentiment_score&&void 0!==e.sentiment_score&&(0,T.jsxs)("div",{className:"flex items-center gap-2 text-xs text-gray-500",children:[(0,T.jsx)("span",{children:"Sentiment Score:"}),(0,T.jsxs)("span",{className:"font-medium ".concat(e.sentiment_score>0?"text-green-600":e.sentiment_score<0?"text-red-600":"text-gray-600"),children:[e.sentiment_score>0?"+":"",e.sentiment_score.toFixed(2)]})]}),!e.is_read&&(0,T.jsx)("div",{className:"mt-2",children:(0,T.jsx)(n.$,{variant:"ghost",size:"sm",onClick:s=>{s.stopPropagation(),(async e=>{try{const s=Number(e);Number.isFinite(s)&&(await(0,W.Hy)(s),m(s=>s.map(s=>s.id===e?(0,t.A)((0,t.A)({},s),{},{is_read:!0}):s)))}catch(s){console.error("Mark as read error:",s)}})(e.id)},children:"Mark as Read"})})]},e.id||s))}):(0,T.jsx)("div",{className:"flex items-center justify-center py-8 text-gray-500",children:(0,T.jsxs)("div",{className:"text-center",children:[(0,T.jsx)(z.A,{className:"h-8 w-8 mx-auto mb-2 text-gray-400"}),(0,T.jsxs)("p",{children:["No news available for ",s]}),(0,T.jsx)("p",{className:"text-sm",children:"Check back later for updates"})]})}),d.length>=a&&(0,T.jsx)("div",{className:"mt-4 text-center",children:(0,T.jsx)(n.$,{variant:"outline",size:"sm",asChild:!0,children:(0,T.jsxs)(i.N_,{to:"/app/news?symbol=".concat(s),children:["View All News for ",s,(0,T.jsx)(L.A,{className:"h-4 w-4 ml-1"})]})})})]})]}):(0,T.jsx)(c.Zp,{children:(0,T.jsx)(c.Wu,{className:"py-8",children:(0,T.jsxs)("div",{className:"text-center text-gray-500",children:[(0,T.jsx)(z.A,{className:"h-8 w-8 mx-auto mb-2 text-gray-400"}),(0,T.jsx)("p",{children:"Select a stock to view related news"})]})})})},X=()=>{var e,s,a,B,M,Z,$,I,O,z,K,G;const{symbol:X}=(0,i.g)(),[Y,q]=(0,r.useState)(!0),[J,Q]=(0,r.useState)(null),[ee,se]=(0,r.useState)(null),[ae,te]=(0,r.useState)("overview"),[re,le]=(0,r.useState)([]),[ie,ne]=(0,r.useState)(!1),[ce,oe]=(0,r.useState)([]),[de,me]=(0,r.useState)([]),[ue,xe]=(0,r.useState)({loading:!0,data:null,error:null});(0,r.useEffect)(()=>{(async()=>{if(X)try{const[e,s]=await Promise.all([(0,W.Tw)(X).catch(()=>null),(0,W.u9)(X).catch(()=>null)]);null!==e&&void 0!==e&&e.success||null!==e&&void 0!==e&&e.data?Q(e.data):Q(null),null!==s&&void 0!==s&&s.success||null!==s&&void 0!==s&&s.data?se(s.data):s&&se(s)}catch(e){f.oR.error("Failed to load stock data")}finally{q(!1)}})();(async()=>{try{var e,s,a,t,r;ne(!0);const l=((null===(e=stockResponse)||void 0===e||null===(s=e.data)||void 0===s?void 0:s.recent_prices)||[]).map(e=>{var s;return{time:e.timestamp||e.time,open:e.open,high:e.high,low:e.low,close:null!==(s=e.close)&&void 0!==s?s:e.price,volume:e.volume}});le(l);const i=l.map(e=>{var s;return Number(null!==(s=e.close)&&void 0!==s?s:0)}),n=l.map(e=>{var s,a;return Number(null!==(s=null!==(a=e.high)&&void 0!==a?a:e.close)&&void 0!==s?s:0)}),c=l.map(e=>{var s,a;return Number(null!==(s=null!==(a=e.low)&&void 0!==a?a:e.close)&&void 0!==s?s:0)}),o=l.map(e=>{var s;return Number(null!==(s=e.volume)&&void 0!==s?s:0)}),d=await U([{name:"sma",period:20},{name:"ema",period:12},{name:"ema",period:26}],{closes:i,highs:n,lows:c,volumes:o}),m=l.map(e=>e.time),u=e=>(e||[]).map((e,s)=>null==e?null:{time:m[s],value:Number(e)}).filter(Boolean),x=[];null!==d&&void 0!==d&&null!==(a=d.output)&&void 0!==a&&a.sma20&&x.push({name:"SMA20",color:"#3b82f6",values:u(d.output.sma20)}),null!==d&&void 0!==d&&null!==(t=d.output)&&void 0!==t&&t.ema12&&x.push({name:"EMA12",color:"#f59e0b",values:u(d.output.ema12)}),null!==d&&void 0!==d&&null!==(r=d.output)&&void 0!==r&&r.ema26&&x.push({name:"EMA26",color:"#10b981",values:u(d.output.ema26)}),oe(x)}finally{ne(!1)}})(),(async()=>{try{xe(e=>(0,t.A)((0,t.A)({},e),{},{loading:!0,error:null}));const e=await(0,W.oJ)(X);xe({loading:!1,data:e,error:null!==e&&void 0!==e&&e.success?null:(null===e||void 0===e?void 0:e.error)||"No data"})}catch(e){xe({loading:!1,data:null,error:"Failed to load"})}})();const e=setInterval(async()=>{try{const e=await(0,W.u9)(X);e&&se(e)}catch(e){}},3e4);return()=>clearInterval(e)},[X]);const he=e=>(0,V.a6)(e,"USD","$\u2014"),ve=e=>{const s=Number(e||0);return Number.isFinite(s)?s>=1e12?"$".concat((s/1e12).toFixed(2),"T"):s>=1e9?"$".concat((s/1e9).toFixed(2),"B"):s>=1e6?"$".concat((s/1e6).toFixed(2),"M"):"$".concat(s.toLocaleString()):"$0"},pe=e=>{const s=Number(e||0);return Number.isFinite(s)?s>=1e6?"".concat((s/1e6).toFixed(1),"M"):s>=1e3?"".concat((s/1e3).toFixed(0),"K"):s.toLocaleString():"0"};if(Y)return(0,T.jsx)("div",{className:"container mx-auto px-4 py-8 max-w-6xl",children:(0,T.jsxs)("div",{className:"space-y-6",children:[(0,T.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,T.jsx)(b.E,{className:"h-10 w-20"}),(0,T.jsx)(b.E,{className:"h-8 w-48"})]}),(0,T.jsxs)("div",{className:"grid lg:grid-cols-3 gap-6",children:[(0,T.jsx)("div",{className:"lg:col-span-2",children:(0,T.jsxs)(c.Zp,{children:[(0,T.jsxs)(c.aR,{children:[(0,T.jsx)(b.E,{className:"h-8 w-32"}),(0,T.jsx)(b.E,{className:"h-6 w-48"})]}),(0,T.jsx)(c.Wu,{children:(0,T.jsx)(b.E,{className:"h-64 w-full"})})]})}),(0,T.jsx)("div",{children:(0,T.jsxs)(c.Zp,{children:[(0,T.jsx)(c.aR,{children:(0,T.jsx)(b.E,{className:"h-6 w-24"})}),(0,T.jsx)(c.Wu,{children:(0,T.jsx)("div",{className:"space-y-4",children:[1,2,3,4].map(e=>(0,T.jsxs)("div",{className:"flex justify-between",children:[(0,T.jsx)(b.E,{className:"h-4 w-24"}),(0,T.jsx)(b.E,{className:"h-4 w-16"})]},e))})})]})})]})]})});if(!J)return(0,T.jsxs)("div",{className:"container mx-auto px-4 py-8 max-w-6xl",children:[(0,T.jsx)(l.A,{title:"Stock Not Found | Trade Scan Pro",robots:"noindex,follow"}),(0,T.jsxs)(y.Fc,{variant:"destructive",children:[(0,T.jsx)(w.A,{className:"h-4 w-4"}),(0,T.jsxs)(y.TN,{children:['Stock data not found for symbol "',X,'". Please check the symbol and try again.']})]})]});const je=(0,t.A)((0,t.A)({},J||{}),ee||{}),Ne=Number(je.change_percent||0)>=0,ge=e=>{const s=Number(e);if(!Number.isFinite(s))return null;const a=s>1?s:100*s;return"".concat("").concat(a.toFixed(2),"%")},be=e=>{if(Array.isArray(e)){if(!e.length)return null;return e.every(e=>["string","number","boolean"].includes(typeof e))?e.join(", "):null}return"object"===typeof e?null:e},ye=(e,s,a,t)=>{const r=be(t);(0,V.b2)(r)||e.push({key:s,label:a,value:r})},fe=(()=>{const e=[];ye(e,"exchange","Exchange",je.exchange),ye(e,"currency","Currency",je.currency||"USD");const s=(0,V.b2)(je.formatted_market_cap)?(0,V.b2)(je.market_cap)?null:ve(je.market_cap):je.formatted_market_cap;ye(e,"market_cap","Market Cap",s);const a=(0,V.b2)(je.volume_today)?je.volume:je.volume_today;ye(e,"volume","Volume",Number.isFinite(Number(a))?pe(a):a),ye(e,"avg_volume_3mon","Avg Volume (3m)",Number.isFinite(Number(je.avg_volume_3mon))?pe(je.avg_volume_3mon):je.avg_volume_3mon),ye(e,"dvav","Volume vs Avg",Number.isFinite(Number(je.dvav))?"".concat((100*Number(je.dvav)).toFixed(1),"%"):je.dvav);const t=(0,V.b2)(je.days_range)?(0,V.b2)(je.days_low)||(0,V.b2)(je.days_high)?null:"".concat(he(je.days_low)," - ").concat(he(je.days_high)):je.days_range;if(ye(e,"days_range","Day Range",t),ye(e,"bid_price","Bid",Number.isFinite(Number(je.bid_price))?he(je.bid_price):je.bid_price),ye(e,"ask_price","Ask",Number.isFinite(Number(je.ask_price))?he(je.ask_price):je.ask_price),ye(e,"bid_ask_spread","Bid-Ask Spread",je.bid_ask_spread),Number.isFinite(Number(je.pe_ratio))&&ye(e,"pe_ratio","P/E Ratio",Number(je.pe_ratio).toFixed(2)),!(0,V.b2)(je.dividend_yield)){const s=Number(je.dividend_yield),a=Number.isFinite(s)?"".concat(s>1?s.toFixed(2):(100*s).toFixed(2),"%"):je.dividend_yield;ye(e,"dividend_yield","Dividend Yield",a)}if(Number.isFinite(Number(je.earnings_per_share))&&ye(e,"earnings_per_share","EPS",Number(je.earnings_per_share).toFixed(2)),Number.isFinite(Number(je.book_value))&&ye(e,"book_value","Book Value",he(je.book_value)),Number.isFinite(Number(je.price_to_book))&&ye(e,"price_to_book","Price/Book",Number(je.price_to_book).toFixed(2)),!(0,V.b2)(je.change_percent)){const s=ge(je.change_percent);s&&ye(e,"change_percent","Change (Today)",s)}if(!(0,V.b2)(je.price_change_week)){const s=ge(je.price_change_week);s&&ye(e,"price_change_week","Change (Week)",s)}if(!(0,V.b2)(je.price_change_month)){const s=ge(je.price_change_month);s&&ye(e,"price_change_month","Change (Month)",s)}if(!(0,V.b2)(je.price_change_year)){const s=ge(je.price_change_year);s&&ye(e,"price_change_year","Change (Year)",s)}const r=new Set(e.map(e=>e.key)),l=new Set(["ticker","symbol","company_name","name","current_price","price_change_today","last_updated","market_cap_change_3mon","pe_change_3mon","recent_prices"]);return Object.keys(je).forEach(s=>{if(r.has(s)||l.has(s))return;const a=je[s];if((0,V.b2)(a))return;const t=s.replace(/_/g," ").replace(/\b\w/g,e=>e.toUpperCase());let i=be(a);"number"===typeof a&&Number.isFinite(a)&&(i=Math.abs(a)>=1e6?a.toLocaleString():a.toString()),e.push({key:s,label:t,value:i})}),e})();return(0,T.jsxs)("div",{className:"container mx-auto px-4 py-8 max-w-6xl",children:[(0,T.jsx)(l.A,{title:"".concat(J.ticker," | ").concat(J.company_name," | Trade Scan Pro"),description:"Live quote, key stats and news for ".concat(J.company_name," (").concat(J.ticker,")."),url:"https://tradescanpro.com/app/stocks/".concat(encodeURIComponent(J.ticker)),robots:"noindex,follow"}),(0,T.jsxs)("div",{className:"space-y-6",children:[(0,T.jsx)("div",{className:"flex items-center space-x-4",children:(0,T.jsx)(n.$,{variant:"ghost",size:"sm",asChild:!0,children:(0,T.jsxs)(i.N_,{to:"/app/stocks",children:[(0,T.jsx)(_.A,{className:"h-4 w-4 mr-2"}),"Back to Stocks"]})})}),(0,T.jsx)(c.Zp,{children:(0,T.jsxs)(c.Wu,{className:"p-6",children:[(0,T.jsxs)("div",{className:"flex items-center justify-between sm:flex-nowrap flex-wrap gap-3",children:[(0,T.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,T.jsxs)("div",{children:[(0,T.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,T.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:J.ticker}),(0,T.jsx)(o.E,{variant:"outline",children:J.exchange})]}),(0,T.jsx)("h2",{className:"text-xl text-gray-600 mt-1",children:J.company_name})]}),(0,T.jsxs)("div",{className:"text-right",children:[(0,T.jsx)("div",{className:"text-3xl font-bold",children:Number.isFinite(Number(je.current_price))?he(Number(je.current_price)):"$0.00"}),(0,T.jsxs)("div",{className:"flex items-center text-lg font-semibold ".concat(Ne?"text-green-600":"text-red-600"),children:[Ne?(0,T.jsx)(k.A,{className:"h-5 w-5 mr-1"}):(0,T.jsx)(S.A,{className:"h-5 w-5 mr-1"}),Ne?"+":"",Number.isFinite(Number(je.price_change_today))?Number(je.price_change_today).toFixed(2):"0.00","(",Ne?"+":"",Number.isFinite(Number(je.change_percent))?Number(je.change_percent).toFixed(2):"0.00","%)"]})]})]}),(0,T.jsxs)("div",{className:"flex items-center space-x-2 sm:flex-nowrap flex-wrap gap-2",children:[(0,T.jsx)(n.$,{asChild:!0,variant:"outline",children:(0,T.jsxs)(i.N_,{to:"/app/watchlists?symbol=".concat(encodeURIComponent(X)),children:[(0,T.jsx)(A.A,{className:"h-4 w-4 mr-2"}),"Watch"]})}),(0,T.jsx)(n.$,{asChild:!0,variant:"outline",children:(0,T.jsxs)(i.N_,{to:"/app/alerts?ticker=".concat(encodeURIComponent(X)),children:[(0,T.jsx)(F.A,{className:"h-4 w-4 mr-2"}),"Alert"]})})]})]}),(0,T.jsxs)("div",{className:"mt-4 text-sm text-gray-500",children:["Last updated: ",je.last_updated?new Date(je.last_updated).toLocaleString():"N/A"]}),(0,T.jsx)("div",{className:"mt-6 overflow-hidden border rounded-lg",children:(0,T.jsx)("table",{className:"min-w-full text-sm",children:(0,T.jsx)("tbody",{className:"divide-y",children:fe.map(e=>(0,T.jsxs)("tr",{className:"odd:bg-gray-50",children:[(0,T.jsx)("td",{className:"p-3 text-gray-600",children:e.label}),(0,T.jsx)("td",{className:"p-3 font-medium",children:e.value})]},e.key))})})})]})}),(0,T.jsxs)("div",{className:"grid lg:grid-cols-3 gap-6",children:[(0,T.jsx)("div",{className:"lg:col-span-2",children:(0,T.jsxs)(d.tU,{value:ae,onValueChange:te,children:[(0,T.jsxs)(d.j7,{className:"grid w-full grid-cols-4",children:[(0,T.jsx)(d.Xi,{value:"overview",children:"Overview"}),(0,T.jsx)(d.Xi,{value:"valuation",children:"Valuation"}),(0,T.jsx)(d.Xi,{value:"insiders",children:"Insiders"}),(0,T.jsx)(d.Xi,{value:"news",children:"News"})]}),(0,T.jsxs)(d.av,{value:"overview",className:"space-y-4",children:[(0,T.jsxs)(c.Zp,{children:[(0,T.jsx)(c.aR,{children:(0,T.jsx)(c.ZB,{children:"Key Statistics"})}),(0,T.jsx)(c.Wu,{children:(0,T.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,T.jsxs)("div",{className:"text-center p-4 bg-blue-50 rounded-lg",children:[(0,T.jsx)(C.A,{className:"h-6 w-6 text-blue-500 mx-auto mb-2"}),(0,T.jsx)("div",{className:"text-2xl font-bold text-blue-600",children:pe(je.volume)}),(0,T.jsx)("div",{className:"text-sm text-blue-600",children:"Volume"})]}),(0,T.jsxs)("div",{className:"text-center p-4 bg-green-50 rounded-lg",children:[(0,T.jsx)(R.A,{className:"h-6 w-6 text-green-500 mx-auto mb-2"}),(0,T.jsx)("div",{className:"text-2xl font-bold text-green-600",children:ve(je.market_cap)}),(0,T.jsx)("div",{className:"text-sm text-green-600",children:"Market Cap"})]}),(0,T.jsxs)("div",{className:"text-center p-4 bg-purple-50 rounded-lg",children:[(0,T.jsx)(E.A,{className:"h-6 w-6 text-purple-500 mx-auto mb-2"}),(0,T.jsx)("div",{className:"text-2xl font-bold text-purple-600",children:(null===(e=je.pe_ratio)||void 0===e?void 0:e.toFixed(1))||"N/A"}),(0,T.jsx)("div",{className:"text-sm text-purple-600",children:"P/E Ratio"})]}),(0,T.jsxs)("div",{className:"text-center p-4 bg-yellow-50 rounded-lg",children:[(0,T.jsx)(D.A,{className:"h-6 w-6 text-yellow-500 mx-auto mb-2"}),(0,T.jsxs)("div",{className:"text-2xl font-bold text-yellow-600",children:[(null===(s=je.dividend_yield)||void 0===s?void 0:s.toFixed(2))||"0.00","%"]}),(0,T.jsx)("div",{className:"text-sm text-yellow-600",children:"Dividend Yield"})]})]})})]}),(0,T.jsxs)(c.Zp,{children:[(0,T.jsxs)(c.aR,{children:[(0,T.jsx)(c.ZB,{children:"Price History"}),(0,T.jsx)(c.BT,{children:"Recent price movements"})]}),(0,T.jsx)(c.Wu,{children:(0,T.jsx)("div",{className:"w-full",children:(0,T.jsx)(P,{data:re,overlays:ce,height:400})})})]})]}),(0,T.jsxs)(d.av,{value:"valuation",className:"space-y-4",children:[(0,T.jsxs)(c.Zp,{children:[(0,T.jsxs)(c.aR,{children:[(0,T.jsx)(c.ZB,{children:"Fair Value (Restricted) \u2014 Subsector Multiples"}),(0,T.jsx)(c.BT,{children:"Based on sector/subsector P/E multiples \xd7 forward EPS"})]}),(0,T.jsxs)(c.Wu,{children:[(()=>{const e=((null===J||void 0===J?void 0:J.valuation)||{}).fair_value_restricted||{},s=[{label:"Low",value:e.low},{label:"Base",value:e.base},{label:"High",value:e.high}].filter(e=>Number.isFinite(Number(e.value))&&Number(e.value)>0).map((e,s)=>({name:e.label,value:Number(e.value)}));return s.length?(0,T.jsx)("div",{className:"h-72",children:(0,T.jsx)(m.u,{width:"100%",height:"100%",children:(0,T.jsxs)(u.Q,{data:s,margin:{top:10,right:20,left:0,bottom:0},children:[(0,T.jsx)("defs",{children:(0,T.jsxs)("linearGradient",{id:"colorFv",x1:"0",y1:"0",x2:"0",y2:"1",children:[(0,T.jsx)("stop",{offset:"5%",stopColor:"#3b82f6",stopOpacity:.4}),(0,T.jsx)("stop",{offset:"95%",stopColor:"#3b82f6",stopOpacity:.05})]})}),(0,T.jsx)(x.d,{strokeDasharray:"3 3"}),(0,T.jsx)(h.W,{dataKey:"name"}),(0,T.jsx)(v.h,{tickFormatter:e=>"$".concat(e)}),(0,T.jsx)(p.m,{formatter:e=>[(0,V.a6)(e,"USD","$\u2014"),"Fair Value"]}),(0,T.jsx)(j.G,{type:"monotone",dataKey:"value",stroke:"#3b82f6",fillOpacity:1,fill:"url(#colorFv)"})]})})}):(0,T.jsx)("div",{className:"text-sm text-gray-500",children:"No fair value data yet."})})(),(0,T.jsxs)("div",{className:"mt-4 grid grid-cols-2 md:grid-cols-4 gap-3 text-sm",children:[(0,T.jsxs)("div",{children:[(0,T.jsx)("div",{className:"text-gray-500",children:"Forward EPS"}),(0,T.jsx)("div",{className:"font-medium",children:(0,V._V)(null===J||void 0===J||null===(a=J.valuation)||void 0===a?void 0:a.forward_eps,2,"N/A")})]}),(0,T.jsxs)("div",{children:[(0,T.jsx)("div",{className:"text-gray-500",children:"Sector"}),(0,T.jsx)("div",{className:"font-medium",children:(0,V.b2)(null===J||void 0===J||null===(B=J.valuation)||void 0===B?void 0:B.sector)?"N/A":J.valuation.sector})]}),(0,T.jsxs)("div",{children:[(0,T.jsx)("div",{className:"text-gray-500",children:"PE (Subsector Base)"}),(0,T.jsx)("div",{className:"font-medium",children:(0,V._V)(null===J||void 0===J||null===(M=J.valuation)||void 0===M?void 0:M.subsector_pe_base,1,"N/A")})]}),(0,T.jsxs)("div",{children:[(0,T.jsx)("div",{className:"text-gray-500",children:"Analyst Target"}),(0,T.jsx)("div",{className:"font-medium",children:(0,V.a6)(null===J||void 0===J||null===(Z=J.valuation)||void 0===Z?void 0:Z.analyst_target,"USD","N/A")})]})]})]})]}),(0,T.jsxs)(c.Zp,{children:[(0,T.jsxs)(c.aR,{children:[(0,T.jsx)(c.ZB,{children:"Fair Value (Unrestricted) \u2014 Company Trajectory"}),(0,T.jsx)(c.BT,{children:"Company forward P/E \xd7 forward EPS (log scale)"})]}),(0,T.jsxs)(c.Wu,{children:[(()=>{const e=(null===J||void 0===J?void 0:J.valuation)||{},s=Number(e.fair_value_unrestricted);if(!Number.isFinite(s)||s<=0)return(0,T.jsx)("div",{className:"text-sm text-gray-500",children:"No fair value data yet."});const a=[{name:"Now",value:Number(je.current_price)||0},{name:"FV",value:s}];return(0,T.jsx)("div",{className:"h-72",children:(0,T.jsx)(m.u,{width:"100%",height:"100%",children:(0,T.jsxs)(N.b,{data:a,margin:{top:10,right:20,left:0,bottom:0},children:[(0,T.jsx)(x.d,{strokeDasharray:"3 3"}),(0,T.jsx)(h.W,{dataKey:"name"}),(0,T.jsx)(v.h,{scale:"log",domain:["auto","auto"],tickFormatter:e=>"$".concat(e),allowDataOverflow:!0}),(0,T.jsx)(p.m,{formatter:e=>[(0,V.a6)(e,"USD","$\u2014"),"Value"]}),(0,T.jsx)(g.N,{type:"monotone",dataKey:"value",stroke:"#10b981",strokeWidth:2,dot:{r:4}})]})})})})(),(0,T.jsxs)("div",{className:"mt-4 grid grid-cols-2 md:grid-cols-4 gap-3 text-sm",children:[(0,T.jsxs)("div",{children:[(0,T.jsx)("div",{className:"text-gray-500",children:"Forward P/E"}),(0,T.jsx)("div",{className:"font-medium",children:(0,V._V)(null===J||void 0===J||null===($=J.valuation)||void 0===$?void 0:$.forward_pe,1,"N/A")})]}),(0,T.jsxs)("div",{children:[(0,T.jsx)("div",{className:"text-gray-500",children:"RSI(14)"}),(0,T.jsx)("div",{className:"font-medium",children:(0,V._V)(null===J||void 0===J||null===(I=J.valuation)||void 0===I?void 0:I.rsi14,2,"N/A")})]})]})]})]})]}),(0,T.jsx)(d.av,{value:"insiders",className:"space-y-4",children:(0,T.jsxs)(c.Zp,{children:[(0,T.jsxs)(c.aR,{children:[(0,T.jsx)(c.ZB,{children:"Recent Insider Trades (Last 30 Days)"}),(0,T.jsx)(c.BT,{children:"SEC Form 4 filings for executives and directors"})]}),(0,T.jsx)(c.Wu,{children:ue.loading?(0,T.jsx)("div",{className:"text-sm text-gray-500",children:"Loading insider trades..."}):ue.error?(0,T.jsx)("div",{className:"text-sm text-red-600",children:ue.error}):null!==(O=ue.data)&&void 0!==O&&O.success?(0,T.jsxs)(T.Fragment,{children:[(0,T.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-4",children:[(0,T.jsxs)("div",{className:"bg-gray-50 rounded p-3",children:[(0,T.jsx)("div",{className:"text-xs text-gray-500",children:"Signal"}),(0,T.jsx)("div",{className:"text-base font-semibold",children:(null===(z=ue.data.summary)||void 0===z?void 0:z.signal)||"Neutral"})]}),(0,T.jsxs)("div",{className:"bg-gray-50 rounded p-3",children:[(0,T.jsx)("div",{className:"text-xs text-gray-500",children:"Net Activity (shares)"}),(0,T.jsx)("div",{className:"text-base font-semibold",children:Number((null===(K=ue.data.summary)||void 0===K?void 0:K.net_insider_activity_shares)||0).toLocaleString()})]}),(0,T.jsxs)("div",{className:"bg-gray-50 rounded p-3",children:[(0,T.jsx)("div",{className:"text-xs text-gray-500",children:"Records"}),(0,T.jsx)("div",{className:"text-base font-semibold",children:(null===(G=ue.data.summary)||void 0===G?void 0:G.records_count)||0})]}),(0,T.jsxs)("div",{className:"bg-gray-50 rounded p-3",children:[(0,T.jsx)("div",{className:"text-xs text-gray-500",children:"CIK"}),(0,T.jsx)("div",{className:"text-base font-semibold",children:ue.data.cik})]})]}),(0,T.jsx)("div",{className:"overflow-auto border rounded",children:(0,T.jsxs)("table",{className:"min-w-full text-sm",children:[(0,T.jsx)("thead",{className:"bg-gray-50",children:(0,T.jsxs)("tr",{children:[(0,T.jsx)("th",{className:"text-left p-2",children:"Date"}),(0,T.jsx)("th",{className:"text-left p-2",children:"Insider"}),(0,T.jsx)("th",{className:"text-left p-2",children:"Role"}),(0,T.jsx)("th",{className:"text-left p-2",children:"Type"}),(0,T.jsx)("th",{className:"text-right p-2",children:"Shares"}),(0,T.jsx)("th",{className:"text-right p-2",children:"Price"}),(0,T.jsx)("th",{className:"text-right p-2",children:"Value"})]})}),(0,T.jsx)("tbody",{className:"divide-y",children:(ue.data.records||[]).map((e,s)=>(0,T.jsxs)("tr",{className:"odd:bg-white even:bg-gray-50",children:[(0,T.jsx)("td",{className:"p-2 whitespace-nowrap",children:e.date}),(0,T.jsx)("td",{className:"p-2",children:e.insider_name}),(0,T.jsx)("td",{className:"p-2",children:e.role}),(0,T.jsxs)("td",{className:"p-2",children:[e.transaction_type,e.ad?" (".concat("A"===e.ad?"Buy":"D"===e.ad?"Sell":e.ad,")"):""]}),(0,T.jsx)("td",{className:"p-2 text-right",children:Number(e.shares||0).toLocaleString()}),(0,T.jsx)("td",{className:"p-2 text-right",children:null!=e.price?"$".concat(Number(e.price).toFixed(2)):"-"}),(0,T.jsx)("td",{className:"p-2 text-right",children:null!=e.value?"$".concat(Number(e.value).toFixed(2)):"-"})]},s))})]})})]}):(0,T.jsx)("div",{className:"text-sm text-gray-500",children:"No insider data available."})})]})}),(0,T.jsx)(d.av,{value:"news",className:"space-y-4",children:(0,T.jsx)(H,{symbol:X,maxItems:15,showHeader:!1})})]})}),(0,T.jsxs)("div",{className:"space-y-6",children:[(0,T.jsxs)(c.Zp,{children:[(0,T.jsx)(c.aR,{children:(0,T.jsx)(c.ZB,{children:"Quick Stats"})}),(0,T.jsxs)(c.Wu,{className:"space-y-3",children:[(0,T.jsxs)("div",{className:"flex justify-between",children:[(0,T.jsx)("span",{className:"text-gray-600",children:"Open"}),(0,T.jsx)("span",{className:"font-medium",children:he(je.current_price-(je.price_change_today||0))})]}),(0,T.jsxs)("div",{className:"flex justify-between",children:[(0,T.jsx)("span",{className:"text-gray-600",children:"High"}),(0,T.jsx)("span",{className:"font-medium",children:he(1.02*je.current_price)})]}),(0,T.jsxs)("div",{className:"flex justify-between",children:[(0,T.jsx)("span",{className:"text-gray-600",children:"Low"}),(0,T.jsx)("span",{className:"font-medium",children:he(.98*je.current_price)})]}),(0,T.jsxs)("div",{className:"flex justify-between",children:[(0,T.jsx)("span",{className:"text-gray-600",children:"Volume"}),(0,T.jsx)("span",{className:"font-medium",children:pe(je.volume)})]}),(0,T.jsxs)("div",{className:"flex justify-between",children:[(0,T.jsx)("span",{className:"text-gray-600",children:"Avg Volume"}),(0,T.jsx)("span",{className:"font-medium",children:pe(.8*je.volume)})]})]})]}),(0,T.jsxs)(c.Zp,{children:[(0,T.jsx)(c.aR,{children:(0,T.jsx)(c.ZB,{children:"Actions"})}),(0,T.jsxs)(c.Wu,{className:"space-y-2",children:[(0,T.jsxs)(n.$,{className:"w-full",onClick:async()=>{try{await(0,W.dp)(X,{watchlist_name:"My Watchlist",notes:"Added ".concat(J.company_name," from stock detail page")}),f.oR.success("".concat(X," added to watchlist"))}catch(e){f.oR.error("Failed to add ".concat(X," to watchlist"))}},children:[(0,T.jsx)(A.A,{className:"h-4 w-4 mr-2"}),"Add to Watchlist"]}),(0,T.jsxs)(n.$,{variant:"outline",className:"w-full",onClick:async()=>{try{await(0,W.Tj)({ticker:X,target_price:1.05*J.current_price,condition:"above",email:"user@example.com"}),f.oR.success("Price alert created successfully")}catch(e){f.oR.error("Failed to create price alert")}},children:[(0,T.jsx)(F.A,{className:"h-4 w-4 mr-2"}),"Set Price Alert"]}),(0,T.jsx)(n.$,{variant:"outline",className:"w-full",asChild:!0,children:(0,T.jsxs)("a",{href:"https://finance.yahoo.com/quote/".concat(X),target:"_blank",rel:"noopener noreferrer",children:[(0,T.jsx)(L.A,{className:"h-4 w-4 mr-2"}),"View on Yahoo Finance"]})})]})]}),(0,T.jsxs)(c.Zp,{children:[(0,T.jsx)(c.aR,{children:(0,T.jsx)(c.ZB,{children:"Related Stocks"})}),(0,T.jsx)(c.Wu,{children:(0,T.jsxs)("div",{className:"space-y-2",children:[(0,T.jsxs)("div",{className:"flex items-center justify-between p-2 hover:bg-gray-50 rounded",children:[(0,T.jsx)(i.N_,{to:"/app/stocks/AAPL",className:"font-medium text-blue-600",children:"AAPL"}),(0,T.jsx)("span",{className:"text-green-600",children:"+1.25%"})]}),(0,T.jsxs)("div",{className:"flex items-center justify-between p-2 hover:bg-gray-50 rounded",children:[(0,T.jsx)(i.N_,{to:"/app/stocks/MSFT",className:"font-medium text-blue-600",children:"MSFT"}),(0,T.jsx)("span",{className:"text-red-600",children:"-0.83%"})]}),(0,T.jsxs)("div",{className:"flex items-center justify-between p-2 hover:bg-gray-50 rounded",children:[(0,T.jsx)(i.N_,{to:"/app/stocks/GOOGL",className:"font-medium text-blue-600",children:"GOOGL"}),(0,T.jsx)("span",{className:"text-green-600",children:"+2.14%"})]})]})})]})]})]})]})]})}}}]);
//# sourceMappingURL=454.1491eb52.chunk.js.map