/*! For license information please see 4658.f84e45ca.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[4658],{3787:(e,s,a)=>{a.d(s,{A0:()=>N,BF:()=>v,Hj:()=>f,XI:()=>p,nA:()=>y,nd:()=>g});var c=a(2555),r=a(3986),t=a(9950),n=a(90),l=a(4414);const i=["className"],d=["className"],o=["className"],m=["className"],x=["className"],h=["className"],u=["className"],j=["className"],p=t.forwardRef((e,s)=>{let{className:a}=e,t=(0,r.A)(e,i);return(0,l.jsx)("div",{className:"relative w-full overflow-auto",children:(0,l.jsx)("table",(0,c.A)({ref:s,className:(0,n.cn)("w-full caption-bottom text-sm",a)},t))})});p.displayName="Table";const N=t.forwardRef((e,s)=>{let{className:a}=e,t=(0,r.A)(e,d);return(0,l.jsx)("thead",(0,c.A)({ref:s,className:(0,n.cn)("[&_tr]:border-b",a)},t))});N.displayName="TableHeader";const v=t.forwardRef((e,s)=>{let{className:a}=e,t=(0,r.A)(e,o);return(0,l.jsx)("tbody",(0,c.A)({ref:s,className:(0,n.cn)("[&_tr:last-child]:border-0",a)},t))});v.displayName="TableBody";t.forwardRef((e,s)=>{let{className:a}=e,t=(0,r.A)(e,m);return(0,l.jsx)("tfoot",(0,c.A)({ref:s,className:(0,n.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",a)},t))}).displayName="TableFooter";const f=t.forwardRef((e,s)=>{let{className:a}=e,t=(0,r.A)(e,x);return(0,l.jsx)("tr",(0,c.A)({ref:s,className:(0,n.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",a)},t))});f.displayName="TableRow";const g=t.forwardRef((e,s)=>{let{className:a}=e,t=(0,r.A)(e,h);return(0,l.jsx)("th",(0,c.A)({ref:s,className:(0,n.cn)("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",a)},t))});g.displayName="TableHead";const y=t.forwardRef((e,s)=>{let{className:a}=e,t=(0,r.A)(e,u);return(0,l.jsx)("td",(0,c.A)({ref:s,className:(0,n.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",a)},t))});y.displayName="TableCell";t.forwardRef((e,s)=>{let{className:a}=e,t=(0,r.A)(e,j);return(0,l.jsx)("caption",(0,c.A)({ref:s,className:(0,n.cn)("mt-4 text-sm text-muted-foreground",a)},t))}).displayName="TableCaption"},4658:(e,s,a)=>{a.r(s),a.d(s,{default:()=>N});var c=a(9950),r=a(827),t=a(1111),n=a(4245),l=a(9630),i=a(3787),d=a(7255),o=a(7838),m=a(6987),x=a(5391),h=a(6890),u=a(2033),j=a(5508),p=a(4414);const N=()=>{var e,s;const{id:a}=(0,r.g)(),[N,v]=(0,c.useState)([]),[f,g]=(0,c.useState)(null),[y,b]=(0,c.useState)(!0),[A,k]=(0,c.useState)(!1);(0,c.useEffect)(()=>{w()},[a]);const w=async()=>{b(!0);try{const e=window.localStorage.getItem("screener:lastParams"),s=e?JSON.parse(e):{},c=await(0,j.qm)(s),r=Array.isArray(null===c||void 0===c?void 0:c.results)?c.results:Array.isArray(c)?c:[];g({name:"adhoc"===a?"Ad-hoc Screener":"Screener ".concat(a),description:"Results from backend filter",lastRun:(new Date).toISOString(),criteria:Object.keys(s||{}).map(e=>"".concat(e,"=").concat(s[e]))}),v(r.map(e=>({ticker:e.ticker||e.symbol,company_name:e.company_name||e.name||"-",current_price:Number(e.current_price||e.price||0),change_percent:Number(e.change_percent||e.change||0),volume:Number(e.volume||0),market_cap:Number(e.market_cap||0),exchange:e.exchange||"-"})))}catch(e){u.oR.error("Failed to fetch results"),v([])}finally{b(!1)}};return y?(0,p.jsx)("div",{className:"container mx-auto px-4 py-8",children:(0,p.jsxs)("div",{className:"animate-pulse space-y-4",children:[(0,p.jsx)("div",{className:"h-8 bg-gray-200 rounded w-1/3"}),(0,p.jsx)("div",{className:"h-32 bg-gray-200 rounded"}),(0,p.jsx)("div",{className:"h-64 bg-gray-200 rounded"})]})}):(0,p.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,p.jsxs)("div",{className:"flex justify-between items-center mb-8",children:[(0,p.jsxs)("div",{children:[(0,p.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Screener Results"}),(0,p.jsx)("p",{className:"text-gray-600 mt-2",children:null===f||void 0===f?void 0:f.name})]}),(0,p.jsxs)("div",{className:"flex gap-2",children:[(0,p.jsxs)(t.$,{variant:"outline",onClick:()=>{const e=["Ticker,Company,Price,Change %,Volume,Market Cap,Exchange",...N.map(e=>"".concat(e.ticker,",").concat(e.company_name,",").concat(e.current_price,",").concat(e.change_percent,",").concat(e.volume,",").concat(e.market_cap,",").concat(e.exchange))].join("\n"),s=new Blob([e],{type:"text/csv"}),c=window.URL.createObjectURL(s),r=document.createElement("a");r.href=c,r.download="screener-results-".concat(a,".csv"),r.click(),window.URL.revokeObjectURL(c),u.oR.success("Results exported to CSV")},children:[(0,p.jsx)(d.A,{className:"h-4 w-4 mr-2"}),"Export CSV"]}),(0,p.jsxs)(t.$,{onClick:async()=>{k(!0);try{await w(),u.oR.success("Results refreshed")}catch(e){u.oR.error("Failed to refresh results")}finally{k(!1)}},disabled:A,children:[(0,p.jsx)(m.A,{className:"h-4 w-4 mr-2 ".concat(A?"animate-spin":"")}),"Refresh"]})]})]}),(0,p.jsxs)("div",{className:"grid gap-6",children:[(0,p.jsxs)(n.Zp,{children:[(0,p.jsx)(n.aR,{children:(0,p.jsx)(n.ZB,{children:"Screener Information"})}),(0,p.jsxs)(n.Wu,{children:[(0,p.jsxs)("div",{className:"grid md:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,p.jsxs)("div",{children:[(0,p.jsx)("div",{className:"text-sm text-gray-500",children:"Total Results"}),(0,p.jsx)("div",{className:"text-2xl font-bold text-blue-600",children:N.length})]}),(0,p.jsxs)("div",{children:[(0,p.jsx)("div",{className:"text-sm text-gray-500",children:"Last Updated"}),(0,p.jsx)("div",{className:"text-sm font-medium",children:null!==f&&void 0!==f&&f.lastRun?new Date(f.lastRun).toLocaleString():"Never"})]}),(0,p.jsxs)("div",{children:[(0,p.jsx)("div",{className:"text-sm text-gray-500",children:"Criteria Count"}),(0,p.jsx)("div",{className:"text-2xl font-bold",children:(null===f||void 0===f||null===(e=f.criteria)||void 0===e?void 0:e.length)||0})]}),(0,p.jsxs)("div",{children:[(0,p.jsx)("div",{className:"text-sm text-gray-500",children:"Avg. Price Change"}),(0,p.jsxs)("div",{className:"text-2xl font-bold text-green-600",children:["+",(N.reduce((e,s)=>e+s.change_percent,0)/N.length).toFixed(2),"%"]})]})]}),(0,p.jsxs)("div",{className:"mt-4",children:[(0,p.jsx)("div",{className:"text-sm text-gray-500 mb-2",children:"Active Criteria:"}),(0,p.jsx)("div",{className:"flex flex-wrap gap-2",children:null===f||void 0===f||null===(s=f.criteria)||void 0===s?void 0:s.map((e,s)=>(0,p.jsx)(l.E,{variant:"outline",children:e},s))})]})]})]}),(0,p.jsxs)(n.Zp,{children:[(0,p.jsx)(n.aR,{children:(0,p.jsx)(n.ZB,{children:"Matching Stocks"})}),(0,p.jsxs)(n.Wu,{children:[(0,p.jsx)("div",{className:"overflow-x-auto",children:(0,p.jsxs)(i.XI,{children:[(0,p.jsx)(i.A0,{children:(0,p.jsxs)(i.Hj,{children:[(0,p.jsx)(i.nd,{children:"Symbol"}),(0,p.jsx)(i.nd,{children:"Company"}),(0,p.jsx)(i.nd,{children:"Price"}),(0,p.jsx)(i.nd,{children:"Change"}),(0,p.jsx)(i.nd,{children:"Volume"}),(0,p.jsx)(i.nd,{children:"Market Cap"}),(0,p.jsx)(i.nd,{children:"Exchange"}),(0,p.jsx)(i.nd,{children:"Actions"})]})}),(0,p.jsx)(i.BF,{children:N.map(e=>(0,p.jsxs)(i.Hj,{children:[(0,p.jsx)(i.nA,{children:(0,p.jsx)(r.N_,{to:"/app/stocks/".concat(e.ticker),className:"font-semibold text-blue-600 hover:underline",children:e.ticker})}),(0,p.jsx)(i.nA,{className:"font-medium",children:e.company_name}),(0,p.jsxs)(i.nA,{children:["$",e.current_price.toFixed(2)]}),(0,p.jsx)(i.nA,{children:(0,p.jsxs)("div",{className:"flex items-center ".concat(e.change_percent>=0?"text-green-600":"text-red-600"),children:[e.change_percent>=0?(0,p.jsx)(h.A,{className:"h-4 w-4 mr-1"}):(0,p.jsx)(x.A,{className:"h-4 w-4 mr-1"}),e.change_percent>=0?"+":"",e.change_percent.toFixed(2),"%"]})}),(0,p.jsx)(i.nA,{children:Number(e.volume||0).toLocaleString()}),(0,p.jsxs)(i.nA,{children:["$",(e.market_cap/1e9).toFixed(1),"B"]}),(0,p.jsx)(i.nA,{children:e.exchange}),(0,p.jsx)(i.nA,{children:(0,p.jsx)(t.$,{size:"sm",variant:"outline",asChild:!0,children:(0,p.jsxs)(r.N_,{to:"/app/stocks/".concat(e.ticker),children:[(0,p.jsx)(o.A,{className:"h-4 w-4 mr-1"}),"View"]})})})]},e.ticker))})]})}),0===N.length&&(0,p.jsxs)("div",{className:"text-center py-12",children:[(0,p.jsx)("div",{className:"text-gray-500 mb-4",children:"No stocks match your criteria"}),(0,p.jsx)(t.$,{asChild:!0,children:(0,p.jsx)(r.N_,{to:"/app/screeners/".concat(a,"/edit"),children:"Adjust Criteria"})})]})]})]})]})]})}},5391:(e,s,a)=>{a.d(s,{A:()=>c});const c=(0,a(6230).A)("trending-down",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]])},6987:(e,s,a)=>{a.d(s,{A:()=>c});const c=(0,a(6230).A)("refresh-cw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]])},7255:(e,s,a)=>{a.d(s,{A:()=>c});const c=(0,a(6230).A)("download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]])}}]);