"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[7844],{7844:(e,a,s)=>{s.r(a),s.d(a,{default:()=>c});var l=s(9950),t=s(4245),n=s(4779),d=s(1111),i=s(5508),r=s(4414);function c(){const[e,a]=(0,l.useState)(!1),[s,c]=(0,l.useState)("sandbox"),[o,p]=(0,l.useState)(""),[x,m]=(0,l.useState)(""),[u,h]=(0,l.useState)(""),[v,j]=(0,l.useState)(""),[g,y]=(0,l.useState)(null),b=async()=>{const{data:e}=await i.FH.get("/admin/settings/public");y(e),a(!!e.paypal_enabled),c(e.paypal_mode||"sandbox")};(0,l.useEffect)(()=>{b()},[]);return(0,r.jsxs)(t.Zp,{className:"max-w-2xl",children:[(0,r.jsx)(t.aR,{children:(0,r.jsx)(t.ZB,{children:"Admin Settings"})}),(0,r.jsxs)(t.Wu,{className:"space-y-4",children:[(0,r.jsx)("div",{className:"text-sm text-muted-foreground",children:"Configure PayPal now or later. Secrets are stored on the server, never exposed to the browser."}),(0,r.jsxs)("div",{className:"grid md:grid-cols-2 gap-3",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"text-sm",children:"Admin password"}),(0,r.jsx)(n.p,{type:"password",value:u,onChange:e=>h(e.target.value),placeholder:"Set or enter admin password"}),(0,r.jsx)("div",{className:"mt-2 flex gap-2",children:(0,r.jsx)(d.$,{size:"sm",variant:"outline",onClick:async()=>{try{await i.FH.post("/admin/settings/init",{},{params:{admin_password:u}}),j("Admin password initialized")}catch(s){var e,a;j((null===s||void 0===s||null===(e=s.response)||void 0===e||null===(a=e.data)||void 0===a?void 0:a.detail)||"Failed to init")}},children:"Initialize/Update Password"})})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"text-sm",children:"PayPal Mode"}),(0,r.jsx)(n.p,{value:s,onChange:e=>c(e.target.value),placeholder:"sandbox|live"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"text-sm",children:"PayPal Client ID"}),(0,r.jsx)(n.p,{value:o,onChange:e=>p(e.target.value),placeholder:"Paste sandbox client id"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"text-sm",children:"PayPal Client Secret"}),(0,r.jsx)(n.p,{type:"password",value:x,onChange:e=>m(e.target.value),placeholder:"Paste sandbox secret"})]}),(0,r.jsxs)("div",{className:"col-span-full flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"text-sm",children:["Enabled: ",e?"Yes":"No"]}),(0,r.jsx)(d.$,{onClick:()=>a(e=>!e),variant:"outline",children:"Toggle"}),(0,r.jsx)(d.$,{onClick:async()=>{try{const a={paypal_enabled:e,paypal_mode:s,paypal_client_id:o};x&&(a.paypal_client_secret=x),await i.FH.post("/admin/settings",a,{params:{admin_password:u}}),j("Saved settings"),m(""),b()}catch(t){var a,l;j((null===t||void 0===t||null===(a=t.response)||void 0===a||null===(l=a.data)||void 0===l?void 0:l.detail)||"Failed to save")}},children:"Save"})]})]}),g&&(0,r.jsxs)("div",{className:"text-xs text-muted-foreground",children:["Public: mode=",g.paypal_mode," has_client_id=",g.has_client_id?"yes":"no"," enabled=",g.paypal_enabled?"yes":"no"]}),v&&(0,r.jsx)("div",{className:"text-sm",children:v})]})]})}}}]);