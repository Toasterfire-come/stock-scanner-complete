<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Portfolio 1</title>
  <meta name="robots" content="index,follow">
  <style>
    body{font-family:ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Inter,Helvetica,Arial,sans-serif;margin:0;padding:24px;background:#f8fafc;color:#0f172a}
    .container{max-width:960px;margin:0 auto}
    .card{background:#fff;border:1px solid #e5e7eb;border-radius:12px;box-shadow:0 1px 2px rgba(0,0,0,0.04)}
    .header{display:flex;align-items:center;justify-content:space-between;padding:20px 24px;border-bottom:1px solid #e5e7eb}
    .title{font-size:22px;font-weight:700}
    .meta{color:#475569;font-size:12px}
    .content{padding:16px 24px}
    table{width:100%;border-collapse:separate;border-spacing:0}
    th,td{text-align:left;font-size:14px;padding:10px 8px;border-bottom:1px solid #e5e7eb}
    th{color:#475569;background:#f8fafc;font-weight:600}
    .right{text-align:right}
    .pill{display:inline-block;padding:2px 8px;border-radius:999px;background:#eef2ff;color:#4338ca;font-size:12px;font-weight:600}
    .toolbar{display:flex;gap:8px}
    .btn{appearance:none;border:1px solid #e5e7eb;background:#fff;border-radius:8px;padding:8px 12px;font-size:13px;cursor:pointer}
    .btn:hover{background:#f8fafc}
  </style>
  <script>
    async function loadPortfolio(){
      const res=await fetch('portfolio-1.json');
      const p=await res.json();
      document.getElementById('p-title').textContent=p.name||'Portfolio 1';
      document.getElementById('p-meta').textContent=`As of ${p.as_of} • Started ${p.started}`;
      const tbody=document.getElementById('rows');
      let totalValue=0,totalCost=0;
      (p.holdings||[]).forEach(h=>{
        const value=(h.shares||0)*(h.current_price||0);
        const cost=(h.shares||0)*(h.average_cost||0);
        totalValue+=value; totalCost+=cost;
        const ret=cost>0?((value-cost)/cost*100):0;
        const tr=document.createElement('tr');
        tr.innerHTML=
          `<td>${h.ticker}</td>`+
          `<td>${h.name||''}</td>`+
          `<td class="right">${(h.shares||0).toLocaleString()}</td>`+
          `<td class="right">$${(h.average_cost||0).toFixed(2)}</td>`+
          `<td class="right">$${(h.current_price||0).toFixed(2)}</td>`+
          `<td class="right">$${value.toFixed(2)}</td>`+
          `<td class="right">${ret.toFixed(2)}%</td>`;
        tbody.appendChild(tr);
      });
      const totalRet=totalCost>0?((totalValue-totalCost)/totalCost*100):0;
      document.getElementById('totals').textContent=`Total Value $${totalValue.toFixed(2)} • Total Cost $${totalCost.toFixed(2)} • Return ${totalRet.toFixed(2)}%`;
    }
    async function copyJson(){
      const res=await fetch('portfolio-1.json');
      const txt=await res.text();
      await navigator.clipboard.writeText(txt);
      alert('Portfolio JSON copied');
    }
    async function downloadJson(){
      const res=await fetch('portfolio-1.json');
      const txt=await res.text();
      const blob=new Blob([txt],{type:'application/json'});
      const a=document.createElement('a');
      a.href=URL.createObjectURL(blob);
      a.download='portfolio-1.json';
      a.click();
      URL.revokeObjectURL(a.href);
    }
    window.addEventListener('DOMContentLoaded',loadPortfolio);
  </script>
</head>
<body>
  <div class="container">
    <div class="card">
      <div class="header">
        <div>
          <div id="p-title" class="title">Portfolio 1</div>
          <div id="p-meta" class="meta">As of —</div>
        </div>
        <div class="toolbar">
          <span class="pill">Static</span>
          <button class="btn" onclick="copyJson()">Copy JSON</button>
          <button class="btn" onclick="downloadJson()">Download</button>
        </div>
      </div>
      <div class="content">
        <div id="totals" class="meta" style="margin-bottom:10px"></div>
        <div style="overflow:auto;border:1px solid #e5e7eb;border-radius:8px">
          <table>
            <thead>
              <tr>
                <th>Ticker</th>
                <th>Company / Fund</th>
                <th class="right">Shares</th>
                <th class="right">Avg Cost</th>
                <th class="right">Price</th>
                <th class="right">Value</th>
                <th class="right">Return</th>
              </tr>
            </thead>
            <tbody id="rows"></tbody>
          </table>
        </div>
      </div>
    </div>
  </div>
</body>
</html>

