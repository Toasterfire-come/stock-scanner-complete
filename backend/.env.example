# =============================================================================
# STOCK SCANNER - ENVIRONMENT CONFIGURATION
# =============================================================================
# Copy this file to .env and update with your actual values
# Last Updated: December 2025 - Updated for Basic/Plus 2-plan pricing
#
# IMPORTANT: After copying to .env, set permissions: chmod 600 .env
# NEVER commit .env with real credentials to version control
# =============================================================================

# =============================================================================
# DJANGO CORE SETTINGS
# =============================================================================
DJANGO_SETTINGS_MODULE=stockscanner_django.settings
DJANGO_SECRET_KEY=your-super-secret-django-key-change-this-in-production-minimum-50-characters
DJANGO_DEBUG=False
ENVIRONMENT=production

# Generate a new secret key with:
# python -c 'from django.core.management.utils import get_random_secret_key; print(get_random_secret_key())'

# =============================================================================
# ALLOWED HOSTS & DOMAINS
# =============================================================================
DJANGO_ALLOWED_HOSTS=localhost,127.0.0.1,api.retailtradescanner.com,tradescanpro.com,www.tradescanpro.com
PRIMARY_DOMAIN=api.tradescanpro.com
FRONTEND_URL=https://tradescanpro.com
WORDPRESS_URL=https://retailtradescanner.com
PRIMARY_ORIGIN=https://tradescanpro.com

# =============================================================================
# CORS & CSRF CONFIGURATION
# =============================================================================
# Must include both API and frontend origins for cross-site requests
CSRF_TRUSTED_ORIGINS=https://api.retailtradescanner.com,https://tradescanpro.com,https://www.tradescanpro.com
CORS_ALLOWED_ORIGINS=https://api.retailtradescanner.com,https://tradescanpro.com,https://www.tradescanpro.com

# =============================================================================
# COOKIE SETTINGS (Required for Cross-Site Auth)
# =============================================================================
SESSION_COOKIE_SECURE=True
SESSION_COOKIE_HTTPONLY=True
SESSION_COOKIE_SAMESITE=None
SESSION_COOKIE_AGE=21600

CSRF_COOKIE_SECURE=True
CSRF_COOKIE_HTTPONLY=True
CSRF_COOKIE_SAMESITE=None

# =============================================================================
# DATABASE CONFIGURATION (MySQL)
# =============================================================================
DB_ENGINE=django.db.backends.mysql
DB_NAME=stockscanner
DB_USER=root
DB_PASSWORD=
DB_HOST=127.0.0.1
DB_PORT=3306
CONN_MAX_AGE=60

# Alternative: Use DATABASE_URL format
# DATABASE_URL=mysql://root:@127.0.0.1:3306/stockscanner

# Production Example:
# DB_USER=stockscanner_prod
# DB_PASSWORD=YourSecurePassword123!
# DATABASE_URL=mysql://stockscanner_prod:YourSecurePassword123!@127.0.0.1:3306/stockscanner

# =============================================================================
# CACHE CONFIGURATION
# =============================================================================
# Options: locmem | db | file
# For production, consider Redis: redis://localhost:6379/0
CACHE_BACKEND=locmem
CACHE_LOCATION=stock-scanner-cache
CACHE_TIMEOUT=3600

# For database cache, uncomment and run: python manage.py createcachetable
# CACHE_TABLE=django_cache

# For file cache:
# CACHE_DIR=/var/www/cache/stockscanner

# =============================================================================
# CELERY TASK QUEUE (Optional)
# =============================================================================
CELERY_ENABLED=false
CELERY_BROKER_URL=amqp://guest:guest@localhost:5672//
CELERY_RESULT_BACKEND=rpc://
CELERY_TASK_TIME_LIMIT=600
CELERY_WORKER_CONCURRENCY=2

# =============================================================================
# PAYPAL CONFIGURATION (PRODUCTION - LIVE MODE)
# =============================================================================
PAYPAL_MODE=live
PAYPAL_ENV=live

# PayPal API Credentials - REPLACE WITH YOUR ACTUAL CREDENTIALS
PAYPAL_CLIENT_ID=your_paypal_client_id_here
PAYPAL_CLIENT_SECRET=your_paypal_client_secret_here
PAYPAL_SECRET=your_paypal_client_secret_here

# PayPal Webhook Configuration
PAYPAL_WEBHOOK_URL=https://tradescanpro.com/checkout/stock-scanner/v1/paypal-webhook
PAYPAL_WEBHOOK_ID=your_webhook_id_here

# PayPal Return URLs
PAYPAL_RETURN_URL=https://tradescanpro.com/checkout/success
PAYPAL_CANCEL_URL=https://tradescanpro.com/checkout/failure
PAYPAL_IPN_VERIFY=True

# PayPal Plan IDs for Basic and Plus Plans (2-plan setup)
# Create these in your PayPal dashboard first, then add the IDs here
PAYPAL_PLAN_BASIC_MONTHLY=your_basic_monthly_plan_id
PAYPAL_PLAN_BASIC_ANNUAL=your_basic_annual_plan_id
PAYPAL_PLAN_PLUS_MONTHLY=your_plus_monthly_plan_id
PAYPAL_PLAN_PLUS_ANNUAL=your_plus_annual_plan_id

# =============================================================================
# PRICING - NEW 2-PLAN SETUP (Basic & Plus)
# =============================================================================
# Updated December 2025 - Simplified to 2 plans

# Basic Plan - Entry Level ($29.99/mo)
BASIC_MONTHLY_PRICE=29.99
BASIC_ANNUAL_PRICE=305.99

# Plus Plan - Unlimited ($59.99/mo)
PLUS_MONTHLY_PRICE=59.99
PLUS_ANNUAL_PRICE=611.99

# Trial Configuration
FREE_TRIAL_DAYS=7
TRIAL_ENABLED=True

# Discount Settings
REFERRAL_DISCOUNT_PERCENT=50
ANNUAL_DISCOUNT_PERCENT=15

# =============================================================================
# EMAIL CONFIGURATION (SMTP)
# =============================================================================
EMAIL_BACKEND=django.core.mail.backends.smtp.EmailBackend

# SMTP Server Settings (Gmail Example)
EMAIL_HOST=smtp.gmail.com
EMAIL_PORT=587
EMAIL_USE_TLS=True
EMAIL_USE_SSL=False

# Email Account Credentials
EMAIL_HOST_USER=noreply.retailtradescanner@gmail.com
EMAIL_HOST_PASSWORD=your_app_specific_password_here

# Email Addresses
DEFAULT_FROM_EMAIL="Stock Scanner <noreply.retailtradescanner@gmail.com>"
SERVER_EMAIL="Stock Scanner Server <noreply.retailtradescanner@gmail.com>"
ADMIN_EMAIL=admin@retailtradescanner.com

# Email Rate Limiting
EMAIL_RATE_LIMIT_PER_HOUR=250
EMAIL_RATE_LIMIT_PER_DAY=500
EMAIL_DELAY_BETWEEN=1
EMAIL_SENDER_INTERVAL=5

# =============================================================================
# STOCK DATA API CONFIGURATION
# =============================================================================
# Yahoo Finance Settings
YFINANCE_RATE_LIMIT=0.25
YFINANCE_TIMEOUT=15
YFINANCE_RETRIES=3

# Alternative API Keys (Optional)
FINNHUB_API_KEYS=your_finnhub_key_1,your_finnhub_key_2
ALPHA_VANTAGE_API_KEY=your_alpha_vantage_key_here

# =============================================================================
# AI/ML API CONFIGURATION
# =============================================================================
# Groq API for AI-powered features
GROQ_API_KEY=your_groq_api_key_here

# OpenAI API (Optional)
OPENAI_API_KEY=your_openai_api_key_here

# =============================================================================
# PROXY CONFIGURATION
# =============================================================================
USE_PROXIES=True
PROXY_FILE=working_proxies.json
PROXY_TIMEOUT=10
PROXY_ROTATION_ENABLED=True

# =============================================================================
# MARKET HOURS MANAGER
# =============================================================================
# Market Hours (Eastern Time - ET)
MARKET_PREMARKET_START=04:00
MARKET_OPEN=09:30
MARKET_CLOSE=16:00
MARKET_POSTMARKET_END=20:00

# Market Hours Manager Settings
MARKET_HOURS_ENABLED=True
MARKET_HOURS_CHECK_INTERVAL=60
MARKET_HOURS_LOG_LEVEL=INFO

# Weekend Trading (Usually False)
WEEKEND_TRADING_ENABLED=False

# =============================================================================
# STOCK SCANNER SETTINGS
# =============================================================================
# Scanning Configuration
SCAN_ENABLED=True
SCAN_PREMARKET=False
SCAN_POSTMARKET=False
SCAN_REGULAR_HOURS=True

# Component Intervals (minutes)
STOCK_RETRIEVAL_INTERVAL=3
NEWS_SCRAPER_INTERVAL=5

# Scanner Performance
DEFAULT_THREADS=15
DEFAULT_TIMEOUT=8
MAX_SYMBOLS_PER_RUN=5000

# =============================================================================
# SECURITY & RATE LIMITING
# =============================================================================
# Security Headers
SECURE_SSL_REDIRECT=True
SECURE_HSTS_SECONDS=31536000
SECURE_HSTS_INCLUDE_SUBDOMAINS=True
SECURE_HSTS_PRELOAD=True
SECURE_CONTENT_TYPE_NOSNIFF=True
SECURE_BROWSER_XSS_FILTER=True
X_FRAME_OPTIONS=DENY

# Rate Limiting
RATE_LIMIT_FREE_USERS=100
RATE_LIMIT_AUTHENTICATED_USERS=1000
RATE_LIMIT_WINDOW=3600

# API Throttling
THROTTLE_RATE_ANON=200/hour
THROTTLE_RATE_USER=2000/hour
THROTTLE_RATE_LOGGING=60/min

# =============================================================================
# LOGGING CONFIGURATION
# =============================================================================
LOG_LEVEL=INFO
LOG_FORMAT=json

# Main Log Files
LOG_FILE=stock_scanner.log
ERROR_LOG_FILE=errors.log
DEBUG_LOG_FILE=debug.log
PAYMENT_LOG_FILE=paypal_payments.log

# Component Log Files
STOCK_RETRIEVAL_LOG_FILE=enhanced_stock_retrieval_working.log
NEWS_SCRAPER_LOG_FILE=news_scraper_with_restart.log
EMAIL_SENDER_LOG_FILE=email_sender_with_restart.log
MARKET_HOURS_LOG_FILE=market_hours_manager.log

# Log Rotation
LOG_MAX_SIZE=50MB
LOG_BACKUP_COUNT=5

# =============================================================================
# MONITORING & OBSERVABILITY
# =============================================================================
# Sentry Error Tracking (Optional)
SENTRY_DSN=
SENTRY_TRACES_SAMPLE_RATE=0

# Performance Monitoring
MONITORING_ENABLED=True
PERFORMANCE_TRACKING=True
ERROR_TRACKING=True

# Health Check
HEALTH_CHECK_ENABLED=True
HEALTH_CHECK_URL=/health/

# Metrics
METRICS_ENABLED=True
METRICS_ENDPOINT=/metrics/

# =============================================================================
# FEATURE FLAGS
# =============================================================================
FEATURE_MARKET_HOURS_MANAGER=True
FEATURE_RESTART_COMPONENTS=True
FEATURE_EMAIL_NOTIFICATIONS=True
FEATURE_NEWS_SCRAPING=True
FEATURE_PAYPAL_INTEGRATION=True

# =============================================================================
# EXTERNAL INTEGRATIONS
# =============================================================================
# WordPress Integration (Optional)
WORDPRESS_ENABLED=False
WORDPRESS_API_URL=https://retailtradescanner.com/wp-json
WORDPRESS_API_KEY=your_wordpress_api_key_here

# Cloudflare (Optional)
CLOUDFLARE_ENABLED=False
CLOUDFLARE_ZONE_ID=your_cloudflare_zone_id_here
CLOUDFLARE_API_TOKEN=your_cloudflare_api_token_here

# =============================================================================
# BACKUP CONFIGURATION (Optional)
# =============================================================================
BACKUP_ENABLED=False
BACKUP_SCHEDULE=daily
BACKUP_RETENTION_DAYS=30
BACKUP_STORAGE_PATH=/var/backups/stockscanner

# Database Backup
DB_BACKUP_ENABLED=False
DB_BACKUP_COMPRESSION=True

# =============================================================================
# DEVELOPMENT SETTINGS (Remove in Production)
# =============================================================================
# Debug Mode (ALWAYS False in production!)
# DJANGO_DEBUG=True

# Debug Toolbar (Development Only)
# DEBUG_TOOLBAR_ENABLED=True

# =============================================================================
# SETUP INSTRUCTIONS
# =============================================================================
# 1. Copy this file to .env:
#    cp .env.example .env
#
# 2. Generate a new Django secret key:
#    python -c 'from django.core.management.utils import get_random_secret_key; print(get_random_secret_key())'
#
# 3. Update all placeholder values marked with "your_*_here"
#
# 4. Set up MySQL database:
#    mysql -u root -p
#    CREATE DATABASE stockscanner CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;
#
# 5. Run Django migrations:
#    python manage.py migrate
#
# 6. Create PayPal subscription plans in your PayPal dashboard:
#    - Basic Monthly: $29.99/month
#    - Basic Annual: $305.99/year
#    - Plus Monthly: $59.99/month
#    - Plus Annual: $611.99/year
#
# 7. Add PayPal plan IDs to this file
#
# 8. Set secure file permissions:
#    chmod 600 .env
#
# 9. Never commit .env to version control!
#    Ensure .env is in .gitignore
#
# =============================================================================
# SUPPORT & DOCUMENTATION
# =============================================================================
# For more information, see:
# - Django Settings: https://docs.djangoproject.com/en/4.2/topics/settings/
# - PayPal Integration: PAYPAL_SETUP_GUIDE.md
# - Backend Setup: BACKEND_CRITICAL_ISSUES.md
# - Deployment: DEPLOYMENT.md
