{% extends 'base.html' %}

{% block title %}API Documentation | Stock Scanner API{% endblock %}

{% block content %}
<div class="card">
    <h1 style="margin-bottom: 2rem; color: #2d3748;">API Documentation</h1>
    
    <div class="alert alert-info">
        <strong>Base URL:</strong> {{ request.build_absolute_uri|slice:":"-1" }}
    </div>
    
    <h2 style="margin-top: 3rem; margin-bottom: 1.5rem; color: #2d3748;">Stock Data Endpoints</h2>
    
    <div class="card" style="margin-bottom: 2rem;">
        <h3>GET /api/stocks/</h3>
        <p>Retrieve a list of all available stocks with current market data.</p>
        <div style="background: #f7fafc; padding: 1rem; border-radius: 6px; margin: 1rem 0;">
            <strong>Response:</strong> JSON array of stock objects
        </div>
        <a href="/api/stocks/" class="btn btn-secondary">Try It</a>
    </div>
    
    <div class="card" style="margin-bottom: 2rem;">
        <h3>GET /api/stock/{ticker}/</h3>
        <p>Get detailed information for a specific stock by its ticker symbol.</p>
        <div style="background: #f7fafc; padding: 1rem; border-radius: 6px; margin: 1rem 0;">
            <strong>Parameters:</strong><br>
            • ticker (string): Stock symbol (e.g., AAPL, GOOGL, TSLA)
        </div>
        <a href="/api/stock/AAPL/" class="btn btn-secondary">Try AAPL</a>
    </div>
    
    <div class="card" style="margin-bottom: 2rem;">
        <h3>GET /api/search/</h3>
        <p>Search for stocks by symbol or company name.</p>
        <div style="background: #f7fafc; padding: 1rem; border-radius: 6px; margin: 1rem 0;">
            <strong>Query Parameters:</strong><br>
            • q (string): Search query
        </div>
        <a href="/api/search/?q=apple" class="btn btn-secondary">Search Apple</a>
    </div>
    
    <div class="card" style="margin-bottom: 2rem;">
        <h3>GET /api/trending/</h3>
        <p>Get currently trending stocks based on volume and price movement.</p>
        <a href="/api/trending/" class="btn btn-secondary">View Trending</a>
    </div>
    
    <h2 style="margin-top: 3rem; margin-bottom: 1.5rem; color: #2d3748;">Analytics Endpoints</h2>
    
    <div class="card" style="margin-bottom: 2rem;">
        <h3>GET /revenue/revenue-analytics/</h3>
        <p>Access revenue and subscription analytics data.</p>
        <a href="/revenue/revenue-analytics/" class="btn btn-secondary">View Analytics</a>
    </div>
    
    <div class="card" style="margin-bottom: 2rem;">
        <h3>GET /api/health/</h3>
        <p>Check the health status of the API service.</p>
        <a href="/api/health/" class="btn btn-secondary">Health Check</a>
    </div>
    
    <h2 style="margin-top: 3rem; margin-bottom: 1.5rem; color: #2d3748;">Alert Management</h2>
    
    <div class="card" style="margin-bottom: 2rem;">
        <h3>POST /api/alerts/create/</h3>
        <p>Create a new price alert for a stock.</p>
        <div style="background: #f7fafc; padding: 1rem; border-radius: 6px; margin: 1rem 0;">
            <strong>Required Fields:</strong><br>
            • ticker (string): Stock symbol<br>
            • target_price (number): Alert trigger price<br>
            • alert_type (string): "above" or "below"
        </div>
    </div>
    
    <h2 style="margin-top: 3rem; margin-bottom: 1.5rem; color: #2d3748;">Response Format</h2>
    
    <div style="background: #1a202c; color: #e2e8f0; padding: 1.5rem; border-radius: 8px; font-family: monospace; margin: 1rem 0;">
{
  "success": true,
  "data": {
    "ticker": "AAPL",
    "current_price": 150.25,
    "change_percent": 2.34,
    "volume": 45678900,
    "market_cap": 2500000000000
  },
  "timestamp": "2025-08-07T16:30:00Z"
}
    </div>
    
    <h2 style="margin-top: 3rem; margin-bottom: 1.5rem; color: #2d3748;">Rate Limits</h2>
    
    <div class="alert alert-info">
        • <strong>Free Tier:</strong> 1,000 requests per hour<br>
        • <strong>Premium:</strong> 10,000 requests per hour<br>
        • <strong>Enterprise:</strong> Unlimited
    </div>
    
    <div style="margin-top: 3rem; text-align: center;">
        <a href="/" class="btn">Back to Home</a>
        <a href="/admin/" class="btn btn-secondary">Admin Panel</a>
    </div>
</div>
{% endblock %}